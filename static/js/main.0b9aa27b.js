!function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var n={};t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="/",t(t.s=7)}([function(e,t,n){"use strict";e.exports=n(14)},function(e,t){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(e){"object"===typeof window&&(n=window)}e.exports=n},function(e,t,n){"use strict";function r(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}var i=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable;e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map(function(e){return t[e]}).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach(function(e){r[e]=e}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(e){return!1}}()?Object.assign:function(e,t){for(var n,s,c=r(e),u=1;u<arguments.length;u++){n=Object(arguments[u]);for(var l in n)o.call(n,l)&&(c[l]=n[l]);if(i){s=i(n);for(var d=0;d<s.length;d++)a.call(n,s[d])&&(c[s[d]]=n[s[d]])}}return c}},function(e,t,n){"use strict";function r(e){return function(){return e}}var i=function(){};i.thatReturns=r,i.thatReturnsFalse=r(!1),i.thatReturnsTrue=r(!0),i.thatReturnsNull=r(null),i.thatReturnsThis=function(){return this},i.thatReturnsArgument=function(e){return e},e.exports=i},function(e,t,n){"use strict";function r(){}function i(e){try{return e.then}catch(e){return v=e,y}}function o(e,t){try{return e(t)}catch(e){return v=e,y}}function a(e,t,n){try{e(t,n)}catch(e){return v=e,y}}function s(e){if("object"!==typeof this)throw new TypeError("Promises must be constructed via new");if("function"!==typeof e)throw new TypeError("Promise constructor's argument is not a function");this._75=0,this._83=0,this._18=null,this._38=null,e!==r&&g(e,this)}function c(e,t,n){return new e.constructor(function(i,o){var a=new s(r);a.then(i,o),u(e,new h(t,n,a))})}function u(e,t){for(;3===e._83;)e=e._18;if(s._47&&s._47(e),0===e._83)return 0===e._75?(e._75=1,void(e._38=t)):1===e._75?(e._75=2,void(e._38=[e._38,t])):void e._38.push(t);l(e,t)}function l(e,t){m(function(){var n=1===e._83?t.onFulfilled:t.onRejected;if(null===n)return void(1===e._83?d(t.promise,e._18):p(t.promise,e._18));var r=o(n,e._18);r===y?p(t.promise,v):d(t.promise,r)})}function d(e,t){if(t===e)return p(e,new TypeError("A promise cannot be resolved with itself."));if(t&&("object"===typeof t||"function"===typeof t)){var n=i(t);if(n===y)return p(e,v);if(n===e.then&&t instanceof s)return e._83=3,e._18=t,void f(e);if("function"===typeof n)return void g(n.bind(t),e)}e._83=1,e._18=t,f(e)}function p(e,t){e._83=2,e._18=t,s._71&&s._71(e,t),f(e)}function f(e){if(1===e._75&&(u(e,e._38),e._38=null),2===e._75){for(var t=0;t<e._38.length;t++)u(e,e._38[t]);e._38=null}}function h(e,t,n){this.onFulfilled="function"===typeof e?e:null,this.onRejected="function"===typeof t?t:null,this.promise=n}function g(e,t){var n=!1,r=a(e,function(e){n||(n=!0,d(t,e))},function(e){n||(n=!0,p(t,e))});n||r!==y||(n=!0,p(t,v))}var m=n(10),v=null,y={};e.exports=s,s._47=null,s._71=null,s._44=r,s.prototype.then=function(e,t){if(this.constructor!==s)return c(this,e,t);var n=new s(r);return u(this,new h(e,t,n)),n}},function(e,t,n){"use strict";var r={};e.exports=r},function(e,t,n){"use strict";function r(e,t,n,r,o,a,s,c){if(i(t),!e){var u;if(void 0===t)u=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var l=[n,r,o,a,s,c],d=0;u=new Error(t.replace(/%s/g,function(){return l[d++]})),u.name="Invariant Violation"}throw u.framesToPop=1,u}}var i=function(e){};e.exports=r},function(e,t,n){n(8),e.exports=n(13)},function(e,t,n){"use strict";"undefined"===typeof Promise&&(n(9).enable(),window.Promise=n(11)),n(12),Object.assign=n(2)},function(e,t,n){"use strict";function r(){u=!1,s._47=null,s._71=null}function i(e){function t(t){(e.allRejections||a(d[t].error,e.whitelist||c))&&(d[t].displayId=l++,e.onUnhandled?(d[t].logged=!0,e.onUnhandled(d[t].displayId,d[t].error)):(d[t].logged=!0,o(d[t].displayId,d[t].error)))}function n(t){d[t].logged&&(e.onHandled?e.onHandled(d[t].displayId,d[t].error):d[t].onUnhandled||(console.warn("Promise Rejection Handled (id: "+d[t].displayId+"):"),console.warn('  This means you can ignore any previous messages of the form "Possible Unhandled Promise Rejection" with id '+d[t].displayId+".")))}e=e||{},u&&r(),u=!0;var i=0,l=0,d={};s._47=function(e){2===e._83&&d[e._56]&&(d[e._56].logged?n(e._56):clearTimeout(d[e._56].timeout),delete d[e._56])},s._71=function(e,n){0===e._75&&(e._56=i++,d[e._56]={displayId:null,error:n,timeout:setTimeout(t.bind(null,e._56),a(n,c)?100:2e3),logged:!1})}}function o(e,t){console.warn("Possible Unhandled Promise Rejection (id: "+e+"):"),((t&&(t.stack||t))+"").split("\n").forEach(function(e){console.warn("  "+e)})}function a(e,t){return t.some(function(t){return e instanceof t})}var s=n(4),c=[ReferenceError,TypeError,RangeError],u=!1;t.disable=r,t.enable=i},function(e,t,n){"use strict";(function(t){function n(e){a.length||(o(),s=!0),a[a.length]=e}function r(){for(;c<a.length;){var e=c;if(c+=1,a[e].call(),c>u){for(var t=0,n=a.length-c;t<n;t++)a[t]=a[t+c];a.length-=c,c=0}}a.length=0,c=0,s=!1}function i(e){return function(){function t(){clearTimeout(n),clearInterval(r),e()}var n=setTimeout(t,0),r=setInterval(t,50)}}e.exports=n;var o,a=[],s=!1,c=0,u=1024,l="undefined"!==typeof t?t:self,d=l.MutationObserver||l.WebKitMutationObserver;o="function"===typeof d?function(e){var t=1,n=new d(e),r=document.createTextNode("");return n.observe(r,{characterData:!0}),function(){t=-t,r.data=t}}(r):i(r),n.requestFlush=o,n.makeRequestCallFromTimer=i}).call(t,n(1))},function(e,t,n){"use strict";function r(e){var t=new i(i._44);return t._83=1,t._18=e,t}var i=n(4);e.exports=i;var o=r(!0),a=r(!1),s=r(null),c=r(void 0),u=r(0),l=r("");i.resolve=function(e){if(e instanceof i)return e;if(null===e)return s;if(void 0===e)return c;if(!0===e)return o;if(!1===e)return a;if(0===e)return u;if(""===e)return l;if("object"===typeof e||"function"===typeof e)try{var t=e.then;if("function"===typeof t)return new i(t.bind(e))}catch(e){return new i(function(t,n){n(e)})}return r(e)},i.all=function(e){var t=Array.prototype.slice.call(e);return new i(function(e,n){function r(a,s){if(s&&("object"===typeof s||"function"===typeof s)){if(s instanceof i&&s.then===i.prototype.then){for(;3===s._83;)s=s._18;return 1===s._83?r(a,s._18):(2===s._83&&n(s._18),void s.then(function(e){r(a,e)},n))}var c=s.then;if("function"===typeof c){return void new i(c.bind(s)).then(function(e){r(a,e)},n)}}t[a]=s,0===--o&&e(t)}if(0===t.length)return e([]);for(var o=t.length,a=0;a<t.length;a++)r(a,t[a])})},i.reject=function(e){return new i(function(t,n){n(e)})},i.race=function(e){return new i(function(t,n){e.forEach(function(e){i.resolve(e).then(t,n)})})},i.prototype.catch=function(e){return this.then(null,e)}},function(e,t){!function(e){"use strict";function t(e){if("string"!==typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(e))throw new TypeError("Invalid character in header field name");return e.toLowerCase()}function n(e){return"string"!==typeof e&&(e=String(e)),e}function r(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return v.iterable&&(t[Symbol.iterator]=function(){return t}),t}function i(e){this.map={},e instanceof i?e.forEach(function(e,t){this.append(t,e)},this):Array.isArray(e)?e.forEach(function(e){this.append(e[0],e[1])},this):e&&Object.getOwnPropertyNames(e).forEach(function(t){this.append(t,e[t])},this)}function o(e){if(e.bodyUsed)return Promise.reject(new TypeError("Already read"));e.bodyUsed=!0}function a(e){return new Promise(function(t,n){e.onload=function(){t(e.result)},e.onerror=function(){n(e.error)}})}function s(e){var t=new FileReader,n=a(t);return t.readAsArrayBuffer(e),n}function c(e){var t=new FileReader,n=a(t);return t.readAsText(e),n}function u(e){for(var t=new Uint8Array(e),n=new Array(t.length),r=0;r<t.length;r++)n[r]=String.fromCharCode(t[r]);return n.join("")}function l(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function d(){return this.bodyUsed=!1,this._initBody=function(e){if(this._bodyInit=e,e)if("string"===typeof e)this._bodyText=e;else if(v.blob&&Blob.prototype.isPrototypeOf(e))this._bodyBlob=e;else if(v.formData&&FormData.prototype.isPrototypeOf(e))this._bodyFormData=e;else if(v.searchParams&&URLSearchParams.prototype.isPrototypeOf(e))this._bodyText=e.toString();else if(v.arrayBuffer&&v.blob&&b(e))this._bodyArrayBuffer=l(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer]);else{if(!v.arrayBuffer||!ArrayBuffer.prototype.isPrototypeOf(e)&&!w(e))throw new Error("unsupported BodyInit type");this._bodyArrayBuffer=l(e)}else this._bodyText="";this.headers.get("content-type")||("string"===typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):v.searchParams&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},v.blob&&(this.blob=function(){var e=o(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?o(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(s)}),this.text=function(){var e=o(this);if(e)return e;if(this._bodyBlob)return c(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(u(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},v.formData&&(this.formData=function(){return this.text().then(h)}),this.json=function(){return this.text().then(JSON.parse)},this}function p(e){var t=e.toUpperCase();return k.indexOf(t)>-1?t:e}function f(e,t){t=t||{};var n=t.body;if(e instanceof f){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new i(e.headers)),this.method=e.method,this.mode=e.mode,n||null==e._bodyInit||(n=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"omit",!t.headers&&this.headers||(this.headers=new i(t.headers)),this.method=p(t.method||this.method||"GET"),this.mode=t.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&n)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(n)}function h(e){var t=new FormData;return e.trim().split("&").forEach(function(e){if(e){var n=e.split("="),r=n.shift().replace(/\+/g," "),i=n.join("=").replace(/\+/g," ");t.append(decodeURIComponent(r),decodeURIComponent(i))}}),t}function g(e){var t=new i;return e.split(/\r?\n/).forEach(function(e){var n=e.split(":"),r=n.shift().trim();if(r){var i=n.join(":").trim();t.append(r,i)}}),t}function m(e,t){t||(t={}),this.type="default",this.status="status"in t?t.status:200,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in t?t.statusText:"OK",this.headers=new i(t.headers),this.url=t.url||"",this._initBody(e)}if(!e.fetch){var v={searchParams:"URLSearchParams"in e,iterable:"Symbol"in e&&"iterator"in Symbol,blob:"FileReader"in e&&"Blob"in e&&function(){try{return new Blob,!0}catch(e){return!1}}(),formData:"FormData"in e,arrayBuffer:"ArrayBuffer"in e};if(v.arrayBuffer)var y=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],b=function(e){return e&&DataView.prototype.isPrototypeOf(e)},w=ArrayBuffer.isView||function(e){return e&&y.indexOf(Object.prototype.toString.call(e))>-1};i.prototype.append=function(e,r){e=t(e),r=n(r);var i=this.map[e];this.map[e]=i?i+","+r:r},i.prototype.delete=function(e){delete this.map[t(e)]},i.prototype.get=function(e){return e=t(e),this.has(e)?this.map[e]:null},i.prototype.has=function(e){return this.map.hasOwnProperty(t(e))},i.prototype.set=function(e,r){this.map[t(e)]=n(r)},i.prototype.forEach=function(e,t){for(var n in this.map)this.map.hasOwnProperty(n)&&e.call(t,this.map[n],n,this)},i.prototype.keys=function(){var e=[];return this.forEach(function(t,n){e.push(n)}),r(e)},i.prototype.values=function(){var e=[];return this.forEach(function(t){e.push(t)}),r(e)},i.prototype.entries=function(){var e=[];return this.forEach(function(t,n){e.push([n,t])}),r(e)},v.iterable&&(i.prototype[Symbol.iterator]=i.prototype.entries);var k=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];f.prototype.clone=function(){return new f(this,{body:this._bodyInit})},d.call(f.prototype),d.call(m.prototype),m.prototype.clone=function(){return new m(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new i(this.headers),url:this.url})},m.error=function(){var e=new m(null,{status:0,statusText:""});return e.type="error",e};var C=[301,302,303,307,308];m.redirect=function(e,t){if(-1===C.indexOf(t))throw new RangeError("Invalid status code");return new m(null,{status:t,headers:{location:e}})},e.Headers=i,e.Request=f,e.Response=m,e.fetch=function(e,t){return new Promise(function(n,r){var i=new f(e,t),o=new XMLHttpRequest;o.onload=function(){var e={status:o.status,statusText:o.statusText,headers:g(o.getAllResponseHeaders()||"")};e.url="responseURL"in o?o.responseURL:e.headers.get("X-Request-URL");var t="response"in o?o.response:o.responseText;n(new m(t,e))},o.onerror=function(){r(new TypeError("Network request failed"))},o.ontimeout=function(){r(new TypeError("Network request failed"))},o.open(i.method,i.url,!0),"include"===i.credentials&&(o.withCredentials=!0),"responseType"in o&&v.blob&&(o.responseType="blob"),i.headers.forEach(function(e,t){o.setRequestHeader(t,e)}),o.send("undefined"===typeof i._bodyInit?null:i._bodyInit)})},e.fetch.polyfill=!0}}("undefined"!==typeof self?self:this)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),i=n.n(r),o=n(15),a=n.n(o),s=n(25),c=(n.n(s),n(26)),u=n(30),l=n(31),d=n.n(l),p=n(32),f=n.n(p),h=n(33),g=n.n(h),m=n(34),v=n.n(m),y=n(35),b=n.n(y);f()(d.a),g()(d.a),v()(d.a),b()(d.a),d()({db:{name:"memory"},connector:{name:"webrtc",room:"acailly-roti"},share:{votes:"Array"}}).then(function(e){window.y=e,console.log("Yjs instance ready!"),window.y.share.votes.observe(function(e){console.dir(e)}),a.a.render(i.a.createElement(c.a,null),document.getElementById("root")),Object(u.a)()})},function(e,t,n){"use strict";function r(e){for(var t=arguments.length-1,n="Minified React error #"+e+"; visit http://facebook.github.io/react/docs/error-decoder.html?invariant="+e,r=0;r<t;r++)n+="&args[]="+encodeURIComponent(arguments[r+1]);throw t=Error(n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."),t.name="Invariant Violation",t.framesToPop=1,t}function i(e,t,n){this.props=e,this.context=t,this.refs=y,this.updater=n||w}function o(e,t,n){this.props=e,this.context=t,this.refs=y,this.updater=n||w}function a(){}function s(e,t,n){this.props=e,this.context=t,this.refs=y,this.updater=n||w}function c(e,t,n,r,i,o,a){return{$$typeof:E,type:e,key:t,ref:n,props:a,_owner:o}}function u(e){var t={"=":"=0",":":"=2"};return"$"+(""+e).replace(/[=:]/g,function(e){return t[e]})}function l(e,t,n,r){if(I.length){var i=I.pop();return i.result=e,i.keyPrefix=t,i.func=n,i.context=r,i.count=0,i}return{result:e,keyPrefix:t,func:n,context:r,count:0}}function d(e){e.result=null,e.keyPrefix=null,e.func=null,e.context=null,e.count=0,10>I.length&&I.push(e)}function p(e,t,n,i){var o=typeof e;if("undefined"!==o&&"boolean"!==o||(e=null),null===e||"string"===o||"number"===o||"object"===o&&e.$$typeof===P)return n(i,e,""===t?"."+f(e,0):t),1;var a=0;if(t=""===t?".":t+":",Array.isArray(e))for(var s=0;s<e.length;s++){o=e[s];var c=t+f(o,s);a+=p(o,c,n,i)}else if("function"===typeof(c=_&&e[_]||e["@@iterator"]))for(e=c.call(e),s=0;!(o=e.next()).done;)o=o.value,c=t+f(o,s++),a+=p(o,c,n,i);else"object"===o&&(n=""+e,r("31","[object Object]"===n?"object with keys {"+Object.keys(e).join(", ")+"}":n,""));return a}function f(e,t){return"object"===typeof e&&null!==e&&null!=e.key?u(e.key):t.toString(36)}function h(e,t){e.func.call(e.context,t,e.count++)}function g(e,t,n){var r=e.result,i=e.keyPrefix;e=e.func.call(e.context,t,e.count++),Array.isArray(e)?m(e,r,n,b.thatReturnsArgument):null!=e&&(c.isValidElement(e)&&(e=c.cloneAndReplaceKey(e,i+(!e.key||t&&t.key===e.key?"":(""+e.key).replace(R,"$&/")+"/")+n)),r.push(e))}function m(e,t,n,r,i){var o="";null!=n&&(o=(""+n).replace(R,"$&/")+"/"),t=l(t,o,r,i),null==e||p(e,"",g,t),d(t)}var v=n(2),y=n(5);n(6);var b=n(3),w={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}};i.prototype.isReactComponent={},i.prototype.setState=function(e,t){"object"!==typeof e&&"function"!==typeof e&&null!=e&&r("85"),this.updater.enqueueSetState(this,e,t,"setState")},i.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},a.prototype=i.prototype;var k=o.prototype=new a;k.constructor=o,v(k,i.prototype),k.isPureReactComponent=!0;var C=s.prototype=new a;C.constructor=s,v(C,i.prototype),C.unstable_isAsyncReactComponent=!0,C.render=function(){return this.props.children};var S={Component:i,PureComponent:o,AsyncComponent:s},x={current:null},T=Object.prototype.hasOwnProperty,E="function"===typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,O={key:!0,ref:!0,__self:!0,__source:!0};c.createElement=function(e,t,n){var r,i={},o=null,a=null,s=null,u=null;if(null!=t)for(r in void 0!==t.ref&&(a=t.ref),void 0!==t.key&&(o=""+t.key),s=void 0===t.__self?null:t.__self,u=void 0===t.__source?null:t.__source,t)T.call(t,r)&&!O.hasOwnProperty(r)&&(i[r]=t[r]);var l=arguments.length-2;if(1===l)i.children=n;else if(1<l){for(var d=Array(l),p=0;p<l;p++)d[p]=arguments[p+2];i.children=d}if(e&&e.defaultProps)for(r in l=e.defaultProps)void 0===i[r]&&(i[r]=l[r]);return c(e,o,a,s,u,x.current,i)},c.createFactory=function(e){var t=c.createElement.bind(null,e);return t.type=e,t},c.cloneAndReplaceKey=function(e,t){return c(e.type,t,e.ref,e._self,e._source,e._owner,e.props)},c.cloneElement=function(e,t,n){var r=v({},e.props),i=e.key,o=e.ref,a=e._self,s=e._source,u=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,u=x.current),void 0!==t.key&&(i=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(d in t)T.call(t,d)&&!O.hasOwnProperty(d)&&(r[d]=void 0===t[d]&&void 0!==l?l[d]:t[d])}var d=arguments.length-2;if(1===d)r.children=n;else if(1<d){l=Array(d);for(var p=0;p<d;p++)l[p]=arguments[p+2];r.children=l}return c(e.type,i,o,a,s,u,r)},c.isValidElement=function(e){return"object"===typeof e&&null!==e&&e.$$typeof===E};var _="function"===typeof Symbol&&Symbol.iterator,P="function"===typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,R=/\/+/g,I=[],D={forEach:function(e,t,n){if(null==e)return e;t=l(null,null,t,n),null==e||p(e,"",h,t),d(t)},map:function(e,t,n){if(null==e)return e;var r=[];return m(e,r,null,t,n),r},count:function(e){return null==e?0:p(e,"",b.thatReturnsNull,null)},toArray:function(e){var t=[];return m(e,t,null,b.thatReturnsArgument),t}};e.exports={Children:{map:D.map,forEach:D.forEach,count:D.count,toArray:D.toArray,only:function(e){return c.isValidElement(e)||r("143"),e}},Component:S.Component,PureComponent:S.PureComponent,unstable_AsyncComponent:S.AsyncComponent,createElement:c.createElement,cloneElement:c.cloneElement,isValidElement:c.isValidElement,createFactory:c.createFactory,version:"16.0.0",__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:{ReactCurrentOwner:x,assign:v}}},function(e,t,n){"use strict";function r(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}r(),e.exports=n(16)},function(e,t,n){"use strict";function r(e){for(var t=arguments.length-1,n="Minified React error #"+e+"; visit http://facebook.github.io/react/docs/error-decoder.html?invariant="+e,r=0;r<t;r++)n+="&args[]="+encodeURIComponent(arguments[r+1]);throw t=Error(n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."),t.name="Invariant Violation",t.framesToPop=1,t}function i(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function o(){if(_t)for(var e in Pt){var t=Pt[e],n=_t.indexOf(e);if(-1<n||r("96",e),!Rt.plugins[n]){t.extractEvents||r("97",e),Rt.plugins[n]=t,n=t.eventTypes;for(var i in n){var o=void 0,s=n[i],c=t,u=i;Rt.eventNameDispatchConfigs.hasOwnProperty(u)&&r("99",u),Rt.eventNameDispatchConfigs[u]=s;var l=s.phasedRegistrationNames;if(l){for(o in l)l.hasOwnProperty(o)&&a(l[o],c,u);o=!0}else s.registrationName?(a(s.registrationName,c,u),o=!0):o=!1;o||r("98",i,e)}}}}function a(e,t,n){Rt.registrationNameModules[e]&&r("100",e),Rt.registrationNameModules[e]=t,Rt.registrationNameDependencies[e]=t.eventTypes[n].dependencies}function s(e,t){return(e&t)===t}function c(e){for(var t;t=e._renderedComponent;)e=t;return e}function u(e,t){e=c(e),e._hostNode=t,t[zt]=e}function l(e,t){if(!(e._flags&Wt.hasCachedChildNodes)){var n=e._renderedChildren;t=t.firstChild;var i;e:for(i in n)if(n.hasOwnProperty(i)){var o=n[i],a=c(o)._domID;if(0!==a){for(;null!==t;t=t.nextSibling){var s=t,l=a;if(s.nodeType===Bt&&s.getAttribute(Yt)===""+l||s.nodeType===Ht&&s.nodeValue===" react-text: "+l+" "||s.nodeType===Ht&&s.nodeValue===" react-empty: "+l+" "){u(o,t);continue e}}r("32",a)}}e._flags|=Wt.hasCachedChildNodes}}function d(e){if(e[zt])return e[zt];for(var t=[];!e[zt];){if(t.push(e),!e.parentNode)return null;e=e.parentNode}var n=e[zt];if(n.tag===Ft||n.tag===Ut)return n;for(;e&&(n=e[zt]);e=t.pop()){var r=n;t.length&&l(n,e)}return r}function p(e){if("function"===typeof e.getName)return e.getName();if("number"===typeof e.tag){if("string"===typeof(e=e.type))return e;if("function"===typeof e)return e.displayName||e.name}return null}function f(e){var t=e;if(e.alternate)for(;t.return;)t=t.return;else{if((t.effectTag&nn)!==tn)return 1;for(;t.return;)if(t=t.return,(t.effectTag&nn)!==tn)return 1}return t.tag===Qt?2:3}function h(e){2!==f(e)&&r("188")}function g(e){var t=e.alternate;if(!t)return t=f(e),3===t&&r("188"),1===t?null:e;for(var n=e,i=t;;){var o=n.return,a=o?o.alternate:null;if(!o||!a)break;if(o.child===a.child){for(var s=o.child;s;){if(s===n)return h(o),e;if(s===i)return h(o),t;s=s.sibling}r("188")}if(n.return!==i.return)n=o,i=a;else{s=!1;for(var c=o.child;c;){if(c===n){s=!0,n=o,i=a;break}if(c===i){s=!0,i=o,n=a;break}c=c.sibling}if(!s){for(c=a.child;c;){if(c===n){s=!0,n=a,i=o;break}if(c===i){s=!0,i=a,n=o;break}c=c.sibling}s||r("189")}}n.alternate!==i&&r("190")}return n.tag!==Qt&&r("188"),n.stateNode.current===n?e:t}function m(e,t,n,r,i,o,a,s,c){on._hasCaughtError=!1,on._caughtError=null;var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(e){on._caughtError=e,on._hasCaughtError=!0}}function v(){if(on._hasRethrowError){var e=on._rethrowError;throw on._rethrowError=null,on._hasRethrowError=!1,e}}function y(e,t,n,r){t=e.type||"unknown-event",e.currentTarget=sn.getNodeFromInstance(r),an.invokeGuardedCallbackAndCatchFirstError(t,n,void 0,e),e.currentTarget=null}function b(e){if(e=cn.getInstanceFromNode(e))if("number"===typeof e.tag){un&&"function"===typeof un.restoreControlledState||r("194");var t=cn.getFiberCurrentPropsFromNode(e.stateNode);un.restoreControlledState(e.stateNode,e.type,t)}else"function"!==typeof e.restoreControlledState&&r("195"),e.restoreControlledState()}function w(e,t,n,r,i,o){return e(t,n,r,i,o)}function k(e,t){return e(t)}function C(e,t){return k(e,t)}function S(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===gn?e.parentNode:e}function x(e){var t=e.targetInst;do{if(!t){e.ancestors.push(t);break}var n=t;if("number"===typeof n.tag){for(;n.return;)n=n.return;n=n.tag!==mn?null:n.stateNode.containerInfo}else{for(;n._hostParent;)n=n._hostParent;n=qt.getNodeFromInstance(n).parentNode}if(!n)break;e.ancestors.push(t),t=qt.getClosestInstanceFromNode(n)}while(t);for(n=0;n<e.ancestors.length;n++)t=e.ancestors[n],yn._handleTopLevel(e.topLevelType,t,e.nativeEvent,S(e.nativeEvent))}function T(e,t){return null==t&&r("30"),null==e?t:Array.isArray(e)?Array.isArray(t)?(e.push.apply(e,t),e):(e.push(t),e):Array.isArray(t)?[e].concat(t):[e,t]}function E(e,t,n){Array.isArray(e)?e.forEach(t,n):e&&t.call(n,e)}function O(e,t){e&&(cn.executeDispatchesInOrder(e,t),e.isPersistent()||e.constructor.release(e))}function _(e){return O(e,!0)}function P(e){return O(e,!1)}function R(e,t,n){switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":return!(!n.disabled||"button"!==t&&"input"!==t&&"select"!==t&&"textarea"!==t);default:return!1}}function I(e,t){if(!mt.canUseDOM||t&&!("addEventListener"in document))return!1;t="on"+e;var n=t in document;return n||(n=document.createElement("div"),n.setAttribute(t,"return;"),n="function"===typeof n[t]),!n&&Et&&"wheel"===e&&(n=document.implementation.hasFeature("Events.wheel","3.0")),n}function D(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n["ms"+e]="MS"+t,n["O"+e]="o"+t.toLowerCase(),n}function N(e){if(Sn[e])return Sn[e];if(!Cn[e])return e;var t,n=Cn[e];for(t in n)if(n.hasOwnProperty(t)&&t in xn)return Sn[e]=n[t];return""}function j(e){return Object.prototype.hasOwnProperty.call(e,_n)||(e[_n]=On++,En[e[_n]]={}),En[e[_n]]}function M(e){return!!Bn.hasOwnProperty(e)||!Un.hasOwnProperty(e)&&(Fn.test(e)?Bn[e]=!0:(Un[e]=!0,!1))}function A(){return null}function L(e){var t="";return gt.Children.forEach(e,function(e){null==e||"string"!==typeof e&&"number"!==typeof e||(t+=e)}),t}function F(e,t,n){if(e=e.options,t){t={};for(var r=0;r<n.length;r++)t["$"+n[r]]=!0;for(n=0;n<e.length;n++)r=t.hasOwnProperty("$"+e[n].value),e[n].selected!==r&&(e[n].selected=r)}else{for(n=""+n,t=null,r=0;r<e.length;r++){if(e[r].value===n)return void(e[r].selected=!0);null!==t||e[r].disabled||(t=e[r])}null!==t&&(t.selected=!0)}}function U(e,t){t&&(Qn[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML)&&r("137",e,""),null!=t.dangerouslySetInnerHTML&&(null!=t.children&&r("60"),"object"===typeof t.dangerouslySetInnerHTML&&"__html"in t.dangerouslySetInnerHTML||r("61")),null!=t.style&&"object"!==typeof t.style&&r("62",""))}function B(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function H(e){var t=B(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"function"===typeof n.get&&"function"===typeof n.set)return Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:!0,get:function(){return n.get.call(this)},set:function(e){r=""+e,n.set.call(this,e)}}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}function Y(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function W(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===rr)return void(n.nodeValue=t)}e.textContent=t}function V(e,t){sr(t,e.nodeType===or||e.nodeType===ar?e:e.ownerDocument)}function z(e,t){return e!==Dr&&e!==Ir||t!==Dr&&t!==Ir?e===Rr&&t!==Rr?-255:e!==Rr&&t===Rr?255:e-t:0}function G(){return{first:null,last:null,hasForceUpdate:!1,callbackList:null}}function q(e,t,n,r){null!==n?n.next=t:(t.next=e.first,e.first=t),null!==r?t.next=r:e.last=t}function J(e,t){t=t.priorityLevel;var n=null;if(null!==e.last&&0>=z(e.last.priorityLevel,t))n=e.last;else for(e=e.first;null!==e&&0>=z(e.priorityLevel,t);)n=e,e=e.next;return n}function $(e,t){var n=e.alternate,r=e.updateQueue;null===r&&(r=e.updateQueue=G()),null!==n?null===(e=n.updateQueue)&&(e=n.updateQueue=G()):e=null,Mr=r,Ar=e!==r?e:null;var i=Mr;n=Ar;var o=J(i,t),a=null!==o?o.next:i.first;return null===n?(q(i,t,o,a),null):(r=J(n,t),e=null!==r?r.next:n.first,q(i,t,o,a),a===e&&null!==a||o===r&&null!==o?(null===r&&(n.first=t),null===e&&(n.last=null),null):(t={priorityLevel:t.priorityLevel,partialState:t.partialState,callback:t.callback,isReplace:t.isReplace,isForced:t.isForced,isTopLevelUnmount:t.isTopLevelUnmount,next:null},q(n,t,r,e),t))}function K(e,t,n,r){return e=e.partialState,"function"===typeof e?e.call(t,n,r):e}function X(e,t,n){e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=n}function Q(e){return e.tag===Yr&&null!=e.type.childContextTypes}function Z(e,t){var n=e.stateNode,i=e.type.childContextTypes;if("function"!==typeof n.getChildContext)return t;n=n.getChildContext();for(var o in n)o in i||r("108",p(e)||"Unknown",o);return vt({},t,n)}function ee(e,t,n){this.tag=e,this.key=t,this.stateNode=this.type=null,this.sibling=this.child=this.return=null,this.index=0,this.memoizedState=this.updateQueue=this.memoizedProps=this.pendingProps=this.ref=null,this.internalContextTag=n,this.effectTag=ui,this.lastEffect=this.firstEffect=this.nextEffect=null,this.pendingWorkPriority=si,this.alternate=null}function te(e,t,n){var i=void 0;return"function"===typeof e?(i=e.prototype&&e.prototype.isReactComponent?new ee(Zr,t,n):new ee(Qr,t,n),i.type=e):"string"===typeof e?(i=new ee(ti,t,n),i.type=e):"object"===typeof e&&null!==e&&"number"===typeof e.tag?i=e:r("130",null==e?e:typeof e,""),i}function ne(e){return null===e||"undefined"===typeof e?null:(e=Bi&&e[Bi]||e["@@iterator"],"function"===typeof e?e:null)}function re(e,t){var n=t.ref;if(null!==n&&"function"!==typeof n){if(t._owner){t=t._owner;var i=void 0;t&&("number"===typeof t.tag?(t.tag!==Ii&&r("110"),i=t.stateNode):i=t.getPublicInstance()),i||r("147",n);var o=""+n;return null!==e&&null!==e.ref&&e.ref._stringRef===o?e.ref:(e=function(e){var t=i.refs===wt?i.refs={}:i.refs;null===e?delete t[o]:t[o]=e},e._stringRef=o,e)}"string"!==typeof n&&r("148"),t._owner||r("149",n)}return n}function ie(e,t){"textarea"!==e.type&&r("31","[object Object]"===Object.prototype.toString.call(t)?"object with keys {"+Object.keys(t).join(", ")+"}":t,"")}function oe(e,t){function n(n,r){if(t){if(!e){if(null===r.alternate)return;r=r.alternate}var i=n.lastEffect;null!==i?(i.nextEffect=r,n.lastEffect=r):n.firstEffect=n.lastEffect=r,r.nextEffect=null,r.effectTag=Ui}}function i(e,r){if(!t)return null;for(;null!==r;)n(e,r),r=r.sibling;return null}function o(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function a(t,n){return e?(t=Ci(t,n),t.index=0,t.sibling=null,t):(t.pendingWorkPriority=n,t.effectTag=Li,t.index=0,t.sibling=null,t)}function s(e,n,r){return e.index=r,t?null!==(r=e.alternate)?(r=r.index,r<n?(e.effectTag=Fi,n):r):(e.effectTag=Fi,n):n}function c(e){return t&&null===e.alternate&&(e.effectTag=Fi),e}function u(e,t,n,r){return null===t||t.tag!==Di?(n=Ti(n,e.internalContextTag,r),n.return=e,n):(t=a(t,r),t.pendingProps=n,t.return=e,t)}function l(e,t,n,r){return null===t||t.type!==n.type?(r=Si(n,e.internalContextTag,r),r.ref=re(t,n),r.return=e,r):(r=a(t,r),r.ref=re(t,n),r.pendingProps=n.props,r.return=e,r)}function d(e,t,n,r){return null===t||t.tag!==ji?(n=Ei(n,e.internalContextTag,r),n.return=e,n):(t=a(t,r),t.pendingProps=n,t.return=e,t)}function p(e,t,n,r){return null===t||t.tag!==Mi?(t=Oi(n,e.internalContextTag,r),t.type=n.value,t.return=e,t):(t=a(t,r),t.type=n.value,t.return=e,t)}function f(e,t,n,r){return null===t||t.tag!==Ni||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?(n=_i(n,e.internalContextTag,r),n.return=e,n):(t=a(t,r),t.pendingProps=n.children||[],t.return=e,t)}function h(e,t,n,r){return null===t||t.tag!==Ai?(n=xi(n,e.internalContextTag,r),n.return=e,n):(t=a(t,r),t.pendingProps=n,t.return=e,t)}function g(e,t,n){if("string"===typeof t||"number"===typeof t)return t=Ti(""+t,e.internalContextTag,n),t.return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case Hi:return n=Si(t,e.internalContextTag,n),n.ref=re(null,t),n.return=e,n;case bi:return t=Ei(t,e.internalContextTag,n),t.return=e,t;case wi:return n=Oi(t,e.internalContextTag,n),n.type=t.value,n.return=e,n;case ki:return t=_i(t,e.internalContextTag,n),t.return=e,t}if(Pi(t)||ne(t))return t=xi(t,e.internalContextTag,n),t.return=e,t;ie(e,t)}return null}function m(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n||"number"===typeof n)return null!==i?null:u(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case Hi:return n.key===i?l(e,t,n,r):null;case bi:return n.key===i?d(e,t,n,r):null;case wi:return null===i?p(e,t,n,r):null;case ki:return n.key===i?f(e,t,n,r):null}if(Pi(n)||ne(n))return null!==i?null:h(e,t,n,r);ie(e,n)}return null}function v(e,t,n,r,i){if("string"===typeof r||"number"===typeof r)return e=e.get(n)||null,u(t,e,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case Hi:return e=e.get(null===r.key?n:r.key)||null,l(t,e,r,i);case bi:return e=e.get(null===r.key?n:r.key)||null,d(t,e,r,i);case wi:return e=e.get(n)||null,p(t,e,r,i);case ki:return e=e.get(null===r.key?n:r.key)||null,f(t,e,r,i)}if(Pi(r)||ne(r))return e=e.get(n)||null,h(t,e,r,i);ie(t,r)}return null}function y(e,r,a,c){for(var u=null,l=null,d=r,p=r=0,f=null;null!==d&&p<a.length;p++){d.index>p?(f=d,d=null):f=d.sibling;var h=m(e,d,a[p],c);if(null===h){null===d&&(d=f);break}t&&d&&null===h.alternate&&n(e,d),r=s(h,r,p),null===l?u=h:l.sibling=h,l=h,d=f}if(p===a.length)return i(e,d),u;if(null===d){for(;p<a.length;p++)(d=g(e,a[p],c))&&(r=s(d,r,p),null===l?u=d:l.sibling=d,l=d);return u}for(d=o(e,d);p<a.length;p++)(f=v(d,e,p,a[p],c))&&(t&&null!==f.alternate&&d.delete(null===f.key?p:f.key),r=s(f,r,p),null===l?u=f:l.sibling=f,l=f);return t&&d.forEach(function(t){return n(e,t)}),u}function b(e,a,c,u){var l=ne(c);"function"!==typeof l&&r("150"),null==(c=l.call(c))&&r("151");for(var d=l=null,p=a,f=a=0,h=null,y=c.next();null!==p&&!y.done;f++,y=c.next()){p.index>f?(h=p,p=null):h=p.sibling;var b=m(e,p,y.value,u);if(null===b){p||(p=h);break}t&&p&&null===b.alternate&&n(e,p),a=s(b,a,f),null===d?l=b:d.sibling=b,d=b,p=h}if(y.done)return i(e,p),l;if(null===p){for(;!y.done;f++,y=c.next())null!==(y=g(e,y.value,u))&&(a=s(y,a,f),null===d?l=y:d.sibling=y,d=y);return l}for(p=o(e,p);!y.done;f++,y=c.next())null!==(y=v(p,e,f,y.value,u))&&(t&&null!==y.alternate&&p.delete(null===y.key?f:y.key),a=s(y,a,f),null===d?l=y:d.sibling=y,d=y);return t&&p.forEach(function(t){return n(e,t)}),l}return function(e,t,o,s){var u="object"===typeof o&&null!==o;if(u)switch(o.$$typeof){case Hi:e:{var l=o.key;for(u=t;null!==u;){if(u.key===l){if(u.type===o.type){i(e,u.sibling),t=a(u,s),t.ref=re(u,o),t.pendingProps=o.props,t.return=e,e=t;break e}i(e,u);break}n(e,u),u=u.sibling}s=Si(o,e.internalContextTag,s),s.ref=re(t,o),s.return=e,e=s}return c(e);case bi:e:{for(u=o.key;null!==t;){if(t.key===u){if(t.tag===ji){i(e,t.sibling),t=a(t,s),t.pendingProps=o,t.return=e,e=t;break e}i(e,t);break}n(e,t),t=t.sibling}o=Ei(o,e.internalContextTag,s),o.return=e,e=o}return c(e);case wi:e:{if(null!==t){if(t.tag===Mi){i(e,t.sibling),t=a(t,s),t.type=o.value,t.return=e,e=t;break e}i(e,t)}t=Oi(o,e.internalContextTag,s),t.type=o.value,t.return=e,e=t}return c(e);case ki:e:{for(u=o.key;null!==t;){if(t.key===u){if(t.tag===Ni&&t.stateNode.containerInfo===o.containerInfo&&t.stateNode.implementation===o.implementation){i(e,t.sibling),t=a(t,s),t.pendingProps=o.children||[],t.return=e,e=t;break e}i(e,t);break}n(e,t),t=t.sibling}o=_i(o,e.internalContextTag,s),o.return=e,e=o}return c(e)}if("string"===typeof o||"number"===typeof o)return o=""+o,null!==t&&t.tag===Di?(i(e,t.sibling),t=a(t,s),t.pendingProps=o,t.return=e,e=t):(i(e,t),o=Ti(o,e.internalContextTag,s),o.return=e,e=o),c(e);if(Pi(o))return y(e,t,o,s);if(ne(o))return b(e,t,o,s);if(u&&ie(e,o),"undefined"===typeof o)switch(e.tag){case Ii:case Ri:o=e.type,r("152",o.displayName||o.name||"Component")}return i(e,t)}}function ae(e,t,n,i){function o(e,t){t.updater=a,e.stateNode=t,Jt.set(t,e)}var a={isMounted:ro,enqueueSetState:function(n,r,i){n=Jt.get(n);var o=t(n,!1);Qi(n,r,void 0===i?null:i,o),e(n,o)},enqueueReplaceState:function(n,r,i){n=Jt.get(n);var o=t(n,!1);Zi(n,r,void 0===i?null:i,o),e(n,o)},enqueueForceUpdate:function(n,r){n=Jt.get(n);var i=t(n,!1);eo(n,void 0===r?null:r,i),e(n,i)}};return{adoptClassInstance:o,constructClassInstance:function(e,t){var n=e.type,r=Ki(e),i=Xi(e),a=i?$i(e,r):wt;return t=new n(t,a),o(e,t),i&&Ji(e,r,a),t},mountClassInstance:function(e,t){var n=e.alternate,i=e.stateNode,o=i.state||null,s=e.pendingProps;s||r("158");var c=Ki(e);i.props=s,i.state=o,i.refs=wt,i.context=$i(e,c),Or.enableAsyncSubtreeAPI&&null!=e.type&&null!=e.type.prototype&&!0===e.type.prototype.unstable_isAsyncReactComponent&&(e.internalContextTag|=qi),"function"===typeof i.componentWillMount&&(c=i.state,i.componentWillMount(),c!==i.state&&a.enqueueReplaceState(i,i.state,null),null!==(c=e.updateQueue)&&(i.state=to(n,e,c,i,o,s,t))),"function"===typeof i.componentDidMount&&(e.effectTag|=Gi)},updateClassInstance:function(e,t,o){var s=t.stateNode;s.props=t.memoizedProps,s.state=t.memoizedState;var c=t.memoizedProps,u=t.pendingProps;u||null==(u=c)&&r("159");var l=s.context,d=Ki(t);if(d=$i(t,d),"function"!==typeof s.componentWillReceiveProps||c===u&&l===d||(l=s.state,s.componentWillReceiveProps(u,d),s.state!==l&&a.enqueueReplaceState(s,s.state,null)),l=t.memoizedState,o=null!==t.updateQueue?to(e,t,t.updateQueue,s,l,u,o):l,!(c!==u||l!==o||no()||null!==t.updateQueue&&t.updateQueue.hasForceUpdate))return"function"!==typeof s.componentDidUpdate||c===e.memoizedProps&&l===e.memoizedState||(t.effectTag|=Gi),!1;var p=u;if(null===c||null!==t.updateQueue&&t.updateQueue.hasForceUpdate)p=!0;else{var f=t.stateNode,h=t.type;p="function"===typeof f.shouldComponentUpdate?f.shouldComponentUpdate(p,o,d):!h.prototype||!h.prototype.isPureReactComponent||(!kt(c,p)||!kt(l,o))}return p?("function"===typeof s.componentWillUpdate&&s.componentWillUpdate(u,o,d),"function"===typeof s.componentDidUpdate&&(t.effectTag|=Gi)):("function"!==typeof s.componentDidUpdate||c===e.memoizedProps&&l===e.memoizedState||(t.effectTag|=Gi),n(t,u),i(t,o)),s.props=u,s.state=o,s.context=d,p}}}function se(e,t,n,i,o){function a(e,t,n){s(e,t,n,t.pendingWorkPriority)}function s(e,t,n,r){t.child=null===e?io(t,t.child,n,r):e.child===t.child?oo(t,t.child,n,r):ao(t,t.child,n,r)}function c(e,t){var n=t.ref;null===n||e&&e.ref===n||(t.effectTag|=No)}function u(e,t,n,r){if(c(e,t),!n)return r&&go(t,!1),d(e,t);n=t.stateNode,jo.current=t;var i=n.render();return t.effectTag|=Po,a(e,t,i),t.memoizedState=n.state,t.memoizedProps=n.props,r&&go(t,!0),t.child}function l(e){var t=e.stateNode;t.pendingContext?ho(e,t.pendingContext,t.pendingContext!==t.context):t.context&&ho(e,t.context,!1),v(e,t.containerInfo)}function d(e,t){return so(e,t),t.child}function p(e,t){switch(t.tag){case bo:l(t);break;case yo:fo(t);break;case Co:v(t,t.stateNode.containerInfo)}return null}var f=e.shouldSetTextContent,h=e.useSyncScheduling,g=e.shouldDeprioritizeSubtree,m=t.pushHostContext,v=t.pushHostContainer,y=n.enterHydrationState,b=n.resetHydrationState,w=n.tryToClaimNextHydratableInstance;e=ae(i,o,function(e,t){e.memoizedProps=t},function(e,t){e.memoizedState=t});var k=e.adoptClassInstance,C=e.constructClassInstance,S=e.mountClassInstance,x=e.updateClassInstance;return{beginWork:function(e,t,n){if(t.pendingWorkPriority===Oo||t.pendingWorkPriority>n)return p(e,t);switch(t.tag){case mo:null!==e&&r("155");var i=t.type,o=t.pendingProps,s=lo(t);return s=uo(t,s),i=i(o,s),t.effectTag|=Po,"object"===typeof i&&null!==i&&"function"===typeof i.render?(t.tag=yo,o=fo(t),k(t,i),S(t,n),t=u(e,t,!0,o)):(t.tag=vo,a(e,t,i),t.memoizedProps=o,t=t.child),t;case vo:e:{if(o=t.type,n=t.pendingProps,i=t.memoizedProps,po())null===n&&(n=i);else if(null===n||i===n){t=d(e,t);break e}i=lo(t),i=uo(t,i),o=o(n,i),t.effectTag|=Po,a(e,t,o),t.memoizedProps=n,t=t.child}return t;case yo:return o=fo(t),i=void 0,null===e?t.stateNode?r("153"):(C(t,t.pendingProps),S(t,n),i=!0):i=x(e,t,n),u(e,t,i,o);case bo:return l(t),i=t.updateQueue,null!==i?(o=t.memoizedState,i=co(e,t,i,null,o,null,n),o===i?(b(),t=d(e,t)):(o=i.element,null!==e&&null!==e.child||!y(t)?(b(),a(e,t,o)):(t.effectTag|=Ro,t.child=io(t,t.child,o,n)),t.memoizedState=i,t=t.child)):(b(),t=d(e,t)),t;case wo:m(t),null===e&&w(t),o=t.type;var T=t.memoizedProps;return i=t.pendingProps,null===i&&null===(i=T)&&r("154"),s=null!==e?e.memoizedProps:null,po()||null!==i&&T!==i?(T=i.children,f(o,i)?T=null:s&&f(o,s)&&(t.effectTag|=Io),c(e,t),n!==_o&&!h&&g(o,i)?(t.pendingWorkPriority=_o,t=null):(a(e,t,T),t.memoizedProps=i,t=t.child)):t=d(e,t),t;case ko:return null===e&&w(t),e=t.pendingProps,null===e&&(e=t.memoizedProps),t.memoizedProps=e,null;case xo:t.tag=So;case So:return n=t.pendingProps,po()?null===n&&null===(n=e&&e.memoizedProps)&&r("154"):null!==n&&t.memoizedProps!==n||(n=t.memoizedProps),o=n.children,i=t.pendingWorkPriority,t.stateNode=null===e?io(t,t.stateNode,o,i):e.child===t.child?oo(t,t.stateNode,o,i):ao(t,t.stateNode,o,i),t.memoizedProps=n,t.stateNode;case To:return null;case Co:e:{if(v(t,t.stateNode.containerInfo),n=t.pendingWorkPriority,o=t.pendingProps,po())null===o&&null==(o=e&&e.memoizedProps)&&r("154");else if(null===o||t.memoizedProps===o){t=d(e,t);break e}null===e?t.child=ao(t,t.child,o,n):a(e,t,o),t.memoizedProps=o,t=t.child}return t;case Eo:e:{if(n=t.pendingProps,po())null===n&&(n=t.memoizedProps);else if(null===n||t.memoizedProps===n){t=d(e,t);break e}a(e,t,n),t.memoizedProps=n,t=t.child}return t;default:r("156")}},beginFailedWork:function(e,t,n){switch(t.tag){case yo:fo(t);break;case bo:l(t);break;default:r("157")}return t.effectTag|=Do,null===e?t.child=null:t.child!==e.child&&(t.child=e.child),t.pendingWorkPriority===Oo||t.pendingWorkPriority>n?p(e,t):(t.firstEffect=null,t.lastEffect=null,s(e,t,null,n),t.tag===yo&&(e=t.stateNode,t.memoizedProps=e.props,t.memoizedState=e.state),t.child)}}}function ce(e,t,n){var i=e.createInstance,o=e.createTextInstance,a=e.appendInitialChild,s=e.finalizeInitialChildren,c=e.prepareUpdate,u=t.getRootHostContainer,l=t.popHostContext,d=t.getHostContext,p=t.popHostContainer,f=n.prepareToHydrateHostInstance,h=n.prepareToHydrateHostTextInstance,g=n.popHydrationState;return{completeWork:function(e,t,n){var m=t.pendingProps;switch(null===m?m=t.memoizedProps:t.pendingWorkPriority===Qo&&n!==Qo||(t.pendingProps=null),t.tag){case Uo:return null;case Bo:return Ao(t),null;case Ho:return p(t),Lo(t),m=t.stateNode,m.pendingContext&&(m.context=m.pendingContext,m.pendingContext=null),null!==e&&null!==e.child||(g(t),t.effectTag&=~$o),null;case Yo:l(t),n=u();var v=t.type;if(null!==e&&null!=t.stateNode){var y=e.memoizedProps,b=t.stateNode,w=d();m=c(b,v,y,m,n,w),(t.updateQueue=m)&&(t.effectTag|=Xo),e.ref!==t.ref&&(t.effectTag|=Ko)}else{if(!m)return null===t.stateNode&&r("166"),null;if(e=d(),g(t))f(t,n,e)&&(t.effectTag|=Xo);else{e=i(v,m,n,e,t);e:for(y=t.child;null!==y;){if(y.tag===Yo||y.tag===Wo)a(e,y.stateNode);else if(y.tag!==Vo&&null!==y.child){y=y.child;continue}if(y===t)break e;for(;null===y.sibling;){if(null===y.return||y.return===t)break e;y=y.return}y=y.sibling}s(e,v,m,n)&&(t.effectTag|=Xo),t.stateNode=e}null!==t.ref&&(t.effectTag|=Ko)}return null;case Wo:if(e&&null!=t.stateNode)e.memoizedProps!==m&&(t.effectTag|=Xo);else{if("string"!==typeof m)return null===t.stateNode&&r("166"),null;e=u(),n=d(),g(t)?h(t)&&(t.effectTag|=Xo):t.stateNode=o(m,e,n,t)}return null;case zo:(m=t.memoizedProps)||r("165"),t.tag=Go,n=[];e:for((v=t.stateNode)&&(v.return=t);null!==v;){if(v.tag===Yo||v.tag===Wo||v.tag===Vo)r("164");else if(v.tag===qo)n.push(v.type);else if(null!==v.child){v.child.return=v,v=v.child;continue}for(;null===v.sibling;){if(null===v.return||v.return===t)break e;v=v.return}v.sibling.return=v.return,v=v.sibling}return v=m.handler,m=v(m.props,n),t.child=Mo(t,null!==e?e.child:null,m,t.pendingWorkPriority),t.child;case Go:return t.tag=zo,null;case qo:case Jo:return null;case Vo:return t.effectTag|=Xo,p(t),null;case Fo:r("167");default:r("156")}}}}function ue(e){return function(t){try{return e(t)}catch(e){}}}function le(e,t){function n(e){var n=e.ref;if(null!==n)try{n(null)}catch(n){t(e,n)}}function i(e){return e.tag===ia||e.tag===ra||e.tag===aa}function o(e){for(var t=e;;)if(s(t),null!==t.child&&t.tag!==aa)t.child.return=t,t=t.child;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return;t=t.return}t.sibling.return=t.return,t=t.sibling}}function a(e){for(var t=e,n=!1,i=void 0,a=void 0;;){if(!n){n=t.return;e:for(;;){switch(null===n&&r("160"),n.tag){case ia:i=n.stateNode,a=!1;break e;case ra:case aa:i=n.stateNode.containerInfo,a=!0;break e}n=n.return}n=!0}if(t.tag===ia||t.tag===oa)o(t),a?v(i,t.stateNode):m(i,t.stateNode);else if(t.tag===aa?i=t.stateNode.containerInfo:s(t),null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return;t=t.return,t.tag===aa&&(n=!1)}t.sibling.return=t.return,t=t.sibling}}function s(e){switch("function"===typeof ua&&ua(e),e.tag){case na:n(e);var r=e.stateNode;if("function"===typeof r.componentWillUnmount)try{r.props=e.memoizedProps,r.state=e.memoizedState,r.componentWillUnmount()}catch(n){t(e,n)}break;case ia:n(e);break;case sa:o(e.stateNode);break;case aa:a(e)}}var c=e.commitMount,u=e.commitUpdate,l=e.resetTextContent,d=e.commitTextUpdate,p=e.appendChild,f=e.appendChildToContainer,h=e.insertBefore,g=e.insertInContainerBefore,m=e.removeChild,v=e.removeChildFromContainer,y=e.getPublicInstance;return{commitPlacement:function(e){e:{for(var t=e.return;null!==t;){if(i(t)){var n=t;break e}t=t.return}r("160"),n=void 0}var o=t=void 0;switch(n.tag){case ia:t=n.stateNode,o=!1;break;case ra:case aa:t=n.stateNode.containerInfo,o=!0;break;default:r("161")}n.effectTag&fa&&(l(t),n.effectTag&=~fa);e:t:for(n=e;;){for(;null===n.sibling;){if(null===n.return||i(n.return)){n=null;break e}n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==ia&&n.tag!==oa;){if(n.effectTag&la)continue t;if(null===n.child||n.tag===aa)continue t;n.child.return=n,n=n.child}if(!(n.effectTag&la)){n=n.stateNode;break e}}for(var a=e;;){if(a.tag===ia||a.tag===oa)n?o?g(t,a.stateNode,n):h(t,a.stateNode,n):o?f(t,a.stateNode):p(t,a.stateNode);else if(a.tag!==aa&&null!==a.child){a.child.return=a,a=a.child;continue}if(a===e)break;for(;null===a.sibling;){if(null===a.return||a.return===e)return;a=a.return}a.sibling.return=a.return,a=a.sibling}},commitDeletion:function(e){a(e),e.return=null,e.child=null,e.alternate&&(e.alternate.child=null,e.alternate.return=null)},commitWork:function(e,t){switch(t.tag){case na:break;case ia:var n=t.stateNode;if(null!=n){var i=t.memoizedProps;e=null!==e?e.memoizedProps:i;var o=t.type,a=t.updateQueue;t.updateQueue=null,null!==a&&u(n,a,o,e,i,t)}break;case oa:null===t.stateNode&&r("162"),n=t.memoizedProps,d(t.stateNode,null!==e?e.memoizedProps:n,n);break;case ra:case aa:break;default:r("163")}},commitLifeCycles:function(e,t){switch(t.tag){case na:var n=t.stateNode;if(t.effectTag&da)if(null===e)n.props=t.memoizedProps,n.state=t.memoizedState,n.componentDidMount();else{var i=e.memoizedProps;e=e.memoizedState,n.props=t.memoizedProps,n.state=t.memoizedState,n.componentDidUpdate(i,e)}t.effectTag&pa&&null!==t.updateQueue&&ca(t,t.updateQueue,n);break;case ra:e=t.updateQueue,null!==e&&ca(t,e,t.child&&t.child.stateNode);break;case ia:n=t.stateNode,null===e&&t.effectTag&da&&c(n,t.type,t.memoizedProps,t);break;case oa:case aa:break;default:r("163")}},commitAttachRef:function(e){var t=e.ref;if(null!==t){var n=e.stateNode;switch(e.tag){case ia:t(y(n));break;default:t(n)}}},commitDetachRef:function(e){null!==(e=e.ref)&&e(null)}}}function de(e){function t(e){return e===va&&r("174"),e}var n=e.getChildHostContext,i=e.getRootHostContext,o=ha(va),a=ha(va),s=ha(va);return{getHostContext:function(){return t(o.current)},getRootHostContainer:function(){return t(s.current)},popHostContainer:function(e){ga(o,e),ga(a,e),ga(s,e)},popHostContext:function(e){a.current===e&&(ga(o,e),ga(a,e))},pushHostContainer:function(e,t){ma(s,t,e),t=i(t),ma(a,e,e),ma(o,t,e)},pushHostContext:function(e){var r=t(s.current),i=t(o.current);r=n(i,e.type,r),i!==r&&(ma(a,e,e),ma(o,r,e))},resetHostContainer:function(){o.current=va,s.current=va}}}function pe(e){function t(e,t){var n=Sa();n.stateNode=t,n.return=e,n.effectTag=ka,null!==e.lastEffect?(e.lastEffect.nextEffect=n,e.lastEffect=n):e.firstEffect=e.lastEffect=n}function n(e,t){switch(e.tag){case ya:return a(t,e.type,e.pendingProps);case ba:return s(t,e.pendingProps);default:return!1}}function i(e){for(e=e.return;null!==e&&e.tag!==ya&&e.tag!==wa;)e=e.return;h=e}var o=e.shouldSetTextContent,a=e.canHydrateInstance,s=e.canHydrateTextInstance,c=e.getNextHydratableSibling,u=e.getFirstHydratableChild,l=e.hydrateInstance,d=e.hydrateTextInstance,p=e.didNotHydrateInstance,f=e.didNotFindHydratableInstance;if(e=e.didNotFindHydratableTextInstance,!(a&&s&&c&&u&&l&&d&&p&&f&&e))return{enterHydrationState:function(){return!1},resetHydrationState:function(){},tryToClaimNextHydratableInstance:function(){},prepareToHydrateHostInstance:function(){r("175")},prepareToHydrateHostTextInstance:function(){r("176")},popHydrationState:function(){return!1}};var h=null,g=null,m=!1;return{enterHydrationState:function(e){return g=u(e.stateNode.containerInfo),h=e,m=!0},resetHydrationState:function(){g=h=null,m=!1},tryToClaimNextHydratableInstance:function(e){if(m){var r=g;if(r){if(!n(e,r)){if(!(r=c(r))||!n(e,r))return e.effectTag|=Ca,m=!1,void(h=e);t(h,g)}e.stateNode=r,h=e,g=u(r)}else e.effectTag|=Ca,m=!1,h=e}},prepareToHydrateHostInstance:function(e,t,n){return t=l(e.stateNode,e.type,e.memoizedProps,t,n,e),e.updateQueue=t,null!==t},prepareToHydrateHostTextInstance:function(e){return d(e.stateNode,e.memoizedProps,e)},popHydrationState:function(e){if(e!==h)return!1;if(!m)return i(e),m=!0,!1;var n=e.type;if(e.tag!==ya||"head"!==n&&"body"!==n&&!o(n,e.memoizedProps))for(n=g;n;)t(e,n),n=c(n);return i(e),g=h?c(e.stateNode):null,!0}}}function fe(e){function t(){for(;null!==G&&G.current.pendingWorkPriority===Ra;){G.isScheduled=!1;var e=G.nextScheduledRoot;if(G.nextScheduledRoot=null,G===q)return q=G=null,W=Ra,null;G=e}e=G;for(var t=null,n=Ra;null!==e;)e.current.pendingWorkPriority!==Ra&&(n===Ra||n>e.current.pendingWorkPriority)&&(n=e.current.pendingWorkPriority,t=e),e=e.nextScheduledRoot;null!==t?(W=n,Ta(),Xa(),C(),Y=Oa(t.current,n),t!==ie&&(re=0,ie=t)):(W=Ra,ie=Y=null)}function n(n){ee=!0,z=null;var i=n.stateNode;if(i.current===n&&r("177"),W!==Ia&&W!==Da||re++,Ea.current=null,n.effectTag>La)if(null!==n.lastEffect){n.lastEffect.nextEffect=n;var o=n.firstEffect}else o=n;else o=n.firstEffect;for(M(),V=o;null!==V;){var a=!1,s=void 0;try{for(;null!==V;){var c=V.effectTag;if(c&Ya&&e.resetTextContent(V.stateNode),c&za){var u=V.alternate;null!==u&&D(u)}switch(c&~(Wa|Va|Ya|za|La)){case Fa:O(V),V.effectTag&=~Fa;break;case Ba:O(V),V.effectTag&=~Fa,P(V.alternate,V);break;case Ua:P(V.alternate,V);break;case Ha:te=!0,_(V),te=!1}V=V.nextEffect}}catch(e){a=!0,s=e}a&&(null===V&&r("178"),d(V,s),null!==V&&(V=V.nextEffect))}for(A(),i.current=n,V=o;null!==V;){i=!1,o=void 0;try{for(;null!==V;){var l=V.effectTag;if(l&(Ua|Wa)&&R(V.alternate,V),l&za&&I(V),l&Va)switch(a=V,s=void 0,null!==$&&(s=$.get(a),$.delete(a),null==s&&null!==a.alternate&&(a=a.alternate,s=$.get(a),$.delete(a))),null==s&&r("184"),a.tag){case $a:a.stateNode.componentDidCatch(s.error,{componentStack:s.componentStack});break;case Ga:null===Q&&(Q=s.error);break;default:r("157")}var p=V.nextEffect;V.nextEffect=null,V=p}}catch(e){i=!0,o=e}i&&(null===V&&r("178"),d(V,o),null!==V&&(V=V.nextEffect))}ee=!1,"function"===typeof Pa&&Pa(n.stateNode),X&&(X.forEach(v),X=null),t()}function i(e){for(;;){var t=E(e.alternate,e,W),n=e.return,r=e.sibling,i=e;if(!(i.pendingWorkPriority!==Ra&&i.pendingWorkPriority>W)){for(var o=Ka(i),a=i.child;null!==a;)o=_a(o,a.pendingWorkPriority),a=a.sibling;i.pendingWorkPriority=o}if(null!==t)return t;if(null!==n&&(null===n.firstEffect&&(n.firstEffect=e.firstEffect),null!==e.lastEffect&&(null!==n.lastEffect&&(n.lastEffect.nextEffect=e.firstEffect),n.lastEffect=e.lastEffect),e.effectTag>La&&(null!==n.lastEffect?n.lastEffect.nextEffect=e:n.firstEffect=e,n.lastEffect=e)),null!==r)return r;if(null===n){z=e;break}e=n}return null}function o(e){var t=x(e.alternate,e,W);return null===t&&(t=i(e)),Ea.current=null,t}function a(e){var t=T(e.alternate,e,W);return null===t&&(t=i(e)),Ea.current=null,t}function s(e){l(Ma,e)}function c(){if(null!==$&&0<$.size&&W===Da)for(;null!==Y;){var e=Y;if(null===(Y=null!==$&&($.has(e)||null!==e.alternate&&$.has(e.alternate))?a(Y):o(Y))&&(null===z&&r("179"),L=Da,n(z),L=W,null===$||0===$.size||W!==Da))break}}function u(e,i){if(null!==z?(L=Da,n(z),c()):null===Y&&t(),!(W===Ra||W>e)){L=W;e:for(;;){if(W<=Da)for(;null!==Y&&!(null===(Y=o(Y))&&(null===z&&r("179"),L=Da,n(z),L=W,c(),W===Ra||W>e||W>Da)););else if(null!==i)for(;null!==Y&&!U;)if(1<i.timeRemaining()){if(null===(Y=o(Y)))if(null===z&&r("179"),1<i.timeRemaining()){if(L=Da,n(z),L=W,c(),W===Ra||W>e||W<Na)break}else U=!0}else U=!0;switch(W){case Ia:case Da:if(W<=e)continue e;break e;case Na:case ja:case Ma:if(null===i)break e;if(!U&&W<=e)continue e;break e;case Ra:break e;default:r("181")}}}}function l(e,t){F&&r("182"),F=!0;var n=L,i=!1,o=null;try{u(e,t)}catch(e){i=!0,o=e}for(;i;){if(Z){Q=o;break}var c=Y;if(null===c)Z=!0;else{var l=d(c,o);if(null===l&&r("183"),!Z){try{i=l,o=e,l=t;for(var p=i;null!==c;){switch(c.tag){case $a:xa(c);break;case qa:k(c);break;case Ga:w(c);break;case Ja:w(c)}if(c===p||c.alternate===p)break;c=c.return}Y=a(i),u(o,l)}catch(e){i=!0,o=e;continue}break}}}if(L=n,null!==t&&(J=!1),W>Da&&!J&&(N(s),J=!0),e=Q,Z=U=F=!1,ie=K=$=Q=null,re=0,null!==e)throw e}function d(e,t){var n=Ea.current=null,r=!1,i=!1,o=null;if(e.tag===Ga)n=e,f(e)&&(Z=!0);else for(var a=e.return;null!==a&&null===n;){if(a.tag===$a?"function"===typeof a.stateNode.componentDidCatch&&(r=!0,o=p(a),n=a,i=!0):a.tag===Ga&&(n=a),f(a)){if(te||null!==X&&(X.has(a)||null!==a.alternate&&X.has(a.alternate)))return null;n=null,i=!1}a=a.return}if(null!==n){null===K&&(K=new Set),K.add(n);var s="";a=e;do{e:switch(a.tag){case pi:case fi:case hi:case gi:var c=a._debugOwner,u=a._debugSource,l=p(a),d=null;c&&(d=p(c)),c=u,l="\n    in "+(l||"Unknown")+(c?" (at "+c.fileName.replace(/^.*[\\\/]/,"")+":"+c.lineNumber+")":d?" (created by "+d+")":"");break e;default:l=""}s+=l,a=a.return}while(a);a=s,e=p(e),null===$&&($=new Map),t={componentName:e,componentStack:a,error:t,errorBoundary:r?n.stateNode:null,errorBoundaryFound:r,errorBoundaryName:o,willRetry:i},$.set(n,t);try{console.error(t.error)}catch(e){console.error(e)}return ee?(null===X&&(X=new Set),X.add(n)):v(n),n}return null===Q&&(Q=t),null}function f(e){return null!==K&&(K.has(e)||null!==e.alternate&&K.has(e.alternate))}function h(e,t){return g(e,t,!1)}function g(e,t){re>ne&&(Z=!0,r("185")),!F&&t<=W&&(Y=null);for(var n=!0;null!==e&&n;){if(n=!1,(e.pendingWorkPriority===Ra||e.pendingWorkPriority>t)&&(n=!0,e.pendingWorkPriority=t),null!==e.alternate&&(e.alternate.pendingWorkPriority===Ra||e.alternate.pendingWorkPriority>t)&&(n=!0,e.alternate.pendingWorkPriority=t),null===e.return){if(e.tag!==Ga)break;var i=e.stateNode;if(t===Ra||i.isScheduled||(i.isScheduled=!0,q?q.nextScheduledRoot=i:G=i,q=i),!F)switch(t){case Ia:H?l(Ia,null):l(Da,null);break;case Da:B||r("186");break;default:J||(N(s),J=!0)}}e=e.return}}function m(e,t){var n=L;return n===Ra&&(n=!j||e.internalContextTag&Aa||t?ja:Ia),n===Ia&&(F||B)?Da:n}function v(e){g(e,Da,!0)}var y=de(e),b=pe(e),w=y.popHostContainer,k=y.popHostContext,C=y.resetHostContainer,S=se(e,y,b,h,m),x=S.beginWork,T=S.beginFailedWork,E=ce(e,y,b).completeWork;y=le(e,d);var O=y.commitPlacement,_=y.commitDeletion,P=y.commitWork,R=y.commitLifeCycles,I=y.commitAttachRef,D=y.commitDetachRef,N=e.scheduleDeferredCallback,j=e.useSyncScheduling,M=e.prepareForCommit,A=e.resetAfterCommit,L=Ra,F=!1,U=!1,B=!1,H=!1,Y=null,W=Ra,V=null,z=null,G=null,q=null,J=!1,$=null,K=null,X=null,Q=null,Z=!1,ee=!1,te=!1,ne=1e3,re=0,ie=null;return{scheduleUpdate:h,getPriorityContext:m,batchedUpdates:function(e,t){var n=B;B=!0;try{return e(t)}finally{B=n,F||B||l(Da,null)}},unbatchedUpdates:function(e){var t=H,n=B;H=B,B=!1;try{return e()}finally{B=n,H=t}},flushSync:function(e){var t=B,n=L;B=!0,L=Ia;try{return e()}finally{B=t,L=n,F&&r("187"),l(Da,null)}},deferredUpdates:function(e){var t=L;L=ja;try{return e()}finally{L=t}}}}function he(){r("196")}function ge(e){return e?(e=Jt.get(e),"number"===typeof e.tag?he(e):e._processChildContext(e._context)):wt}function me(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ve(e,t){var n=me(e);e=0;for(var r;n;){if(n.nodeType===os){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=me(n)}}function ye(){return!as&&mt.canUseDOM&&(as="textContent"in document.documentElement?"textContent":"innerText"),as}function be(){r("211")}function we(){r("212")}function ke(e){if(null==e)return null;if(e.nodeType===ds)return e;var t=Jt.get(e);if(t)return"number"===typeof t.tag?be(t):we(t);"function"===typeof e.render?r("188"):r("213",Object.keys(e))}function Ce(e){if(void 0!==e._hostParent)return e._hostParent;if("number"===typeof e.tag){do{e=e.return}while(e&&e.tag!==ps);if(e)return e}return null}function Se(e,t){for(var n=0,r=e;r;r=Ce(r))n++;r=0;for(var i=t;i;i=Ce(i))r++;for(;0<n-r;)e=Ce(e),n--;for(;0<r-n;)t=Ce(t),r--;for(;n--;){if(e===t||e===t.alternate)return e;e=Ce(e),t=Ce(t)}return null}function xe(e,t,n){(t=hs(e,n.dispatchConfig.phasedRegistrationNames[t]))&&(n._dispatchListeners=T(n._dispatchListeners,t),n._dispatchInstances=T(n._dispatchInstances,e))}function Te(e){e&&e.dispatchConfig.phasedRegistrationNames&&fs.traverseTwoPhase(e._targetInst,xe,e)}function Ee(e){if(e&&e.dispatchConfig.phasedRegistrationNames){var t=e._targetInst;t=t?fs.getParentInstance(t):null,fs.traverseTwoPhase(t,xe,e)}}function Oe(e,t,n){e&&n&&n.dispatchConfig.registrationName&&(t=hs(e,n.dispatchConfig.registrationName))&&(n._dispatchListeners=T(n._dispatchListeners,t),n._dispatchInstances=T(n._dispatchInstances,e))}function _e(e){e&&e.dispatchConfig.registrationName&&Oe(e._targetInst,null,e)}function Pe(e,t,n,r){this.dispatchConfig=e,this._targetInst=t,this.nativeEvent=n,e=this.constructor.Interface;for(var i in e)e.hasOwnProperty(i)&&((t=e[i])?this[i]=t(n):"target"===i?this.target=r:this[i]=n[i]);return this.isDefaultPrevented=(null!=n.defaultPrevented?n.defaultPrevented:!1===n.returnValue)?bt.thatReturnsTrue:bt.thatReturnsFalse,this.isPropagationStopped=bt.thatReturnsFalse,this}function Re(e,t,n,r){if(this.eventPool.length){var i=this.eventPool.pop();return this.call(i,e,t,n,r),i}return new this(e,t,n,r)}function Ie(e){e instanceof this||r("223"),e.destructor(),10>this.eventPool.length&&this.eventPool.push(e)}function De(e){e.eventPool=[],e.getPooled=Re,e.release=Ie}function Ne(e,t,n,r){return Pe.call(this,e,t,n,r)}function je(e,t,n,r){return Pe.call(this,e,t,n,r)}function Me(e,t){switch(e){case"topKeyUp":return-1!==ks.indexOf(t.keyCode);case"topKeyDown":return 229!==t.keyCode;case"topKeyPress":case"topMouseDown":case"topBlur":return!0;default:return!1}}function Ae(e){return e=e.detail,"object"===typeof e&&"data"in e?e.data:null}function Le(e,t){switch(e){case"topCompositionEnd":return Ae(t);case"topKeyPress":return 32!==t.which?null:(Rs=!0,_s);case"topTextInput":return e=t.data,e===_s&&Rs?null:e;default:return null}}function Fe(e,t){if(Is)return"topCompositionEnd"===e||!Cs&&Me(e,t)?(e=ys.getData(),ys.reset(),Is=!1,e):null;switch(e){case"topPaste":return null;case"topKeyPress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"topCompositionEnd":return Os?null:t.data;default:return null}}function Ue(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Ns[e.type]:"textarea"===t}function Be(e,t,n){return e=Pe.getPooled(js.change,e,t,n),e.type="change",pn.enqueueStateRestore(n),gs.accumulateTwoPhaseDispatches(e),e}function He(e){kn.enqueueEvents(e),kn.processEventQueue(!1)}function Ye(e){var t=qt.getNodeFromInstance(e);if(Zn.updateValueIfChanged(t))return e}function We(e,t){if("topChange"===e)return t}function Ve(){Ms&&(Ms.detachEvent("onpropertychange",ze),As=Ms=null)}function ze(e){"value"===e.propertyName&&Ye(As)&&(e=Be(As,e,S(e)),hn.batchedUpdates(He,e))}function Ge(e,t,n){"topFocus"===e?(Ve(),Ms=t,As=n,Ms.attachEvent("onpropertychange",ze)):"topBlur"===e&&Ve()}function qe(e){if("topSelectionChange"===e||"topKeyUp"===e||"topKeyDown"===e)return Ye(As)}function Je(e,t){if("topClick"===e)return Ye(t)}function $e(e,t){if("topInput"===e||"topChange"===e)return Ye(t)}function Ke(e,t,n,r){return Pe.call(this,e,t,n,r)}function Xe(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Us[e])&&!!t[e]}function Qe(){return Xe}function Ze(e,t,n,r){return Pe.call(this,e,t,n,r)}function et(e,t){if(Js||null==zs||zs!==xt())return null;var n=zs;return"selectionStart"in n&&ls.hasSelectionCapabilities(n)?n={start:n.selectionStart,end:n.selectionEnd}:window.getSelection?(n=window.getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}):n=void 0,qs&&kt(qs,n)?null:(qs=n,e=Pe.getPooled(Vs.select,Gs,e,t),e.type="select",e.target=zs,gs.accumulateTwoPhaseDispatches(e),e)}function tt(e,t,n,r){return Pe.call(this,e,t,n,r)}function nt(e,t,n,r){return Pe.call(this,e,t,n,r)}function rt(e,t,n,r){return Pe.call(this,e,t,n,r)}function it(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,32<=e||13===e?e:0}function ot(e,t,n,r){return Pe.call(this,e,t,n,r)}function at(e,t,n,r){return Pe.call(this,e,t,n,r)}function st(e,t,n,r){return Pe.call(this,e,t,n,r)}function ct(e,t,n,r){return Pe.call(this,e,t,n,r)}function ut(e,t,n,r){return Pe.call(this,e,t,n,r)}function lt(e){return e[1].toUpperCase()}function dt(e){return!(!e||e.nodeType!==fc&&e.nodeType!==mc&&e.nodeType!==vc&&(e.nodeType!==gc||" react-mount-point-unstable "!==e.nodeValue))}function pt(e){return!(!(e=e?e.nodeType===mc?e.documentElement:e.firstChild:null)||e.nodeType!==fc||!e.hasAttribute(yc))}function ft(e,t,n,i,o){dt(n)||r("200");var a=n._reactRootContainer;if(a)Mc.updateContainer(t,a,e,o);else{if(!i&&!pt(n))for(i=void 0;i=n.lastChild;)n.removeChild(i);var s=Mc.createContainer(n);a=n._reactRootContainer=s,Mc.unbatchedUpdates(function(){Mc.updateContainer(t,s,e,o)})}return Mc.getPublicRootInstance(a)}function ht(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;return dt(t)||r("200"),yi.createPortal(e,t,null,n)}var gt=n(0);n(6);var mt=n(17),vt=n(2),yt=n(18),bt=n(3),wt=n(5),kt=n(19),Ct=n(20),St=n(23),xt=n(24);gt||r("227");var Tt,Et,Ot={Namespaces:{html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg"},getIntrinsicNamespace:i,getChildNamespace:function(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?i(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}},_t=null,Pt={},Rt={plugins:[],eventNameDispatchConfigs:{},registrationNameModules:{},registrationNameDependencies:{},possibleRegistrationNames:null,injectEventPluginOrder:function(e){_t&&r("101"),_t=Array.prototype.slice.call(e),o()},injectEventPluginsByName:function(e){var t,n=!1;for(t in e)if(e.hasOwnProperty(t)){var i=e[t];Pt.hasOwnProperty(t)&&Pt[t]===i||(Pt[t]&&r("102",t),Pt[t]=i,n=!0)}n&&o()}},It=Rt,Dt={children:!0,dangerouslySetInnerHTML:!0,autoFocus:!0,defaultValue:!0,defaultChecked:!0,innerHTML:!0,suppressContentEditableWarning:!0,style:!0},Nt={MUST_USE_PROPERTY:1,HAS_BOOLEAN_VALUE:4,HAS_NUMERIC_VALUE:8,HAS_POSITIVE_NUMERIC_VALUE:24,HAS_OVERLOADED_BOOLEAN_VALUE:32,HAS_STRING_BOOLEAN_VALUE:64,injectDOMPropertyConfig:function(e){var t=Nt,n=e.Properties||{},i=e.DOMAttributeNamespaces||{},o=e.DOMAttributeNames||{};e=e.DOMMutationMethods||{};for(var a in n){jt.properties.hasOwnProperty(a)&&r("48",a);var c=a.toLowerCase(),u=n[a];c={attributeName:c,attributeNamespace:null,propertyName:a,mutationMethod:null,mustUseProperty:s(u,t.MUST_USE_PROPERTY),hasBooleanValue:s(u,t.HAS_BOOLEAN_VALUE),hasNumericValue:s(u,t.HAS_NUMERIC_VALUE),hasPositiveNumericValue:s(u,t.HAS_POSITIVE_NUMERIC_VALUE),hasOverloadedBooleanValue:s(u,t.HAS_OVERLOADED_BOOLEAN_VALUE),hasStringBooleanValue:s(u,t.HAS_STRING_BOOLEAN_VALUE)},1>=c.hasBooleanValue+c.hasNumericValue+c.hasOverloadedBooleanValue||r("50",a),o.hasOwnProperty(a)&&(c.attributeName=o[a]),i.hasOwnProperty(a)&&(c.attributeNamespace=i[a]),e.hasOwnProperty(a)&&(c.mutationMethod=e[a]),jt.properties[a]=c}}},jt={ID_ATTRIBUTE_NAME:"data-reactid",ROOT_ATTRIBUTE_NAME:"data-reactroot",ATTRIBUTE_NAME_START_CHAR:":A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",ATTRIBUTE_NAME_CHAR:":A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040",properties:{},shouldSetAttribute:function(e,t){if(jt.isReservedProp(e)||!("o"!==e[0]&&"O"!==e[0]||"n"!==e[1]&&"N"!==e[1]))return!1;if(null===t)return!0;switch(typeof t){case"boolean":return jt.shouldAttributeAcceptBooleanValue(e);case"undefined":case"number":case"string":case"object":return!0;default:return!1}},getPropertyInfo:function(e){return jt.properties.hasOwnProperty(e)?jt.properties[e]:null},shouldAttributeAcceptBooleanValue:function(e){if(jt.isReservedProp(e))return!0;var t=jt.getPropertyInfo(e);return t?t.hasBooleanValue||t.hasStringBooleanValue||t.hasOverloadedBooleanValue:"data-"===(e=e.toLowerCase().slice(0,5))||"aria-"===e},isReservedProp:function(e){return Dt.hasOwnProperty(e)},injection:Nt},Mt=jt,At={IndeterminateComponent:0,FunctionalComponent:1,ClassComponent:2,HostRoot:3,HostPortal:4,HostComponent:5,HostText:6,CoroutineComponent:7,CoroutineHandlerPhase:8,YieldComponent:9,Fragment:10},Lt={ELEMENT_NODE:1,TEXT_NODE:3,COMMENT_NODE:8,DOCUMENT_NODE:9,DOCUMENT_FRAGMENT_NODE:11},Ft=At.HostComponent,Ut=At.HostText,Bt=Lt.ELEMENT_NODE,Ht=Lt.COMMENT_NODE,Yt=Mt.ID_ATTRIBUTE_NAME,Wt={hasCachedChildNodes:1},Vt=Math.random().toString(36).slice(2),zt="__reactInternalInstance$"+Vt,Gt="__reactEventHandlers$"+Vt,qt={getClosestInstanceFromNode:d,getInstanceFromNode:function(e){var t=e[zt];return t?t.tag===Ft||t.tag===Ut?t:t._hostNode===e?t:null:(t=d(e),null!=t&&t._hostNode===e?t:null)},getNodeFromInstance:function(e){if(e.tag===Ft||e.tag===Ut)return e.stateNode;if(void 0===e._hostNode&&r("33"),e._hostNode)return e._hostNode;for(var t=[];!e._hostNode;)t.push(e),e._hostParent||r("34"),e=e._hostParent;for(;t.length;e=t.pop())l(e,e._hostNode);return e._hostNode},precacheChildNodes:l,precacheNode:u,uncacheNode:function(e){var t=e._hostNode;t&&(delete t[zt],e._hostNode=null)},precacheFiberNode:function(e,t){t[zt]=e},getFiberCurrentPropsFromNode:function(e){return e[Gt]||null},updateFiberProps:function(e,t){e[Gt]=t}},Jt={remove:function(e){e._reactInternalFiber=void 0},get:function(e){return e._reactInternalFiber},has:function(e){return void 0!==e._reactInternalFiber},set:function(e,t){e._reactInternalFiber=t}},$t={ReactCurrentOwner:gt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner},Kt={NoEffect:0,PerformedWork:1,Placement:2,Update:4,PlacementAndUpdate:6,Deletion:8,ContentReset:16,Callback:32,Err:64,Ref:128},Xt=At.HostComponent,Qt=At.HostRoot,Zt=At.HostPortal,en=At.HostText,tn=Kt.NoEffect,nn=Kt.Placement,rn={isFiberMounted:function(e){return 2===f(e)},isMounted:function(e){return!!(e=Jt.get(e))&&2===f(e)},findCurrentFiberUsingSlowPath:g,findCurrentHostFiber:function(e){if(!(e=g(e)))return null;for(var t=e;;){if(t.tag===Xt||t.tag===en)return t;if(t.child)t.child.return=t,t=t.child;else{if(t===e)break;for(;!t.sibling;){if(!t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}}return null},findCurrentHostFiberWithNoPortals:function(e){if(!(e=g(e)))return null;for(var t=e;;){if(t.tag===Xt||t.tag===en)return t;if(t.child&&t.tag!==Zt)t.child.return=t,t=t.child;else{if(t===e)break;for(;!t.sibling;){if(!t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}}return null}},on={_caughtError:null,_hasCaughtError:!1,_rethrowError:null,_hasRethrowError:!1,injection:{injectErrorUtils:function(e){"function"!==typeof e.invokeGuardedCallback&&r("197"),m=e.invokeGuardedCallback}},invokeGuardedCallback:function(e,t,n,r,i,o,a,s,c){m.apply(on,arguments)},invokeGuardedCallbackAndCatchFirstError:function(e,t,n,r,i,o,a,s,c){if(on.invokeGuardedCallback.apply(this,arguments),on.hasCaughtError()){var u=on.clearCaughtError();on._hasRethrowError||(on._hasRethrowError=!0,on._rethrowError=u)}},rethrowCaughtError:function(){return v.apply(on,arguments)},hasCaughtError:function(){return on._hasCaughtError},clearCaughtError:function(){if(on._hasCaughtError){var e=on._caughtError;return on._caughtError=null,on._hasCaughtError=!1,e}r("198")}},an=on,sn={isEndish:function(e){return"topMouseUp"===e||"topTouchEnd"===e||"topTouchCancel"===e},isMoveish:function(e){return"topMouseMove"===e||"topTouchMove"===e},isStartish:function(e){return"topMouseDown"===e||"topTouchStart"===e},executeDirectDispatch:function(e){var t=e._dispatchListeners,n=e._dispatchInstances;return Array.isArray(t)&&r("103"),e.currentTarget=t?sn.getNodeFromInstance(n):null,t=t?t(e):null,e.currentTarget=null,e._dispatchListeners=null,e._dispatchInstances=null,t},executeDispatchesInOrder:function(e,t){var n=e._dispatchListeners,r=e._dispatchInstances;if(Array.isArray(n))for(var i=0;i<n.length&&!e.isPropagationStopped();i++)y(e,t,n[i],r[i]);else n&&y(e,t,n,r);e._dispatchListeners=null,e._dispatchInstances=null},executeDispatchesInOrderStopAtTrue:function(e){e:{var t=e._dispatchListeners,n=e._dispatchInstances;if(Array.isArray(t)){for(var r=0;r<t.length&&!e.isPropagationStopped();r++)if(t[r](e,n[r])){t=n[r];break e}}else if(t&&t(e,n)){t=n;break e}t=null}return e._dispatchInstances=null,e._dispatchListeners=null,t},hasDispatches:function(e){return!!e._dispatchListeners},getFiberCurrentPropsFromNode:function(e){return Tt.getFiberCurrentPropsFromNode(e)},getInstanceFromNode:function(e){return Tt.getInstanceFromNode(e)},getNodeFromInstance:function(e){return Tt.getNodeFromInstance(e)},injection:{injectComponentTree:function(e){Tt=e}}},cn=sn,un=null,ln=null,dn=null,pn={injection:{injectFiberControlledHostComponent:function(e){un=e}},enqueueStateRestore:function(e){ln?dn?dn.push(e):dn=[e]:ln=e},restoreStateIfNeeded:function(){if(ln){var e=ln,t=dn;if(dn=ln=null,b(e),t)for(e=0;e<t.length;e++)b(t[e])}}},fn=!1,hn={batchedUpdates:function(e,t){if(fn)return w(C,e,t);fn=!0;try{return w(C,e,t)}finally{fn=!1,pn.restoreStateIfNeeded()}},injection:{injectStackBatchedUpdates:function(e){w=e},injectFiberBatchedUpdates:function(e){k=e}}},gn=Lt.TEXT_NODE,mn=At.HostRoot,vn=[],yn={_enabled:!0,_handleTopLevel:null,setHandleTopLevel:function(e){yn._handleTopLevel=e},setEnabled:function(e){yn._enabled=!!e},isEnabled:function(){return yn._enabled},trapBubbledEvent:function(e,t,n){return n?yt.listen(n,t,yn.dispatchEvent.bind(null,e)):null},trapCapturedEvent:function(e,t,n){return n?yt.capture(n,t,yn.dispatchEvent.bind(null,e)):null},dispatchEvent:function(e,t){if(yn._enabled){var n=S(t);if(n=qt.getClosestInstanceFromNode(n),null===n||"number"!==typeof n.tag||rn.isFiberMounted(n)||(n=null),vn.length){var r=vn.pop();r.topLevelType=e,r.nativeEvent=t,r.targetInst=n,e=r}else e={topLevelType:e,nativeEvent:t,targetInst:n,ancestors:[]};try{hn.batchedUpdates(x,e)}finally{e.topLevelType=null,e.nativeEvent=null,e.targetInst=null,e.ancestors.length=0,10>vn.length&&vn.push(e)}}}},bn=yn,wn=null,kn={injection:{injectEventPluginOrder:It.injectEventPluginOrder,injectEventPluginsByName:It.injectEventPluginsByName},getListener:function(e,t){if("number"===typeof e.tag){var n=e.stateNode;if(!n)return null;var i=cn.getFiberCurrentPropsFromNode(n);if(!i)return null;if(n=i[t],R(t,e.type,i))return null}else{if("string"===typeof(i=e._currentElement)||"number"===typeof i||!e._rootNodeID)return null;if(e=i.props,n=e[t],R(t,i.type,e))return null}return n&&"function"!==typeof n&&r("231",t,typeof n),n},extractEvents:function(e,t,n,r){for(var i,o=It.plugins,a=0;a<o.length;a++){var s=o[a];s&&(s=s.extractEvents(e,t,n,r))&&(i=T(i,s))}return i},enqueueEvents:function(e){e&&(wn=T(wn,e))},processEventQueue:function(e){var t=wn;wn=null,e?E(t,_):E(t,P),wn&&r("95"),an.rethrowCaughtError()}};mt.canUseDOM&&(Et=document.implementation&&document.implementation.hasFeature&&!0!==document.implementation.hasFeature("",""));var Cn={animationend:D("Animation","AnimationEnd"),animationiteration:D("Animation","AnimationIteration"),animationstart:D("Animation","AnimationStart"),transitionend:D("Transition","TransitionEnd")},Sn={},xn={};mt.canUseDOM&&(xn=document.createElement("div").style,"AnimationEvent"in window||(delete Cn.animationend.animation,delete Cn.animationiteration.animation,delete Cn.animationstart.animation),"TransitionEvent"in window||delete Cn.transitionend.transition);var Tn={topAbort:"abort",topAnimationEnd:N("animationend")||"animationend",topAnimationIteration:N("animationiteration")||"animationiteration",topAnimationStart:N("animationstart")||"animationstart",topBlur:"blur",topCancel:"cancel",topCanPlay:"canplay",topCanPlayThrough:"canplaythrough",topChange:"change",topClick:"click",topClose:"close",topCompositionEnd:"compositionend",topCompositionStart:"compositionstart",topCompositionUpdate:"compositionupdate",topContextMenu:"contextmenu",topCopy:"copy",topCut:"cut",topDoubleClick:"dblclick",topDrag:"drag",topDragEnd:"dragend",topDragEnter:"dragenter",topDragExit:"dragexit",topDragLeave:"dragleave",topDragOver:"dragover",topDragStart:"dragstart",topDrop:"drop",topDurationChange:"durationchange",topEmptied:"emptied",topEncrypted:"encrypted",topEnded:"ended",topError:"error",topFocus:"focus",topInput:"input",topKeyDown:"keydown",topKeyPress:"keypress",topKeyUp:"keyup",topLoadedData:"loadeddata",topLoad:"load",topLoadedMetadata:"loadedmetadata",topLoadStart:"loadstart",topMouseDown:"mousedown",topMouseMove:"mousemove",topMouseOut:"mouseout",topMouseOver:"mouseover",topMouseUp:"mouseup",topPaste:"paste",topPause:"pause",topPlay:"play",topPlaying:"playing",topProgress:"progress",topRateChange:"ratechange",topScroll:"scroll",topSeeked:"seeked",topSeeking:"seeking",topSelectionChange:"selectionchange",topStalled:"stalled",topSuspend:"suspend",topTextInput:"textInput",topTimeUpdate:"timeupdate",topToggle:"toggle",topTouchCancel:"touchcancel",topTouchEnd:"touchend",topTouchMove:"touchmove",topTouchStart:"touchstart",topTransitionEnd:N("transitionend")||"transitionend",topVolumeChange:"volumechange",topWaiting:"waiting",topWheel:"wheel"},En={},On=0,_n="_reactListenersID"+(""+Math.random()).slice(2),Pn=vt({},{handleTopLevel:function(e,t,n,r){e=kn.extractEvents(e,t,n,r),kn.enqueueEvents(e),kn.processEventQueue(!1)}},{setEnabled:function(e){bn&&bn.setEnabled(e)},isEnabled:function(){return!(!bn||!bn.isEnabled())},listenTo:function(e,t){var n=j(t);e=It.registrationNameDependencies[e];for(var r=0;r<e.length;r++){var i=e[r];n.hasOwnProperty(i)&&n[i]||("topWheel"===i?I("wheel")?bn.trapBubbledEvent("topWheel","wheel",t):I("mousewheel")?bn.trapBubbledEvent("topWheel","mousewheel",t):bn.trapBubbledEvent("topWheel","DOMMouseScroll",t):"topScroll"===i?bn.trapCapturedEvent("topScroll","scroll",t):"topFocus"===i||"topBlur"===i?(bn.trapCapturedEvent("topFocus","focus",t),bn.trapCapturedEvent("topBlur","blur",t),n.topBlur=!0,n.topFocus=!0):"topCancel"===i?(I("cancel",!0)&&bn.trapCapturedEvent("topCancel","cancel",t),n.topCancel=!0):"topClose"===i?(I("close",!0)&&bn.trapCapturedEvent("topClose","close",t),n.topClose=!0):Tn.hasOwnProperty(i)&&bn.trapBubbledEvent(i,Tn[i],t),n[i]=!0)}},isListeningToAllDependencies:function(e,t){t=j(t),e=It.registrationNameDependencies[e];for(var n=0;n<e.length;n++){var r=e[n];if(!t.hasOwnProperty(r)||!t[r])return!1}return!0},trapBubbledEvent:function(e,t,n){return bn.trapBubbledEvent(e,t,n)},trapCapturedEvent:function(e,t,n){return bn.trapCapturedEvent(e,t,n)}}),Rn={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},In=["Webkit","ms","Moz","O"];Object.keys(Rn).forEach(function(e){In.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Rn[t]=Rn[e]})});var Dn={isUnitlessNumber:Rn,shorthandPropertyExpansions:{background:{backgroundAttachment:!0,backgroundColor:!0,backgroundImage:!0,backgroundPositionX:!0,backgroundPositionY:!0,backgroundRepeat:!0},backgroundPosition:{backgroundPositionX:!0,backgroundPositionY:!0},border:{borderWidth:!0,borderStyle:!0,borderColor:!0},borderBottom:{borderBottomWidth:!0,borderBottomStyle:!0,borderBottomColor:!0},borderLeft:{borderLeftWidth:!0,borderLeftStyle:!0,borderLeftColor:!0},borderRight:{borderRightWidth:!0,borderRightStyle:!0,borderRightColor:!0},borderTop:{borderTopWidth:!0,borderTopStyle:!0,borderTopColor:!0},font:{fontStyle:!0,fontVariant:!0,fontWeight:!0,fontSize:!0,lineHeight:!0,fontFamily:!0},outline:{outlineWidth:!0,outlineStyle:!0,outlineColor:!0}}},Nn=Dn.isUnitlessNumber,jn=!1;if(mt.canUseDOM){var Mn=document.createElement("div").style;try{Mn.font=""}catch(e){jn=!0}}var An,Ln={createDangerousStringForStyles:function(){},setValueForStyles:function(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=n,o=t[n];if(i=null==o||"boolean"===typeof o||""===o?"":r||"number"!==typeof o||0===o||Nn.hasOwnProperty(i)&&Nn[i]?(""+o).trim():o+"px","float"===n&&(n="cssFloat"),r)e.setProperty(n,i);else if(i)e[n]=i;else if(r=jn&&Dn.shorthandPropertyExpansions[n])for(var a in r)e[a]="";else e[n]=""}}},Fn=new RegExp("^["+Mt.ATTRIBUTE_NAME_START_CHAR+"]["+Mt.ATTRIBUTE_NAME_CHAR+"]*$"),Un={},Bn={},Hn={setAttributeForID:function(e,t){e.setAttribute(Mt.ID_ATTRIBUTE_NAME,t)},setAttributeForRoot:function(e){e.setAttribute(Mt.ROOT_ATTRIBUTE_NAME,"")},getValueForProperty:function(){},getValueForAttribute:function(){},setValueForProperty:function(e,t,n){var r=Mt.getPropertyInfo(t);if(r&&Mt.shouldSetAttribute(t,n)){var i=r.mutationMethod;i?i(e,n):null==n||r.hasBooleanValue&&!n||r.hasNumericValue&&isNaN(n)||r.hasPositiveNumericValue&&1>n||r.hasOverloadedBooleanValue&&!1===n?Hn.deleteValueForProperty(e,t):r.mustUseProperty?e[r.propertyName]=n:(t=r.attributeName,(i=r.attributeNamespace)?e.setAttributeNS(i,t,""+n):r.hasBooleanValue||r.hasOverloadedBooleanValue&&!0===n?e.setAttribute(t,""):e.setAttribute(t,""+n))}else Hn.setValueForAttribute(e,t,Mt.shouldSetAttribute(t,n)?n:null)},setValueForAttribute:function(e,t,n){M(t)&&(null==n?e.removeAttribute(t):e.setAttribute(t,""+n))},deleteValueForAttribute:function(e,t){e.removeAttribute(t)},deleteValueForProperty:function(e,t){var n=Mt.getPropertyInfo(t);n?(t=n.mutationMethod)?t(e,void 0):n.mustUseProperty?e[n.propertyName]=!n.hasBooleanValue&&"":e.removeAttribute(n.attributeName):e.removeAttribute(t)}},Yn=Hn,Wn=$t.ReactDebugCurrentFrame,Vn={current:null,phase:null,resetCurrentFiber:function(){Wn.getCurrentStack=null,Vn.current=null,Vn.phase=null},setCurrentFiber:function(e,t){Wn.getCurrentStack=A,Vn.current=e,Vn.phase=t},getCurrentFiberOwnerName:function(){return null},getCurrentFiberStackAddendum:A},zn=Vn,Gn={getHostProps:function(e,t){var n=t.value,r=t.checked;return vt({type:void 0,step:void 0,min:void 0,max:void 0},t,{defaultChecked:void 0,defaultValue:void 0,value:null!=n?n:e._wrapperState.initialValue,checked:null!=r?r:e._wrapperState.initialChecked})},initWrapperState:function(e,t){var n=t.defaultValue;e._wrapperState={initialChecked:null!=t.checked?t.checked:t.defaultChecked,initialValue:null!=t.value?t.value:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}},updateWrapper:function(e,t){var n=t.checked;null!=n&&Yn.setValueForProperty(e,"checked",n||!1),n=t.value,null!=n?0===n&&""===e.value?e.value="0":"number"===t.type?(t=parseFloat(e.value)||0,(n!=t||n==t&&e.value!=n)&&(e.value=""+n)):e.value!==""+n&&(e.value=""+n):(null==t.value&&null!=t.defaultValue&&e.defaultValue!==""+t.defaultValue&&(e.defaultValue=""+t.defaultValue),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked))},postMountWrapper:function(e,t){switch(t.type){case"submit":case"reset":break;case"color":case"date":case"datetime":case"datetime-local":case"month":case"time":case"week":e.value="",e.value=e.defaultValue;break;default:e.value=e.value}t=e.name,""!==t&&(e.name=""),e.defaultChecked=!e.defaultChecked,e.defaultChecked=!e.defaultChecked,""!==t&&(e.name=t)},restoreControlledState:function(e,t){Gn.updateWrapper(e,t);var n=t.name;if("radio"===t.type&&null!=n){for(t=e;t.parentNode;)t=t.parentNode;for(n=t.querySelectorAll("input[name="+JSON.stringify(""+n)+'][type="radio"]'),t=0;t<n.length;t++){var i=n[t];if(i!==e&&i.form===e.form){var o=qt.getFiberCurrentPropsFromNode(i);o||r("90"),Gn.updateWrapper(i,o)}}}}},qn=Gn,Jn={validateProps:function(){},postMountWrapper:function(e,t){null!=t.value&&e.setAttribute("value",t.value)},getHostProps:function(e,t){return e=vt({children:void 0},t),(t=L(t.children))&&(e.children=t),e}},$n={getHostProps:function(e,t){return vt({},t,{value:void 0})},initWrapperState:function(e,t){var n=t.value;e._wrapperState={initialValue:null!=n?n:t.defaultValue,wasMultiple:!!t.multiple}},postMountWrapper:function(e,t){e.multiple=!!t.multiple;var n=t.value;null!=n?F(e,!!t.multiple,n):null!=t.defaultValue&&F(e,!!t.multiple,t.defaultValue)},postUpdateWrapper:function(e,t){e._wrapperState.initialValue=void 0;var n=e._wrapperState.wasMultiple;e._wrapperState.wasMultiple=!!t.multiple;var r=t.value;null!=r?F(e,!!t.multiple,r):n!==!!t.multiple&&(null!=t.defaultValue?F(e,!!t.multiple,t.defaultValue):F(e,!!t.multiple,t.multiple?[]:""))},restoreControlledState:function(e,t){var n=t.value;null!=n&&F(e,!!t.multiple,n)}},Kn={getHostProps:function(e,t){return null!=t.dangerouslySetInnerHTML&&r("91"),vt({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})},initWrapperState:function(e,t){var n=t.value,i=n;null==n&&(n=t.defaultValue,t=t.children,null!=t&&(null!=n&&r("92"),Array.isArray(t)&&(1>=t.length||r("93"),t=t[0]),n=""+t),null==n&&(n=""),i=n),e._wrapperState={initialValue:""+i}},updateWrapper:function(e,t){var n=t.value;null!=n&&(n=""+n,n!==e.value&&(e.value=n),null==t.defaultValue&&(e.defaultValue=n)),null!=t.defaultValue&&(e.defaultValue=t.defaultValue)},postMountWrapper:function(e){var t=e.textContent;t===e._wrapperState.initialValue&&(e.value=t)},restoreControlledState:function(e,t){Kn.updateWrapper(e,t)}},Xn=Kn,Qn=vt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0}),Zn={_getTrackerFromNode:function(e){return e._valueTracker},track:function(e){e._valueTracker||(e._valueTracker=H(e))},updateValueIfChanged:function(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=B(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)},stopTracking:function(e){(e=e._valueTracker)&&e.stopTracking()}},er=Ot.Namespaces,tr=function(e){return"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(t,n,r,i){MSApp.execUnsafeLocalFunction(function(){return e(t,n)})}:e}(function(e,t){if(e.namespaceURI!==er.svg||"innerHTML"in e)e.innerHTML=t;else for(An=An||document.createElement("div"),An.innerHTML="<svg>"+t+"</svg>",t=An.firstChild;t.firstChild;)e.appendChild(t.firstChild)}),nr=/["'&<>]/,rr=Lt.TEXT_NODE;mt.canUseDOM&&("textContent"in document.documentElement||(W=function(e,t){if(e.nodeType===rr)e.nodeValue=t;else{if("boolean"===typeof t||"number"===typeof t)t=""+t;else{t=""+t;var n=nr.exec(t);if(n){var r,i="",o=0;for(r=n.index;r<t.length;r++){switch(t.charCodeAt(r)){case 34:n="&quot;";break;case 38:n="&amp;";break;case 39:n="&#x27;";break;case 60:n="&lt;";break;case 62:n="&gt;";break;default:continue}o!==r&&(i+=t.substring(o,r)),o=r+1,i+=n}t=o!==r?i+t.substring(o,r):i}}tr(e,t)}}));var ir=W,or=(zn.getCurrentFiberOwnerName,Lt.DOCUMENT_NODE),ar=Lt.DOCUMENT_FRAGMENT_NODE,sr=Pn.listenTo,cr=It.registrationNameModules,ur=Ot.Namespaces.html,lr=Ot.getIntrinsicNamespace,dr={topAbort:"abort",topCanPlay:"canplay",topCanPlayThrough:"canplaythrough",topDurationChange:"durationchange",topEmptied:"emptied",topEncrypted:"encrypted",topEnded:"ended",topError:"error",topLoadedData:"loadeddata",topLoadedMetadata:"loadedmetadata",topLoadStart:"loadstart",topPause:"pause",topPlay:"play",topPlaying:"playing",topProgress:"progress",topRateChange:"ratechange",topSeeked:"seeked",topSeeking:"seeking",topStalled:"stalled",topSuspend:"suspend",topTimeUpdate:"timeupdate",topVolumeChange:"volumechange",topWaiting:"waiting"},pr={createElement:function(e,t,n,r){return n=n.nodeType===or?n:n.ownerDocument,r===ur&&(r=lr(e)),r===ur?"script"===e?(e=n.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):e="string"===typeof t.is?n.createElement(e,{is:t.is}):n.createElement(e):e=n.createElementNS(r,e),e},createTextNode:function(e,t){return(t.nodeType===or?t:t.ownerDocument).createTextNode(e)},setInitialProperties:function(e,t,n,r){var i=Y(t,n);switch(t){case"iframe":case"object":Pn.trapBubbledEvent("topLoad","load",e);var o=n;break;case"video":case"audio":for(o in dr)dr.hasOwnProperty(o)&&Pn.trapBubbledEvent(o,dr[o],e);o=n;break;case"source":Pn.trapBubbledEvent("topError","error",e),o=n;break;case"img":case"image":Pn.trapBubbledEvent("topError","error",e),Pn.trapBubbledEvent("topLoad","load",e),o=n;break;case"form":Pn.trapBubbledEvent("topReset","reset",e),Pn.trapBubbledEvent("topSubmit","submit",e),o=n;break;case"details":Pn.trapBubbledEvent("topToggle","toggle",e),o=n;break;case"input":qn.initWrapperState(e,n),o=qn.getHostProps(e,n),Pn.trapBubbledEvent("topInvalid","invalid",e),V(r,"onChange");break;case"option":Jn.validateProps(e,n),o=Jn.getHostProps(e,n);break;case"select":$n.initWrapperState(e,n),o=$n.getHostProps(e,n),Pn.trapBubbledEvent("topInvalid","invalid",e),V(r,"onChange");break;case"textarea":Xn.initWrapperState(e,n),o=Xn.getHostProps(e,n),Pn.trapBubbledEvent("topInvalid","invalid",e),V(r,"onChange");break;default:o=n}U(t,o);var a,s=o;for(a in s)if(s.hasOwnProperty(a)){var c=s[a];"style"===a?Ln.setValueForStyles(e,c):"dangerouslySetInnerHTML"===a?null!=(c=c?c.__html:void 0)&&tr(e,c):"children"===a?"string"===typeof c?ir(e,c):"number"===typeof c&&ir(e,""+c):"suppressContentEditableWarning"!==a&&(cr.hasOwnProperty(a)?null!=c&&V(r,a):i?Yn.setValueForAttribute(e,a,c):null!=c&&Yn.setValueForProperty(e,a,c))}switch(t){case"input":Zn.track(e),qn.postMountWrapper(e,n);break;case"textarea":Zn.track(e),Xn.postMountWrapper(e,n);break;case"option":Jn.postMountWrapper(e,n);break;case"select":$n.postMountWrapper(e,n);break;default:"function"===typeof o.onClick&&(e.onclick=bt)}},diffProperties:function(e,t,n,r,i){var o=null;switch(t){case"input":n=qn.getHostProps(e,n),r=qn.getHostProps(e,r),o=[];break;case"option":n=Jn.getHostProps(e,n),r=Jn.getHostProps(e,r),o=[];break;case"select":n=$n.getHostProps(e,n),r=$n.getHostProps(e,r),o=[];break;case"textarea":n=Xn.getHostProps(e,n),r=Xn.getHostProps(e,r),o=[];break;default:"function"!==typeof n.onClick&&"function"===typeof r.onClick&&(e.onclick=bt)}U(t,r);var a,s;e=null;for(a in n)if(!r.hasOwnProperty(a)&&n.hasOwnProperty(a)&&null!=n[a])if("style"===a)for(s in t=n[a])t.hasOwnProperty(s)&&(e||(e={}),e[s]="");else"dangerouslySetInnerHTML"!==a&&"children"!==a&&"suppressContentEditableWarning"!==a&&(cr.hasOwnProperty(a)?o||(o=[]):(o=o||[]).push(a,null));for(a in r){var c=r[a];if(t=null!=n?n[a]:void 0,r.hasOwnProperty(a)&&c!==t&&(null!=c||null!=t))if("style"===a)if(t){for(s in t)!t.hasOwnProperty(s)||c&&c.hasOwnProperty(s)||(e||(e={}),e[s]="");for(s in c)c.hasOwnProperty(s)&&t[s]!==c[s]&&(e||(e={}),e[s]=c[s])}else e||(o||(o=[]),o.push(a,e)),e=c;else"dangerouslySetInnerHTML"===a?(c=c?c.__html:void 0,t=t?t.__html:void 0,null!=c&&t!==c&&(o=o||[]).push(a,""+c)):"children"===a?t===c||"string"!==typeof c&&"number"!==typeof c||(o=o||[]).push(a,""+c):"suppressContentEditableWarning"!==a&&(cr.hasOwnProperty(a)?(null!=c&&V(i,a),o||t===c||(o=[])):(o=o||[]).push(a,c))}return e&&(o=o||[]).push("style",e),o},updateProperties:function(e,t,n,r,i){Y(n,r),r=Y(n,i);for(var o=0;o<t.length;o+=2){var a=t[o],s=t[o+1];"style"===a?Ln.setValueForStyles(e,s):"dangerouslySetInnerHTML"===a?tr(e,s):"children"===a?ir(e,s):r?null!=s?Yn.setValueForAttribute(e,a,s):Yn.deleteValueForAttribute(e,a):null!=s?Yn.setValueForProperty(e,a,s):Yn.deleteValueForProperty(e,a)}switch(n){case"input":qn.updateWrapper(e,i),Zn.updateValueIfChanged(e);break;case"textarea":Xn.updateWrapper(e,i);break;case"select":$n.postUpdateWrapper(e,i)}},diffHydratedProperties:function(e,t,n,r,i){switch(t){case"iframe":case"object":Pn.trapBubbledEvent("topLoad","load",e);break;case"video":case"audio":for(var o in dr)dr.hasOwnProperty(o)&&Pn.trapBubbledEvent(o,dr[o],e);break;case"source":Pn.trapBubbledEvent("topError","error",e);break;case"img":case"image":Pn.trapBubbledEvent("topError","error",e),Pn.trapBubbledEvent("topLoad","load",e);break;case"form":Pn.trapBubbledEvent("topReset","reset",e),Pn.trapBubbledEvent("topSubmit","submit",e);break;case"details":Pn.trapBubbledEvent("topToggle","toggle",e);break;case"input":qn.initWrapperState(e,n),Pn.trapBubbledEvent("topInvalid","invalid",e),V(i,"onChange");break;case"option":Jn.validateProps(e,n);break;case"select":$n.initWrapperState(e,n),Pn.trapBubbledEvent("topInvalid","invalid",e),V(i,"onChange");break;case"textarea":Xn.initWrapperState(e,n),Pn.trapBubbledEvent("topInvalid","invalid",e),V(i,"onChange")}U(t,n),r=null;for(var a in n)n.hasOwnProperty(a)&&(o=n[a],"children"===a?"string"===typeof o?e.textContent!==o&&(r=["children",o]):"number"===typeof o&&e.textContent!==""+o&&(r=["children",""+o]):cr.hasOwnProperty(a)&&null!=o&&V(i,a));switch(t){case"input":Zn.track(e),qn.postMountWrapper(e,n);break;case"textarea":Zn.track(e),Xn.postMountWrapper(e,n);break;case"select":case"option":break;default:"function"===typeof n.onClick&&(e.onclick=bt)}return r},diffHydratedText:function(e,t){return e.nodeValue!==t},warnForDeletedHydratableElement:function(){},warnForDeletedHydratableText:function(){},warnForInsertedHydratedElement:function(){},warnForInsertedHydratedText:function(){},restoreControlledState:function(e,t,n){switch(t){case"input":qn.restoreControlledState(e,n);break;case"textarea":Xn.restoreControlledState(e,n);break;case"select":$n.restoreControlledState(e,n)}}},fr=void 0;if(mt.canUseDOM)if("function"!==typeof requestIdleCallback){var hr=null,gr=null,mr=!1,vr=!1,yr=0,br=33,wr=33,kr={timeRemaining:"object"===typeof performance&&"function"===typeof performance.now?function(){return yr-performance.now()}:function(){return yr-Date.now()}},Cr="__reactIdleCallback$"+Math.random().toString(36).slice(2);window.addEventListener("message",function(e){e.source===window&&e.data===Cr&&(mr=!1,e=gr,gr=null,null!==e&&e(kr))},!1);var Sr=function(e){vr=!1;var t=e-yr+wr;t<wr&&br<wr?(8>t&&(t=8),wr=t<br?br:t):br=t,yr=e+wr,mr||(mr=!0,window.postMessage(Cr,"*")),t=hr,hr=null,null!==t&&t(e)};fr=function(e){return gr=e,vr||(vr=!0,requestAnimationFrame(Sr)),0}}else fr=requestIdleCallback;else fr=function(e){return setTimeout(function(){e({timeRemaining:function(){return 1/0}})}),0};var xr,Tr,Er={rIC:fr},Or={enableAsyncSubtreeAPI:!0},_r={NoWork:0,SynchronousPriority:1,TaskPriority:2,HighPriority:3,LowPriority:4,OffscreenPriority:5},Pr=Kt.Callback,Rr=_r.NoWork,Ir=_r.SynchronousPriority,Dr=_r.TaskPriority,Nr=At.ClassComponent,jr=At.HostRoot,Mr=void 0,Ar=void 0,Lr={addUpdate:function(e,t,n,r){$(e,{priorityLevel:r,partialState:t,callback:n,isReplace:!1,isForced:!1,isTopLevelUnmount:!1,next:null})},addReplaceUpdate:function(e,t,n,r){$(e,{priorityLevel:r,partialState:t,callback:n,isReplace:!0,isForced:!1,isTopLevelUnmount:!1,next:null})},addForceUpdate:function(e,t,n){$(e,{priorityLevel:n,partialState:null,callback:t,isReplace:!1,isForced:!0,isTopLevelUnmount:!1,next:null})},getUpdatePriority:function(e){var t=e.updateQueue;return null===t||e.tag!==Nr&&e.tag!==jr?Rr:null!==t.first?t.first.priorityLevel:Rr},addTopLevelUpdate:function(e,t,n,r){var i=null===t.element;t={priorityLevel:r,partialState:t,callback:n,isReplace:!1,isForced:!1,isTopLevelUnmount:i,next:null},e=$(e,t),i&&(i=Mr,n=Ar,null!==i&&null!==t.next&&(t.next=null,i.last=t),null!==n&&null!==e&&null!==e.next&&(e.next=null,n.last=t))},beginUpdateQueue:function(e,t,n,r,i,o,a){null!==e&&e.updateQueue===n&&(n=t.updateQueue={first:n.first,last:n.last,callbackList:null,hasForceUpdate:!1}),e=n.callbackList;for(var s=n.hasForceUpdate,c=!0,u=n.first;null!==u&&0>=z(u.priorityLevel,a);){n.first=u.next,null===n.first&&(n.last=null);var l;u.isReplace?(i=K(u,r,i,o),c=!0):(l=K(u,r,i,o))&&(i=c?vt({},i,l):vt(i,l),c=!1),u.isForced&&(s=!0),null===u.callback||u.isTopLevelUnmount&&null!==u.next||(e=null!==e?e:[],e.push(u.callback),t.effectTag|=Pr),u=u.next}return n.callbackList=e,n.hasForceUpdate=s,null!==n.first||null!==e||s||(t.updateQueue=null),i},commitCallbacks:function(e,t,n){if(null!==(e=t.callbackList))for(t.callbackList=null,t=0;t<e.length;t++){var i=e[t];"function"!==typeof i&&r("191",i),i.call(n)}}},Fr=[],Ur=-1,Br={createCursor:function(e){return{current:e}},isEmpty:function(){return-1===Ur},pop:function(e){0>Ur||(e.current=Fr[Ur],Fr[Ur]=null,Ur--)},push:function(e,t){Ur++,Fr[Ur]=e.current,e.current=t},reset:function(){for(;-1<Ur;)Fr[Ur]=null,Ur--}},Hr=rn.isFiberMounted,Yr=At.ClassComponent,Wr=At.HostRoot,Vr=Br.createCursor,zr=Br.pop,Gr=Br.push,qr=Vr(wt),Jr=Vr(!1),$r=wt,Kr={getUnmaskedContext:function(e){return Q(e)?$r:qr.current},cacheContext:X,getMaskedContext:function(e,t){var n=e.type.contextTypes;if(!n)return wt;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,o={};for(i in n)o[i]=t[i];return r&&X(e,t,o),o},hasContextChanged:function(){return Jr.current},isContextConsumer:function(e){return e.tag===Yr&&null!=e.type.contextTypes},isContextProvider:Q,popContextProvider:function(e){Q(e)&&(zr(Jr,e),zr(qr,e))},popTopLevelContextObject:function(e){zr(Jr,e),zr(qr,e)},pushTopLevelContextObject:function(e,t,n){null!=qr.cursor&&r("168"),Gr(qr,t,e),Gr(Jr,n,e)},processChildContext:Z,pushContextProvider:function(e){if(!Q(e))return!1;var t=e.stateNode;return t=t&&t.__reactInternalMemoizedMergedChildContext||wt,$r=qr.current,Gr(qr,t,e),Gr(Jr,Jr.current,e),!0},invalidateContextProvider:function(e,t){var n=e.stateNode;if(n||r("169"),t){var i=Z(e,$r);n.__reactInternalMemoizedMergedChildContext=i,zr(Jr,e),zr(qr,e),Gr(qr,i,e)}else zr(Jr,e);Gr(Jr,t,e)},resetContext:function(){$r=wt,qr.current=wt,Jr.current=!1},findCurrentUnmaskedContext:function(e){for(Hr(e)&&e.tag===Yr?void 0:r("170");e.tag!==Wr;){if(Q(e))return e.stateNode.__reactInternalMemoizedMergedChildContext;(e=e.return)||r("171")}return e.stateNode.context}},Xr={NoContext:0,AsyncUpdates:1},Qr=At.IndeterminateComponent,Zr=At.ClassComponent,ei=At.HostRoot,ti=At.HostComponent,ni=At.HostText,ri=At.HostPortal,ii=At.CoroutineComponent,oi=At.YieldComponent,ai=At.Fragment,si=_r.NoWork,ci=Xr.NoContext,ui=Kt.NoEffect,li={createWorkInProgress:function(e,t){var n=e.alternate;return null===n?(n=new ee(e.tag,e.key,e.internalContextTag),n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.effectTag=ui,n.nextEffect=null,n.firstEffect=null,n.lastEffect=null),n.pendingWorkPriority=t,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n},createHostRootFiber:function(){return new ee(ei,null,ci)},createFiberFromElement:function(e,t,n){return t=te(e.type,e.key,t),t.pendingProps=e.props,t.pendingWorkPriority=n,t},createFiberFromFragment:function(e,t,n){return t=new ee(ai,null,t),t.pendingProps=e,t.pendingWorkPriority=n,t},createFiberFromText:function(e,t,n){return t=new ee(ni,null,t),t.pendingProps=e,t.pendingWorkPriority=n,t},createFiberFromElementType:te,createFiberFromHostInstanceForDeletion:function(){var e=new ee(ti,null,ci);return e.type="DELETED",e},createFiberFromCoroutine:function(e,t,n){return t=new ee(ii,e.key,t),t.type=e.handler,t.pendingProps=e,t.pendingWorkPriority=n,t},createFiberFromYield:function(e,t){return new ee(oi,null,t)},createFiberFromPortal:function(e,t,n){return t=new ee(ri,e.key,t),t.pendingProps=e.children||[],t.pendingWorkPriority=n,t.stateNode={containerInfo:e.containerInfo,implementation:e.implementation},t},largerPriority:function(e,t){return e!==si&&(t===si||t>e)?e:t}},di=li.createHostRootFiber,pi=At.IndeterminateComponent,fi=At.FunctionalComponent,hi=At.ClassComponent,gi=At.HostComponent;"function"===typeof Symbol&&Symbol.for?(xr=Symbol.for("react.coroutine"),Tr=Symbol.for("react.yield")):(xr=60104,Tr=60105);var mi={createCoroutine:function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:xr,key:null==r?null:""+r,children:e,handler:t,props:n}},createYield:function(e){return{$$typeof:Tr,value:e}},isCoroutine:function(e){return"object"===typeof e&&null!==e&&e.$$typeof===xr},isYield:function(e){return"object"===typeof e&&null!==e&&e.$$typeof===Tr},REACT_YIELD_TYPE:Tr,REACT_COROUTINE_TYPE:xr},vi="function"===typeof Symbol&&Symbol.for&&Symbol.for("react.portal")||60106,yi={createPortal:function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:vi,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}},isPortal:function(e){return"object"===typeof e&&null!==e&&e.$$typeof===vi},REACT_PORTAL_TYPE:vi},bi=mi.REACT_COROUTINE_TYPE,wi=mi.REACT_YIELD_TYPE,ki=yi.REACT_PORTAL_TYPE,Ci=li.createWorkInProgress,Si=li.createFiberFromElement,xi=li.createFiberFromFragment,Ti=li.createFiberFromText,Ei=li.createFiberFromCoroutine,Oi=li.createFiberFromYield,_i=li.createFiberFromPortal,Pi=Array.isArray,Ri=At.FunctionalComponent,Ii=At.ClassComponent,Di=At.HostText,Ni=At.HostPortal,ji=At.CoroutineComponent,Mi=At.YieldComponent,Ai=At.Fragment,Li=Kt.NoEffect,Fi=Kt.Placement,Ui=Kt.Deletion,Bi="function"===typeof Symbol&&Symbol.iterator,Hi="function"===typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,Yi=oe(!0,!0),Wi=oe(!1,!0),Vi=oe(!1,!1),zi={reconcileChildFibers:Yi,reconcileChildFibersInPlace:Wi,mountChildFibersInPlace:Vi,cloneChildFibers:function(e,t){if(null!==e&&t.child!==e.child&&r("153"),null!==t.child){e=t.child;var n=Ci(e,e.pendingWorkPriority);for(n.pendingProps=e.pendingProps,t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,n=n.sibling=Ci(e,e.pendingWorkPriority),n.pendingProps=e.pendingProps,n.return=t;n.sibling=null}}},Gi=Kt.Update,qi=Xr.AsyncUpdates,Ji=Kr.cacheContext,$i=Kr.getMaskedContext,Ki=Kr.getUnmaskedContext,Xi=Kr.isContextConsumer,Qi=Lr.addUpdate,Zi=Lr.addReplaceUpdate,eo=Lr.addForceUpdate,to=Lr.beginUpdateQueue,no=Kr.hasContextChanged,ro=rn.isMounted,io=zi.mountChildFibersInPlace,oo=zi.reconcileChildFibers,ao=zi.reconcileChildFibersInPlace,so=zi.cloneChildFibers,co=Lr.beginUpdateQueue,uo=Kr.getMaskedContext,lo=Kr.getUnmaskedContext,po=Kr.hasContextChanged,fo=Kr.pushContextProvider,ho=Kr.pushTopLevelContextObject,go=Kr.invalidateContextProvider,mo=At.IndeterminateComponent,vo=At.FunctionalComponent,yo=At.ClassComponent,bo=At.HostRoot,wo=At.HostComponent,ko=At.HostText,Co=At.HostPortal,So=At.CoroutineComponent,xo=At.CoroutineHandlerPhase,To=At.YieldComponent,Eo=At.Fragment,Oo=_r.NoWork,_o=_r.OffscreenPriority,Po=Kt.PerformedWork,Ro=Kt.Placement,Io=Kt.ContentReset,Do=Kt.Err,No=Kt.Ref,jo=$t.ReactCurrentOwner,Mo=zi.reconcileChildFibers,Ao=Kr.popContextProvider,Lo=Kr.popTopLevelContextObject,Fo=At.IndeterminateComponent,Uo=At.FunctionalComponent,Bo=At.ClassComponent,Ho=At.HostRoot,Yo=At.HostComponent,Wo=At.HostText,Vo=At.HostPortal,zo=At.CoroutineComponent,Go=At.CoroutineHandlerPhase,qo=At.YieldComponent,Jo=At.Fragment,$o=Kt.Placement,Ko=Kt.Ref,Xo=Kt.Update,Qo=_r.OffscreenPriority,Zo=null,ea=null,ta={injectInternals:function(e){if("undefined"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__)return!1;var t=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!t.supportsFiber)return!0;try{var n=t.inject(e);Zo=ue(function(e){return t.onCommitFiberRoot(n,e)}),ea=ue(function(e){return t.onCommitFiberUnmount(n,e)})}catch(e){}return!0},onCommitRoot:function(e){"function"===typeof Zo&&Zo(e)},onCommitUnmount:function(e){"function"===typeof ea&&ea(e)}},na=At.ClassComponent,ra=At.HostRoot,ia=At.HostComponent,oa=At.HostText,aa=At.HostPortal,sa=At.CoroutineComponent,ca=Lr.commitCallbacks,ua=ta.onCommitUnmount,la=Kt.Placement,da=Kt.Update,pa=Kt.Callback,fa=Kt.ContentReset,ha=Br.createCursor,ga=Br.pop,ma=Br.push,va={},ya=At.HostComponent,ba=At.HostText,wa=At.HostRoot,ka=Kt.Deletion,Ca=Kt.Placement,Sa=li.createFiberFromHostInstanceForDeletion,xa=Kr.popContextProvider,Ta=Br.reset,Ea=$t.ReactCurrentOwner,Oa=li.createWorkInProgress,_a=li.largerPriority,Pa=ta.onCommitRoot,Ra=_r.NoWork,Ia=_r.SynchronousPriority,Da=_r.TaskPriority,Na=_r.HighPriority,ja=_r.LowPriority,Ma=_r.OffscreenPriority,Aa=Xr.AsyncUpdates,La=Kt.PerformedWork,Fa=Kt.Placement,Ua=Kt.Update,Ba=Kt.PlacementAndUpdate,Ha=Kt.Deletion,Ya=Kt.ContentReset,Wa=Kt.Callback,Va=Kt.Err,za=Kt.Ref,Ga=At.HostRoot,qa=At.HostComponent,Ja=At.HostPortal,$a=At.ClassComponent,Ka=Lr.getUpdatePriority,Xa=Kr.resetContext;ge._injectFiber=function(e){he=e};var Qa=Lr.addTopLevelUpdate,Za=Kr.findCurrentUnmaskedContext,es=Kr.isContextProvider,ts=Kr.processChildContext,ns=At.HostComponent,rs=rn.findCurrentHostFiber,is=rn.findCurrentHostFiberWithNoPortals;ge._injectFiber(function(e){var t=Za(e);return es(e)?ts(e,t,!1):t});var os=Lt.TEXT_NODE,as=null,ss={getOffsets:function(e){var t=window.getSelection&&window.getSelection();if(!t||0===t.rangeCount)return null;var n=t.anchorNode,r=t.anchorOffset,i=t.focusNode,o=t.focusOffset,a=t.getRangeAt(0);try{a.startContainer.nodeType,a.endContainer.nodeType}catch(e){return null}t=t.anchorNode===t.focusNode&&t.anchorOffset===t.focusOffset?0:a.toString().length;var s=a.cloneRange();return s.selectNodeContents(e),s.setEnd(a.startContainer,a.startOffset),e=s.startContainer===s.endContainer&&s.startOffset===s.endOffset?0:s.toString().length,a=e+t,t=document.createRange(),t.setStart(n,r),t.setEnd(i,o),n=t.collapsed,{start:n?a:e,end:n?e:a}},setOffsets:function(e,t){if(window.getSelection){var n=window.getSelection(),r=e[ye()].length,i=Math.min(t.start,r);if(t=void 0===t.end?i:Math.min(t.end,r),!n.extend&&i>t&&(r=t,t=i,i=r),r=ve(e,i),e=ve(e,t),r&&e){var o=document.createRange();o.setStart(r.node,r.offset),n.removeAllRanges(),i>t?(n.addRange(o),n.extend(e.node,e.offset)):(o.setEnd(e.node,e.offset),n.addRange(o))}}}},cs=Lt.ELEMENT_NODE,us={hasSelectionCapabilities:function(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&"text"===e.type||"textarea"===t||"true"===e.contentEditable)},getSelectionInformation:function(){var e=xt();return{focusedElem:e,selectionRange:us.hasSelectionCapabilities(e)?us.getSelection(e):null}},restoreSelection:function(e){var t=xt(),n=e.focusedElem;if(e=e.selectionRange,t!==n&&Ct(document.documentElement,n)){for(us.hasSelectionCapabilities(n)&&us.setSelection(n,e),t=[],e=n;e=e.parentNode;)e.nodeType===cs&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(St(n),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}},getSelection:function(e){return("selectionStart"in e?{start:e.selectionStart,end:e.selectionEnd}:ss.getOffsets(e))||{start:0,end:0}},setSelection:function(e,t){var n=t.start,r=t.end;void 0===r&&(r=n),"selectionStart"in e?(e.selectionStart=n,e.selectionEnd=Math.min(r,e.value.length)):ss.setOffsets(e,t)}},ls=us,ds=Lt.ELEMENT_NODE;ke._injectFiber=function(e){be=e},ke._injectStack=function(e){we=e};var ps=At.HostComponent,fs={isAncestor:function(e,t){for(;t;){if(e===t||e===t.alternate)return!0;t=Ce(t)}return!1},getLowestCommonAncestor:Se,getParentInstance:function(e){return Ce(e)},traverseTwoPhase:function(e,t,n){for(var r=[];e;)r.push(e),e=Ce(e);for(e=r.length;0<e--;)t(r[e],"captured",n);for(e=0;e<r.length;e++)t(r[e],"bubbled",n)},traverseEnterLeave:function(e,t,n,r,i){for(var o=e&&t?Se(e,t):null,a=[];e&&e!==o;)a.push(e),e=Ce(e);for(e=[];t&&t!==o;)e.push(t),t=Ce(t);for(t=0;t<a.length;t++)n(a[t],"bubbled",r);for(t=e.length;0<t--;)n(e[t],"captured",i)}},hs=kn.getListener,gs={accumulateTwoPhaseDispatches:function(e){E(e,Te)},accumulateTwoPhaseDispatchesSkipTarget:function(e){E(e,Ee)},accumulateDirectDispatches:function(e){E(e,_e)},accumulateEnterLeaveDispatches:function(e,t,n,r){fs.traverseEnterLeave(n,r,Oe,e,t)}},ms={_root:null,_startText:null,_fallbackText:null},vs={initialize:function(e){return ms._root=e,ms._startText=vs.getText(),!0},reset:function(){ms._root=null,ms._startText=null,ms._fallbackText=null},getData:function(){if(ms._fallbackText)return ms._fallbackText;var e,t,n=ms._startText,r=n.length,i=vs.getText(),o=i.length;for(e=0;e<r&&n[e]===i[e];e++);var a=r-e;for(t=1;t<=a&&n[r-t]===i[o-t];t++);return ms._fallbackText=i.slice(e,1<t?1-t:void 0),ms._fallbackText},getText:function(){return"value"in ms._root?ms._root.value:ms._root[ye()]}},ys=vs,bs="dispatchConfig _targetInst nativeEvent isDefaultPrevented isPropagationStopped _dispatchListeners _dispatchInstances".split(" "),ws={type:null,target:null,currentTarget:bt.thatReturnsNull,eventPhase:null,bubbles:null,cancelable:null,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:null,isTrusted:null};vt(Pe.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=bt.thatReturnsTrue)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=bt.thatReturnsTrue)},persist:function(){this.isPersistent=bt.thatReturnsTrue},isPersistent:bt.thatReturnsFalse,destructor:function(){var e,t=this.constructor.Interface;for(e in t)this[e]=null;for(t=0;t<bs.length;t++)this[bs[t]]=null}}),Pe.Interface=ws,Pe.augmentClass=function(e,t){function n(){}n.prototype=this.prototype;var r=new n;vt(r,e.prototype),e.prototype=r,e.prototype.constructor=e,e.Interface=vt({},this.Interface,t),e.augmentClass=this.augmentClass,De(e)},De(Pe),Pe.augmentClass(Ne,{data:null}),Pe.augmentClass(je,{data:null});var ks=[9,13,27,32],Cs=mt.canUseDOM&&"CompositionEvent"in window,Ss=null;mt.canUseDOM&&"documentMode"in document&&(Ss=document.documentMode);var xs;if(xs=mt.canUseDOM&&"TextEvent"in window&&!Ss){var Ts=window.opera;xs=!("object"===typeof Ts&&"function"===typeof Ts.version&&12>=parseInt(Ts.version(),10))}var Es=xs,Os=mt.canUseDOM&&(!Cs||Ss&&8<Ss&&11>=Ss),_s=String.fromCharCode(32),Ps={beforeInput:{phasedRegistrationNames:{bubbled:"onBeforeInput",captured:"onBeforeInputCapture"},dependencies:["topCompositionEnd","topKeyPress","topTextInput","topPaste"]},compositionEnd:{phasedRegistrationNames:{bubbled:"onCompositionEnd",captured:"onCompositionEndCapture"},dependencies:"topBlur topCompositionEnd topKeyDown topKeyPress topKeyUp topMouseDown".split(" ")},compositionStart:{phasedRegistrationNames:{bubbled:"onCompositionStart",captured:"onCompositionStartCapture"},dependencies:"topBlur topCompositionStart topKeyDown topKeyPress topKeyUp topMouseDown".split(" ")},compositionUpdate:{phasedRegistrationNames:{bubbled:"onCompositionUpdate",captured:"onCompositionUpdateCapture"},dependencies:"topBlur topCompositionUpdate topKeyDown topKeyPress topKeyUp topMouseDown".split(" ")}},Rs=!1,Is=!1,Ds={eventTypes:Ps,extractEvents:function(e,t,n,r){var i;if(Cs)e:{switch(e){case"topCompositionStart":var o=Ps.compositionStart;break e;case"topCompositionEnd":o=Ps.compositionEnd;break e;case"topCompositionUpdate":o=Ps.compositionUpdate;break e}o=void 0}else Is?Me(e,n)&&(o=Ps.compositionEnd):"topKeyDown"===e&&229===n.keyCode&&(o=Ps.compositionStart);return o?(Os&&(Is||o!==Ps.compositionStart?o===Ps.compositionEnd&&Is&&(i=ys.getData()):Is=ys.initialize(r)),o=Ne.getPooled(o,t,n,r),i?o.data=i:null!==(i=Ae(n))&&(o.data=i),gs.accumulateTwoPhaseDispatches(o),i=o):i=null,(e=Es?Le(e,n):Fe(e,n))?(t=je.getPooled(Ps.beforeInput,t,n,r),t.data=e,gs.accumulateTwoPhaseDispatches(t)):t=null,[i,t]}},Ns={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0},js={change:{phasedRegistrationNames:{bubbled:"onChange",captured:"onChangeCapture"},dependencies:"topBlur topChange topClick topFocus topInput topKeyDown topKeyUp topSelectionChange".split(" ")}},Ms=null,As=null,Ls=!1;mt.canUseDOM&&(Ls=I("input")&&(!document.documentMode||9<document.documentMode));var Fs={eventTypes:js,_isInputEventSupported:Ls,extractEvents:function(e,t,n,r){var i=t?qt.getNodeFromInstance(t):window,o=i.nodeName&&i.nodeName.toLowerCase();if("select"===o||"input"===o&&"file"===i.type)var a=We;else if(Ue(i))if(Ls)a=$e;else{a=qe;var s=Ge}else!(o=i.nodeName)||"input"!==o.toLowerCase()||"checkbox"!==i.type&&"radio"!==i.type||(a=Je);if(a&&(a=a(e,t)))return Be(a,n,r);s&&s(e,i,t),"topBlur"===e&&null!=t&&(e=t._wrapperState||i._wrapperState)&&e.controlled&&"number"===i.type&&(e=""+i.value,i.getAttribute("value")!==e&&i.setAttribute("value",e))}};Pe.augmentClass(Ke,{view:function(e){return e.view?e.view:(e=S(e),e.window===e?e:(e=e.ownerDocument)?e.defaultView||e.parentWindow:window)},detail:function(e){return e.detail||0}});var Us={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};Ke.augmentClass(Ze,{screenX:null,screenY:null,clientX:null,clientY:null,pageX:null,pageY:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,getModifierState:Qe,button:null,buttons:null,relatedTarget:function(e){return e.relatedTarget||(e.fromElement===e.srcElement?e.toElement:e.fromElement)}});var Bs={mouseEnter:{registrationName:"onMouseEnter",dependencies:["topMouseOut","topMouseOver"]},mouseLeave:{registrationName:"onMouseLeave",dependencies:["topMouseOut","topMouseOver"]}},Hs={eventTypes:Bs,extractEvents:function(e,t,n,r){if("topMouseOver"===e&&(n.relatedTarget||n.fromElement)||"topMouseOut"!==e&&"topMouseOver"!==e)return null;var i=r.window===r?r:(i=r.ownerDocument)?i.defaultView||i.parentWindow:window;if("topMouseOut"===e?(e=t,t=(t=n.relatedTarget||n.toElement)?qt.getClosestInstanceFromNode(t):null):e=null,e===t)return null;var o=null==e?i:qt.getNodeFromInstance(e);i=null==t?i:qt.getNodeFromInstance(t);var a=Ze.getPooled(Bs.mouseLeave,e,n,r);return a.type="mouseleave",a.target=o,a.relatedTarget=i,n=Ze.getPooled(Bs.mouseEnter,t,n,r),n.type="mouseenter",n.target=i,n.relatedTarget=o,gs.accumulateEnterLeaveDispatches(a,n,e,t),[a,n]}},Ys=Lt.DOCUMENT_NODE,Ws=mt.canUseDOM&&"documentMode"in document&&11>=document.documentMode,Vs={select:{phasedRegistrationNames:{bubbled:"onSelect",captured:"onSelectCapture"},dependencies:"topBlur topContextMenu topFocus topKeyDown topKeyUp topMouseDown topMouseUp topSelectionChange".split(" ")}},zs=null,Gs=null,qs=null,Js=!1,$s=Pn.isListeningToAllDependencies,Ks={eventTypes:Vs,extractEvents:function(e,t,n,r){var i=r.window===r?r.document:r.nodeType===Ys?r:r.ownerDocument;if(!i||!$s("onSelect",i))return null;switch(i=t?qt.getNodeFromInstance(t):window,e){case"topFocus":(Ue(i)||"true"===i.contentEditable)&&(zs=i,Gs=t,qs=null);break;case"topBlur":qs=Gs=zs=null;break;case"topMouseDown":Js=!0;break;case"topContextMenu":case"topMouseUp":return Js=!1,et(n,r);case"topSelectionChange":if(Ws)break;case"topKeyDown":case"topKeyUp":return et(n,r)}return null}};Pe.augmentClass(tt,{animationName:null,elapsedTime:null,pseudoElement:null}),Pe.augmentClass(nt,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Ke.augmentClass(rt,{relatedTarget:null});var Xs={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Qs={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"};Ke.augmentClass(ot,{key:function(e){if(e.key){var t=Xs[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?(e=it(e),13===e?"Enter":String.fromCharCode(e)):"keydown"===e.type||"keyup"===e.type?Qs[e.keyCode]||"Unidentified":""},location:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,repeat:null,locale:null,getModifierState:Qe,charCode:function(e){return"keypress"===e.type?it(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?it(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Ze.augmentClass(at,{dataTransfer:null}),Ke.augmentClass(st,{touches:null,targetTouches:null,changedTouches:null,altKey:null,metaKey:null,ctrlKey:null,shiftKey:null,getModifierState:Qe}),Pe.augmentClass(ct,{propertyName:null,elapsedTime:null,pseudoElement:null}),Ze.augmentClass(ut,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:null,deltaMode:null});var Zs={},ec={};"abort animationEnd animationIteration animationStart blur cancel canPlay canPlayThrough click close contextMenu copy cut doubleClick drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error focus input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing progress rateChange reset scroll seeked seeking stalled submit suspend timeUpdate toggle touchCancel touchEnd touchMove touchStart transitionEnd volumeChange waiting wheel".split(" ").forEach(function(e){var t=e[0].toUpperCase()+e.slice(1),n="on"+t;t="top"+t,n={phasedRegistrationNames:{bubbled:n,captured:n+"Capture"},dependencies:[t]},Zs[e]=n,ec[t]=n});var tc={eventTypes:Zs,extractEvents:function(e,t,n,i){var o=ec[e];if(!o)return null;switch(e){case"topAbort":case"topCancel":case"topCanPlay":case"topCanPlayThrough":case"topClose":case"topDurationChange":case"topEmptied":case"topEncrypted":case"topEnded":case"topError":case"topInput":case"topInvalid":case"topLoad":case"topLoadedData":case"topLoadedMetadata":case"topLoadStart":case"topPause":case"topPlay":case"topPlaying":case"topProgress":case"topRateChange":case"topReset":case"topSeeked":case"topSeeking":case"topStalled":case"topSubmit":case"topSuspend":case"topTimeUpdate":case"topToggle":case"topVolumeChange":case"topWaiting":var a=Pe;break;case"topKeyPress":if(0===it(n))return null;case"topKeyDown":case"topKeyUp":a=ot;break;case"topBlur":case"topFocus":a=rt;break;case"topClick":if(2===n.button)return null;case"topDoubleClick":case"topMouseDown":case"topMouseMove":case"topMouseUp":case"topMouseOut":case"topMouseOver":case"topContextMenu":a=Ze;break;case"topDrag":case"topDragEnd":case"topDragEnter":case"topDragExit":case"topDragLeave":case"topDragOver":case"topDragStart":case"topDrop":a=at;break;case"topTouchCancel":case"topTouchEnd":case"topTouchMove":case"topTouchStart":a=st;break;case"topAnimationEnd":case"topAnimationIteration":case"topAnimationStart":a=tt;break;case"topTransitionEnd":a=ct;break;case"topScroll":a=Ke;break;case"topWheel":a=ut;break;case"topCopy":case"topCut":case"topPaste":a=nt}return a||r("86",e),e=a.getPooled(o,t,n,i),gs.accumulateTwoPhaseDispatches(e),e}};bn.setHandleTopLevel(Pn.handleTopLevel),kn.injection.injectEventPluginOrder("ResponderEventPlugin SimpleEventPlugin TapEventPlugin EnterLeaveEventPlugin ChangeEventPlugin SelectEventPlugin BeforeInputEventPlugin".split(" ")),cn.injection.injectComponentTree(qt),kn.injection.injectEventPluginsByName({SimpleEventPlugin:tc,EnterLeaveEventPlugin:Hs,ChangeEventPlugin:Fs,SelectEventPlugin:Ks,BeforeInputEventPlugin:Ds});var nc=Mt.injection.MUST_USE_PROPERTY,rc=Mt.injection.HAS_BOOLEAN_VALUE,ic=Mt.injection.HAS_NUMERIC_VALUE,oc=Mt.injection.HAS_POSITIVE_NUMERIC_VALUE,ac=Mt.injection.HAS_STRING_BOOLEAN_VALUE,sc={Properties:{allowFullScreen:rc,allowTransparency:ac,async:rc,autoPlay:rc,capture:rc,checked:nc|rc,cols:oc,contentEditable:ac,controls:rc,default:rc,defer:rc,disabled:rc,download:Mt.injection.HAS_OVERLOADED_BOOLEAN_VALUE,draggable:ac,formNoValidate:rc,hidden:rc,loop:rc,multiple:nc|rc,muted:nc|rc,noValidate:rc,open:rc,playsInline:rc,readOnly:rc,required:rc,reversed:rc,rows:oc,rowSpan:ic,scoped:rc,seamless:rc,selected:nc|rc,size:oc,start:ic,span:oc,spellCheck:ac,style:0,itemScope:rc,acceptCharset:0,className:0,htmlFor:0,httpEquiv:0,value:ac},DOMAttributeNames:{acceptCharset:"accept-charset",className:"class",htmlFor:"for",httpEquiv:"http-equiv"},DOMMutationMethods:{value:function(e,t){if(null==t)return e.removeAttribute("value");"number"!==e.type||!1===e.hasAttribute("value")?e.setAttribute("value",""+t):e.validity&&!e.validity.badInput&&e.ownerDocument.activeElement!==e&&e.setAttribute("value",""+t)}}},cc=Mt.injection.HAS_STRING_BOOLEAN_VALUE,uc={xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace"},lc={Properties:{autoReverse:cc,externalResourcesRequired:cc,preserveAlpha:cc},DOMAttributeNames:{autoReverse:"autoReverse",externalResourcesRequired:"externalResourcesRequired",preserveAlpha:"preserveAlpha"},DOMAttributeNamespaces:{xlinkActuate:uc.xlink,xlinkArcrole:uc.xlink,xlinkHref:uc.xlink,xlinkRole:uc.xlink,xlinkShow:uc.xlink,xlinkTitle:uc.xlink,xlinkType:uc.xlink,xmlBase:uc.xml,xmlLang:uc.xml,xmlSpace:uc.xml}},dc=/[\-\:]([a-z])/g;"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode x-height xlink:actuate xlink:arcrole xlink:href xlink:role xlink:show xlink:title xlink:type xml:base xmlns:xlink xml:lang xml:space".split(" ").forEach(function(e){var t=e.replace(dc,lt);lc.Properties[t]=0,lc.DOMAttributeNames[t]=e}),Mt.injection.injectDOMPropertyConfig(sc),Mt.injection.injectDOMPropertyConfig(lc);var pc=ta.injectInternals,fc=Lt.ELEMENT_NODE,hc=Lt.TEXT_NODE,gc=Lt.COMMENT_NODE,mc=Lt.DOCUMENT_NODE,vc=Lt.DOCUMENT_FRAGMENT_NODE,yc=Mt.ROOT_ATTRIBUTE_NAME,bc=Ot.getChildNamespace,wc=pr.createElement,kc=pr.createTextNode,Cc=pr.setInitialProperties,Sc=pr.diffProperties,xc=pr.updateProperties,Tc=pr.diffHydratedProperties,Ec=pr.diffHydratedText,Oc=pr.warnForDeletedHydratableElement,_c=pr.warnForDeletedHydratableText,Pc=pr.warnForInsertedHydratedElement,Rc=pr.warnForInsertedHydratedText,Ic=qt.precacheFiberNode,Dc=qt.updateFiberProps;pn.injection.injectFiberControlledHostComponent(pr),ke._injectFiber(function(e){return Mc.findHostInstance(e)});var Nc=null,jc=null,Mc=function(e){var t=e.getPublicInstance;e=fe(e);var n=e.scheduleUpdate,r=e.getPriorityContext;return{createContainer:function(e){var t=di();return e={current:t,containerInfo:e,isScheduled:!1,nextScheduledRoot:null,context:null,pendingContext:null},t.stateNode=e},updateContainer:function(e,t,i,o){var a=t.current;i=ge(i),null===t.context?t.context=i:t.pendingContext=i,t=o,o=r(a,Or.enableAsyncSubtreeAPI&&null!=e&&null!=e.type&&null!=e.type.prototype&&!0===e.type.prototype.unstable_isAsyncReactComponent),e={element:e},Qa(a,e,void 0===t?null:t,o),n(a,o)},batchedUpdates:e.batchedUpdates,unbatchedUpdates:e.unbatchedUpdates,deferredUpdates:e.deferredUpdates,flushSync:e.flushSync,getPublicRootInstance:function(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case ns:return t(e.child.stateNode);default:return e.child.stateNode}},findHostInstance:function(e){return e=rs(e),null===e?null:e.stateNode},findHostInstanceWithNoPortals:function(e){return e=is(e),null===e?null:e.stateNode}}}({getRootHostContext:function(e){if(e.nodeType===mc)e=(e=e.documentElement)?e.namespaceURI:bc(null,"");else{var t=e.nodeType===gc?e.parentNode:e;e=t.namespaceURI||null,t=t.tagName,e=bc(e,t)}return e},getChildHostContext:function(e,t){return bc(e,t)},getPublicInstance:function(e){return e},prepareForCommit:function(){Nc=Pn.isEnabled(),jc=ls.getSelectionInformation(),Pn.setEnabled(!1)},resetAfterCommit:function(){ls.restoreSelection(jc),jc=null,Pn.setEnabled(Nc),Nc=null},createInstance:function(e,t,n,r,i){return e=wc(e,t,n,r),Ic(i,e),Dc(e,t),e},appendInitialChild:function(e,t){e.appendChild(t)},finalizeInitialChildren:function(e,t,n,r){Cc(e,t,n,r);e:{switch(t){case"button":case"input":case"select":case"textarea":e=!!n.autoFocus;break e}e=!1}return e},prepareUpdate:function(e,t,n,r,i){return Sc(e,t,n,r,i)},commitMount:function(e){e.focus()},commitUpdate:function(e,t,n,r,i){Dc(e,i),xc(e,t,n,r,i)},shouldSetTextContent:function(e,t){return"textarea"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&"string"===typeof t.dangerouslySetInnerHTML.__html},resetTextContent:function(e){e.textContent=""},shouldDeprioritizeSubtree:function(e,t){return!!t.hidden},createTextInstance:function(e,t,n,r){return e=kc(e,t),Ic(r,e),e},commitTextUpdate:function(e,t,n){e.nodeValue=n},appendChild:function(e,t){e.appendChild(t)},appendChildToContainer:function(e,t){e.nodeType===gc?e.parentNode.insertBefore(t,e):e.appendChild(t)},insertBefore:function(e,t,n){e.insertBefore(t,n)},insertInContainerBefore:function(e,t,n){e.nodeType===gc?e.parentNode.insertBefore(t,n):e.insertBefore(t,n)},removeChild:function(e,t){e.removeChild(t)},removeChildFromContainer:function(e,t){e.nodeType===gc?e.parentNode.removeChild(t):e.removeChild(t)},canHydrateInstance:function(e,t){return e.nodeType===fc&&t===e.nodeName.toLowerCase()},canHydrateTextInstance:function(e,t){return""!==t&&e.nodeType===hc},getNextHydratableSibling:function(e){for(e=e.nextSibling;e&&e.nodeType!==fc&&e.nodeType!==hc;)e=e.nextSibling;return e},getFirstHydratableChild:function(e){for(e=e.firstChild;e&&e.nodeType!==fc&&e.nodeType!==hc;)e=e.nextSibling;return e},hydrateInstance:function(e,t,n,r,i,o){return Ic(o,e),Dc(e,n),Tc(e,t,n,i,r)},hydrateTextInstance:function(e,t,n){return Ic(n,e),Ec(e,t)},didNotHydrateInstance:function(e,t){1===t.nodeType?Oc(e,t):_c(e,t)},didNotFindHydratableInstance:function(e,t,n){Pc(e,t,n)},didNotFindHydratableTextInstance:function(e,t){Rc(e,t)},scheduleDeferredCallback:Er.rIC,useSyncScheduling:!0});hn.injection.injectFiberBatchedUpdates(Mc.batchedUpdates);var Ac={createPortal:ht,hydrate:function(e,t,n){return ft(null,e,t,!0,n)},render:function(e,t,n){return ft(null,e,t,!1,n)},unstable_renderSubtreeIntoContainer:function(e,t,n,i){return null!=e&&Jt.has(e)||r("38"),ft(e,t,n,!1,i)},unmountComponentAtNode:function(e){return dt(e)||r("40"),!!e._reactRootContainer&&(Mc.unbatchedUpdates(function(){ft(null,null,e,!1,function(){e._reactRootContainer=null})}),!0)},findDOMNode:ke,unstable_createPortal:ht,unstable_batchedUpdates:hn.batchedUpdates,unstable_deferredUpdates:Mc.deferredUpdates,flushSync:Mc.flushSync,__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:{EventPluginHub:kn,EventPluginRegistry:It,EventPropagators:gs,ReactControlledComponent:pn,ReactDOMComponentTree:qt,ReactDOMEventListener:bn}};pc({findFiberByHostInstance:qt.getClosestInstanceFromNode,findHostInstanceByFiber:Mc.findHostInstance,bundleType:0,version:"16.0.0",rendererPackageName:"react-dom"}),e.exports=Ac},function(e,t,n){"use strict";var r=!("undefined"===typeof window||!window.document||!window.document.createElement),i={canUseDOM:r,canUseWorkers:"undefined"!==typeof Worker,canUseEventListeners:r&&!(!window.addEventListener&&!window.attachEvent),canUseViewport:r&&!!window.screen,isInWorker:!r};e.exports=i},function(e,t,n){"use strict";var r=n(3),i={listen:function(e,t,n){return e.addEventListener?(e.addEventListener(t,n,!1),{remove:function(){e.removeEventListener(t,n,!1)}}):e.attachEvent?(e.attachEvent("on"+t,n),{remove:function(){e.detachEvent("on"+t,n)}}):void 0},capture:function(e,t,n){return e.addEventListener?(e.addEventListener(t,n,!0),{remove:function(){e.removeEventListener(t,n,!0)}}):{remove:r}},registerDefault:function(){}};e.exports=i},function(e,t,n){"use strict";function r(e,t){return e===t?0!==e||0!==t||1/e===1/t:e!==e&&t!==t}function i(e,t){if(r(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),i=Object.keys(t);if(n.length!==i.length)return!1;for(var a=0;a<n.length;a++)if(!o.call(t,n[a])||!r(e[n[a]],t[n[a]]))return!1;return!0}var o=Object.prototype.hasOwnProperty;e.exports=i},function(e,t,n){"use strict";function r(e,t){return!(!e||!t)&&(e===t||!i(e)&&(i(t)?r(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}var i=n(21);e.exports=r},function(e,t,n){"use strict";function r(e){return i(e)&&3==e.nodeType}var i=n(22);e.exports=r},function(e,t,n){"use strict";function r(e){var t=e?e.ownerDocument||e:document,n=t.defaultView||window;return!(!e||!("function"===typeof n.Node?e instanceof n.Node:"object"===typeof e&&"number"===typeof e.nodeType&&"string"===typeof e.nodeName))}e.exports=r},function(e,t,n){"use strict";function r(e){try{e.focus()}catch(e){}}e.exports=r},function(e,t,n){"use strict";function r(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}e.exports=r},function(e,t){},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(0),s=n.n(a),c=n(27),u=n.n(c),l=n(28),d=(n.n(l),n(29)),p=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),f=function(e){function t(){return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),p(t,[{key:"render",value:function(){return s.a.createElement("div",{className:"App"},s.a.createElement("header",{className:"App-header"},s.a.createElement("img",{src:u.a,className:"App-logo",alt:"logo"}),s.a.createElement("h1",{className:"App-title"},"Welcome to React")),s.a.createElement(d.a,null))}}]),t}(a.Component);t.a=f},function(e,t,n){e.exports=n.p+"static/media/logo.5d5d9eef.svg"},function(e,t){},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(0),s=n.n(a),c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=function(e){function t(){var e,n,o,a;r(this,t);for(var s=arguments.length,c=Array(s),u=0;u<s;u++)c[u]=arguments[u];return n=o=i(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(c))),o.state={votes:[]},o.addVote=function(){window.y.share.votes.push(["one vote"])},a=n,i(o,a)}return o(t,e),c(t,[{key:"componentDidMount",value:function(){var e=this;window.y.share.votes.observe(function(t){e.setState({votes:window.y.share.votes.toArray()})})}},{key:"render",value:function(){return s.a.createElement("div",null,s.a.createElement("button",{type:"button",onClick:this.addVote},"Click me"),s.a.createElement("span",null,this.state.votes.length))}}]),t}(a.Component);t.a=u},function(e,t,n){"use strict";function r(){if("serviceWorker"in navigator){if(new URL("",window.location).origin!==window.location.origin)return;window.addEventListener("load",function(){var e="/service-worker.js";a?o(e):i(e)})}}function i(e){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}}).catch(function(e){console.error("Error during service worker registration:",e)})}function o(e){fetch(e).then(function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):i(e)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}t.a=r;var a=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/))},function(e,t,n){(function(t){var n,n;!function(t){e.exports=t()}(function(){return function e(t,r,i){function o(s,c){if(!r[s]){if(!t[s]){var u="function"==typeof n&&n;if(!c&&u)return n(s,!0);if(a)return a(s,!0);var l=new Error("Cannot find module '"+s+"'");throw l.code="MODULE_NOT_FOUND",l}var d=r[s]={exports:{}};t[s][0].call(d.exports,function(e){return o(t[s][1][e]||e)},d,d.exports,e,t,r,i)}return r[s].exports}for(var a="function"==typeof n&&n,s=0;s<i.length;s++)o(i[s]);return o}({1:[function(e,t,n){(function(r){"use strict";function i(){return!("undefined"==typeof window||!window.process||"renderer"!==window.process.type)||"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function o(e){var t=this.useColors;if(e[0]=(t?"%c":"")+this.namespace+(t?" %c":" ")+e[0]+(t?"%c ":" ")+"+"+n.humanize(this.diff),t){var r="color: "+this.color;e.splice(1,0,r,"color: inherit");var i=0,o=0;e[0].replace(/%[a-zA-Z%]/g,function(e){"%%"!==e&&(i++,"%c"===e&&(o=i))}),e.splice(o,0,r)}}function a(){return"object"===("undefined"==typeof console?"undefined":u(console))&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function s(e){try{null==e?n.storage.removeItem("debug"):n.storage.debug=e}catch(e){}}function c(){var e;try{e=n.storage.debug}catch(e){}return!e&&void 0!==r&&"env"in r&&(e=r.env.DEBUG),e}var u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};n=t.exports=e("./debug"),n.log=a,n.formatArgs=o,n.save=s,n.load=c,n.useColors=i,n.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(e){}}(),n.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],n.formatters.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}},n.enable(c())}).call(this,e("_process"))},{"./debug":2,_process:4}],2:[function(e,t,n){"use strict";function r(e){var t,r=0;for(t in e)r=(r<<5)-r+e.charCodeAt(t),r|=0;return n.colors[Math.abs(r)%n.colors.length]}function i(e){function t(){if(t.enabled){var e=t,r=+new Date,i=r-(u||r);e.diff=i,e.prev=u,e.curr=r,u=r;for(var o=new Array(arguments.length),a=0;a<o.length;a++)o[a]=arguments[a];o[0]=n.coerce(o[0]),"string"!=typeof o[0]&&o.unshift("%O");var s=0;o[0]=o[0].replace(/%([a-zA-Z%])/g,function(t,r){if("%%"===t)return t;s++;var i=n.formatters[r];if("function"==typeof i){var a=o[s];t=i.call(e,a),o.splice(s,1),s--}return t}),n.formatArgs.call(e,o),(t.log||n.log||console.log.bind(console)).apply(e,o)}}return t.namespace=e,t.enabled=n.enabled(e),t.useColors=n.useColors(),t.color=r(e),"function"==typeof n.init&&n.init(t),t}function o(e){n.save(e),n.names=[],n.skips=[];for(var t=("string"==typeof e?e:"").split(/[\s,]+/),r=t.length,i=0;i<r;i++)t[i]&&(e=t[i].replace(/\*/g,".*?"),"-"===e[0]?n.skips.push(new RegExp("^"+e.substr(1)+"$")):n.names.push(new RegExp("^"+e+"$")))}function a(){n.enable("")}function s(e){var t,r;for(t=0,r=n.skips.length;t<r;t++)if(n.skips[t].test(e))return!1;for(t=0,r=n.names.length;t<r;t++)if(n.names[t].test(e))return!0;return!1}function c(e){return e instanceof Error?e.stack||e.message:e}n=t.exports=i.debug=i.default=i,n.coerce=c,n.disable=a,n.enable=o,n.enabled=s,n.humanize=e("ms"),n.names=[],n.skips=[],n.formatters={};var u},{ms:3}],3:[function(e,t,n){"use strict";function r(e){if(e=String(e),!(e.length>100)){var t=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(t){var n=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return n*p;case"days":case"day":case"d":return n*d;case"hours":case"hour":case"hrs":case"hr":case"h":return n*l;case"minutes":case"minute":case"mins":case"min":case"m":return n*u;case"seconds":case"second":case"secs":case"sec":case"s":return n*c;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n;default:return}}}}function i(e){return e>=d?Math.round(e/d)+"d":e>=l?Math.round(e/l)+"h":e>=u?Math.round(e/u)+"m":e>=c?Math.round(e/c)+"s":e+"ms"}function o(e){return a(e,d,"day")||a(e,l,"hour")||a(e,u,"minute")||a(e,c,"second")||e+" ms"}function a(e,t,n){if(!(e<t))return e<1.5*t?Math.floor(e/t)+" "+n:Math.ceil(e/t)+" "+n+"s"}var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c=1e3,u=60*c,l=60*u,d=24*l,p=365.25*d;t.exports=function(e,t){t=t||{};var n=void 0===e?"undefined":s(e);if("string"===n&&e.length>0)return r(e);if("number"===n&&!1===isNaN(e))return t.long?o(e):i(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},{}],4:[function(e,t,n){function r(){throw new Error("setTimeout has not been defined")}function i(){throw new Error("clearTimeout has not been defined")}function o(e){if(d===setTimeout)return setTimeout(e,0);if((d===r||!d)&&setTimeout)return d=setTimeout,setTimeout(e,0);try{return d(e,0)}catch(t){try{return d.call(null,e,0)}catch(t){return d.call(this,e,0)}}}function a(e){if(p===clearTimeout)return clearTimeout(e);if((p===i||!p)&&clearTimeout)return p=clearTimeout,clearTimeout(e);try{return p(e)}catch(t){try{return p.call(null,e)}catch(t){return p.call(this,e)}}}function s(){m&&h&&(m=!1,h.length?g=h.concat(g):v=-1,g.length&&c())}function c(){if(!m){var e=o(s);m=!0;for(var t=g.length;t;){for(h=g,g=[];++v<t;)h&&h[v].run();v=-1,t=g.length}h=null,m=!1,a(e)}}function u(e,t){this.fun=e,this.array=t}function l(){}var d,p,f=t.exports={};!function(){try{d="function"==typeof setTimeout?setTimeout:r}catch(e){d=r}try{p="function"==typeof clearTimeout?clearTimeout:i}catch(e){p=i}}();var h,g=[],m=!1,v=-1;f.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];g.push(new u(e,t)),1!==g.length||m||o(c)},u.prototype.run=function(){this.fun.apply(null,this.array)},f.title="browser",f.browser=!0,f.env={},f.argv=[],f.version="",f.versions={},f.on=l,f.addListener=l,f.once=l,f.off=l,f.removeListener=l,f.removeAllListeners=l,f.emit=l,f.prependListener=l,f.prependOnceListener=l,f.listeners=function(e){return[]},f.binding=function(e){throw new Error("process.binding is not supported")},f.cwd=function(){return"/"},f.chdir=function(e){throw new Error("process.chdir is not supported")},f.umask=function(){return 0}},{}],5:[function(e,n,r){(function(e,t){!function(t){"use strict";function r(e,t,n,r){var i=t&&t.prototype instanceof o?t:o,a=Object.create(i.prototype),s=new h(r||[]);return a._invoke=d(e,n,s),a}function i(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}function o(){}function a(){}function s(){}function c(e){["next","throw","return"].forEach(function(t){e[t]=function(e){return this._invoke(t,e)}})}function u(e){this.arg=e}function l(t){function n(e,r,o,a){var s=i(t[e],t,r);if("throw"!==s.type){var c=s.arg,l=c.value;return l instanceof u?Promise.resolve(l.arg).then(function(e){n("next",e,o,a)},function(e){n("throw",e,o,a)}):Promise.resolve(l).then(function(e){c.value=e,o(c)},a)}a(s.arg)}function r(e,t){function r(){return new Promise(function(r,i){n(e,t,r,i)})}return o=o?o.then(r,r):r()}"object"==typeof e&&e.domain&&(n=e.domain.bind(n));var o;this._invoke=r}function d(e,t,n){var r=x;return function(o,a){if(r===E)throw new Error("Generator is already running");if(r===O){if("throw"===o)throw a;return m()}for(;;){var s=n.delegate;if(s){if("return"===o||"throw"===o&&s.iterator[o]===v){n.delegate=null;var c=s.iterator.return;if(c){var u=i(c,s.iterator,a);if("throw"===u.type){o="throw",a=u.arg;continue}}if("return"===o)continue}var u=i(s.iterator[o],s.iterator,a);if("throw"===u.type){n.delegate=null,o="throw",a=u.arg;continue}o="next",a=v;var l=u.arg;if(!l.done)return r=T,l;n[s.resultName]=l.value,n.next=s.nextLoc,n.delegate=null}if("next"===o)n.sent=n._sent=a;else if("throw"===o){if(r===x)throw r=O,a;n.dispatchException(a)&&(o="next",a=v)}else"return"===o&&n.abrupt("return",a);r=E;var u=i(e,t,n);if("normal"===u.type){r=n.done?O:T;var l={value:u.arg,done:n.done};if(u.arg!==_)return l;n.delegate&&"next"===o&&(a=v)}else"throw"===u.type&&(r=O,o="throw",a=u.arg)}}}function p(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function f(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function h(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(p,this),this.reset(!0)}function g(e){if(e){var t=e[w];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,r=function t(){for(;++n<e.length;)if(y.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=v,t.done=!0,t};return r.next=r}}return{next:m}}function m(){return{value:v,done:!0}}var v,y=Object.prototype.hasOwnProperty,b="function"==typeof Symbol?Symbol:{},w=b.iterator||"@@iterator",k=b.toStringTag||"@@toStringTag",C="object"==typeof n,S=t.regeneratorRuntime;if(S)return void(C&&(n.exports=S));S=t.regeneratorRuntime=C?n.exports:{},S.wrap=r;var x="suspendedStart",T="suspendedYield",E="executing",O="completed",_={},P=s.prototype=o.prototype;a.prototype=P.constructor=s,s.constructor=a,s[k]=a.displayName="GeneratorFunction",S.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===a||"GeneratorFunction"===(t.displayName||t.name))},S.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,s):(e.__proto__=s,k in e||(e[k]="GeneratorFunction")),e.prototype=Object.create(P),e},S.awrap=function(e){return new u(e)},c(l.prototype),S.async=function(e,t,n,i){var o=new l(r(e,t,n,i));return S.isGeneratorFunction(t)?o:o.next().then(function(e){return e.done?e.value:o.next()})},c(P),P[w]=function(){return this},P[k]="Generator",P.toString=function(){return"[object Generator]"},S.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},S.values=g,h.prototype={constructor:h,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=v,this.done=!1,this.delegate=null,this.tryEntries.forEach(f),!e)for(var t in this)"t"===t.charAt(0)&&y.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=v)},stop:function(){this.done=!0;var e=this.tryEntries[0],t=e.completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){function t(t,r){return o.type="throw",o.arg=e,n.next=t,!!r}if(this.done)throw e;for(var n=this,r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r],o=i.completion;if("root"===i.tryLoc)return t("end");if(i.tryLoc<=this.prev){var a=y.call(i,"catchLoc"),s=y.call(i,"finallyLoc");if(a&&s){if(this.prev<i.catchLoc)return t(i.catchLoc,!0);if(this.prev<i.finallyLoc)return t(i.finallyLoc)}else if(a){if(this.prev<i.catchLoc)return t(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return t(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&y.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var i=r;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=e,o.arg=t,i?this.next=i.finallyLoc:this.complete(o),_},complete:function(e,t){if("throw"===e.type)throw e.arg;"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=e.arg,this.next="end"):"normal"===e.type&&t&&(this.next=t)},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),f(n),_}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;f(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:g(e),resultName:t,nextLoc:n},_}}}("object"==typeof t?t:"object"==typeof window?window:"object"==typeof self?self:this)}).call(this,e("_process"),"undefined"!=typeof t?t:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{_process:4}],6:[function(e,t,n){"use strict";console.warn("The regenerator/runtime module is deprecated; please import regenerator-runtime/runtime instead."),t.exports=e("regenerator-runtime/runtime")},{"regenerator-runtime/runtime":5}],7:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e){return"read"===e||"write"===e}function o(e){return"write"===e}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();t.exports=function(e){var t=function(){function t(n,i){if(r(this,t),this.y=n,null==i&&(i={}),null==i.role||"master"===i.role)this.role="master";else{if("slave"!==i.role)throw new Error("Role must be either 'master' or 'slave'!");this.role="slave"}this.log=e.debug("y:connector"),this.logMessage=e.debug("y:connector-message"),this.y.db.forwardAppliedOperations=i.forwardAppliedOperations||!1,this.role=i.role,this.connections={},this.isSynced=!1,this.userEventListeners=[],this.whenSyncedListeners=[],this.currentSyncTarget=null,this.syncingClients=[],this.forwardToSyncingClients=!1!==i.forwardToSyncingClients,this.debug=!0===i.debug,this.syncStep2=Promise.resolve(),this.broadcastOpBuffer=[],this.protocolVersion=11,this.authInfo=i.auth||null,this.checkAuth=i.checkAuth||function(){return Promise.resolve("write")},!0===i.generateUserId&&this.setUserId(e.utils.generateGuid())}return a(t,[{key:"resetAuth",value:function(e){this.authInfo!==e&&(this.authInfo=e,this.broadcast({type:"auth",auth:this.authInfo}))}},{key:"reconnect",value:function(){return this.log("reconnecting.."),this.y.db.startGarbageCollector()}},{key:"disconnect",value:function(){return this.log("discronnecting.."),this.connections={},this.isSynced=!1,this.currentSyncTarget=null,this.syncingClients=[],this.whenSyncedListeners=[],this.y.db.stopGarbageCollector(),this.y.db.whenTransactionsFinished()}},{key:"repair",value:function(){this.log("Repairing the state of Yjs. This can happen if messages get lost, and Yjs detects that something is wrong. If this happens often, please report an issue here: https://github.com/y-js/yjs/issues");for(var e in this.connections)this.connections[e].isSynced=!1;this.isSynced=!1,this.currentSyncTarget=null,this.findNextSyncTarget()}},{key:"setUserId",value:function(e){return null==this.userId?(this.log('Set userId to "%s"',e),this.userId=e,this.y.db.setUserId(e)):null}},{key:"onUserEvent",value:function(e){this.userEventListeners.push(e)}},{key:"removeUserEventListener",value:function(e){this.userEventListeners=this.userEventListeners.filter(function(e){})}},{key:"userLeft",value:function(e){if(null!=this.connections[e]){this.log("User left: %s",e),delete this.connections[e],e===this.currentSyncTarget&&(this.currentSyncTarget=null,this.findNextSyncTarget()),this.syncingClients=this.syncingClients.filter(function(t){return t!==e});var t=!0,n=!1,r=void 0;try{for(var i,o=this.userEventListeners[Symbol.iterator]();!(t=(i=o.next()).done);t=!0)(0,i.value)({action:"userLeft",user:e})}catch(e){n=!0,r=e}finally{try{!t&&o.return&&o.return()}finally{if(n)throw r}}}}},{key:"userJoined",value:function(e,t){if(null==t)throw new Error("You must specify the role of the joined user!");if(null!=this.connections[e])throw new Error("This user already joined!");this.log("User joined: %s",e),this.connections[e]={isSynced:!1,role:t};var n=!0,r=!1,i=void 0;try{for(var o,a=this.userEventListeners[Symbol.iterator]();!(n=(o=a.next()).done);n=!0)(0,o.value)({action:"userJoined",user:e,role:t})}catch(e){r=!0,i=e}finally{try{!n&&a.return&&a.return()}finally{if(r)throw i}}null==this.currentSyncTarget&&this.findNextSyncTarget()}},{key:"whenSynced",value:function(e){this.isSynced?e():this.whenSyncedListeners.push(e)}},{key:"findNextSyncTarget",value:function(){if(null==this.currentSyncTarget){var e=null;for(var t in this.connections)if(!this.connections[t].isSynced){e=t;break}var n=this;null!=e?(this.currentSyncTarget=e,this.y.db.requestTransaction(regeneratorRuntime.mark(function t(){var r,i,o;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.delegateYield(this.getStateSet(),"t0",1);case 1:return r=t.t0,t.delegateYield(this.getDeleteSet(),"t1",3);case 3:i=t.t1,o={type:"sync step 1",stateSet:r,deleteSet:i,protocolVersion:n.protocolVersion,auth:n.authInfo},n.send(e,o);case 6:case"end":return t.stop()}},t,this)}))):n.isSynced||this.y.db.requestTransaction(regeneratorRuntime.mark(function e(){var t,r,i,o,a,s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n.isSynced){e.next=23;break}return n.isSynced=!0,e.delegateYield(this.garbageCollectAfterSync(),"t0",3);case 3:for(t=!0,r=!1,i=void 0,e.prev=6,o=n.whenSyncedListeners[Symbol.iterator]();!(t=(a=o.next()).done);t=!0)(s=a.value)();e.next=14;break;case 10:e.prev=10,e.t1=e.catch(6),r=!0,i=e.t1;case 14:e.prev=14,e.prev=15,!t&&o.return&&o.return();case 17:if(e.prev=17,!r){e.next=20;break}throw i;case 20:return e.finish(17);case 21:return e.finish(14);case 22:n.whenSyncedListeners=[];case 23:case"end":return e.stop()}},e,this,[[6,10,14,22],[15,,17,21]])}))}}},{key:"send",value:function(e,t){this.log("Send '%s' to %s",t.type,e),this.logMessage("Message: %j",t)}},{key:"broadcast",value:function(e){this.log("Broadcast '%s'",e.type),this.logMessage("Message: %j",e)}},{key:"broadcastOps",value:function(t){function n(){r.broadcastOpBuffer.length>0&&(r.broadcast({type:"update",ops:r.broadcastOpBuffer}),r.broadcastOpBuffer=[])}t=t.map(function(t){return e.Struct[t.struct].encode(t)});var r=this;0===this.broadcastOpBuffer.length?(this.broadcastOpBuffer=t,this.y.db.transactionInProgress?this.y.db.whenTransactionsFinished().then(n):setTimeout(n,0)):this.broadcastOpBuffer=this.broadcastOpBuffer.concat(t)}},{key:"receiveMessage",value:function(e,t){var n=this;if(e===this.userId)return Promise.resolve();if(this.log("Receive '%s' from %s",t.type,e),this.logMessage("Message: %j",t),null!=t.protocolVersion&&t.protocolVersion!==this.protocolVersion)return this.log("You tried to sync with a yjs instance that has a different protocol version\n          (You: "+this.protocolVersion+", Client: "+t.protocolVersion+").\n          The sync was stopped. You need to upgrade your dependencies (especially Yjs & the Connector)!\n          "),this.send(e,{type:"sync stop",protocolVersion:this.protocolVersion}),Promise.reject("Incompatible protocol version");if(null!=t.auth&&null!=this.connections[e]){var r=this.checkAuth(t.auth,this.y,e);this.connections[e].auth=r,r.then(function(t){var r=!0,i=!1,o=void 0;try{for(var a,s=n.userEventListeners[Symbol.iterator]();!(r=(a=s.next()).done);r=!0)(0,a.value)({action:"userAuthenticated",user:e,auth:t})}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}})}else null!=this.connections[e]&&null==this.connections[e].auth&&(this.connections[e].auth=this.checkAuth(null,this.y,e));return null!=this.connections[e]&&null!=this.connections[e].auth?this.connections[e].auth.then(function(r){if("sync step 1"===t.type&&i(r)){var a=n,s=t;n.y.db.requestTransaction(regeneratorRuntime.mark(function t(){var n,i,c;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.delegateYield(this.getStateSet(),"t0",1);case 1:if(n=t.t0,!o(r)){t.next=4;break}return t.delegateYield(this.applyDeleteSet(s.deleteSet),"t1",4);case 4:return t.delegateYield(this.getDeleteSet(),"t2",5);case 5:return i=t.t2,c={type:"sync step 2",stateSet:n,deleteSet:i,protocolVersion:this.protocolVersion,auth:this.authInfo},t.delegateYield(this.getOperations(s.stateSet),"t3",8);case 8:c.os=t.t3,a.send(e,c),this.forwardToSyncingClients?(a.syncingClients.push(e),setTimeout(function(){a.syncingClients=a.syncingClients.filter(function(t){return t!==e}),a.send(e,{type:"sync done"})},5e3)):a.send(e,{type:"sync done"});case 11:case"end":return t.stop()}},t,this)}))}else if("sync step 2"===t.type&&o(r)){var c=n.y.db,u={};u.promise=new Promise(function(e){u.resolve=e}),n.syncStep2=u.promise;var l=t;c.requestTransaction(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.delegateYield(this.applyDeleteSet(l.deleteSet),"t0",1);case 1:if(null==l.osUntransformed){e.next=5;break}return e.delegateYield(this.applyOperationsUntransformed(l.osUntransformed,l.stateSet),"t1",3);case 3:e.next=6;break;case 5:this.store.apply(l.os);case 6:u.resolve();case 7:case"end":return e.stop()}},e,this)}))}else if("sync done"===t.type){var d=n;n.syncStep2.then(function(){d._setSyncedWith(e)})}else if("update"===t.type&&o(r)){if(n.forwardToSyncingClients){var p=!0,f=!1,h=void 0;try{for(var g,m=n.syncingClients[Symbol.iterator]();!(p=(g=m.next()).done);p=!0){var v=g.value;n.send(v,t)}}catch(e){f=!0,h=e}finally{try{!p&&m.return&&m.return()}finally{if(f)throw h}}}if(n.y.db.forwardAppliedOperations){var y=t.ops.filter(function(e){return"Delete"===e.struct});y.length>0&&n.broadcastOps(y)}n.y.db.apply(t.ops)}}):Promise.reject("Unable to deliver message")}},{key:"_setSyncedWith",value:function(e){var t=this.connections[e];null!=t&&(t.isSynced=!0),e===this.currentSyncTarget&&(this.currentSyncTarget=null,this.findNextSyncTarget())}},{key:"parseMessageFromXml",value:function(e){function t(e){var r=!0,i=!1,o=void 0;try{for(var a,s=e.children[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){var c=a.value;return"true"===c.getAttribute("isArray")?t(c):n(c)}}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}}function n(e){var r={};for(var i in e.attrs){var o=e.attrs[i],a=parseInt(o,10);isNaN(a)||""+a!==o?r[i]=o:r[i]=a}for(var s in e.children){var c=s.name;"true"===s.getAttribute("isArray")?r[c]=t(s):r[c]=n(s)}return r}n(e)}},{key:"encodeMessageToXml",value:function(e,t){function n(e,t){for(var i in t){var o=t[i];null==i||(o.constructor===Object?n(e.c(i),o):o.constructor===Array?r(e.c(i),o):e.setAttribute(i,o))}}function r(e,t){e.setAttribute("isArray","true");var i=!0,o=!1,a=void 0;try{for(var s,c=t[Symbol.iterator]();!(i=(s=c.next()).done);i=!0){var u=s.value;u.constructor===Object?n(e.c("array-element"),u):r(e.c("array-element"),u)}}catch(e){o=!0,a=e}finally{try{!i&&c.return&&c.return()}finally{if(o)throw a}}}if(t.constructor===Object)n(e.c("y",{xmlns:"http://y.ninja/connector-stanza"}),t);else{if(t.constructor!==Array)throw new Error("I can't encode this json!");r(e.c("y",{xmlns:"http://y.ninja/connector-stanza"}),t)}}}]),t}();e.AbstractConnector=t}},{}],8:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;return void 0!==a?a.call(r):void 0};t.exports=function(e){var t={users:{},buffers:{},removeUser:function(e){for(var t in this.users)this.users[t].userLeft(e);delete this.users[e],delete this.buffers[e]},addUser:function(e){this.users[e.userId]=e,this.buffers[e.userId]={};for(var t in this.users)if(t!==e.userId){var n=this.users[t];n.userJoined(e.userId,"master"),e.userJoined(n.userId,"master")}},whenTransactionsFinished:function(){var e=this;return new Promise(function(t,n){setTimeout(function(){var r=[];for(var i in e.users)r.push(e.users[i].y.db.whenTransactionsFinished());Promise.all(r).then(t,n)},10)})},flushOne:function(){var e=[];for(var n in t.buffers){var r=t.buffers[n],i=!1;for(var o in r)if(r[o].length>0){i=!0;break}i&&e.push(n)}if(e.length>0){var a=getRandom(e),s=t.buffers[a],c=getRandom(Object.keys(s)),u=s[c].shift();0===s[c].length&&delete s[c];var l=t.users[a];return l.receiveMessage(u[0],u[1]).then(function(){return l.y.db.whenTransactionsFinished()},function(){})}return!1},flushAll:function(){return new Promise(function(e){function n(){var r=t.flushOne();if(r){for(;r;)r=t.flushOne();t.whenTransactionsFinished().then(n)}else r=t.flushOne(),r?r.then(function(){t.whenTransactionsFinished().then(n)}):e()}t.whenTransactionsFinished().then(n)})}};e.utils.globalRoom=t;var n=0,c=function(c){function u(e,o){if(r(this,u),void 0===o)throw new Error("Options must not be undefined!");o.role="master",o.forwardToSyncingClients=!1;var a=i(this,(u.__proto__||Object.getPrototypeOf(u)).call(this,e,o));return a.setUserId(n+++"").then(function(){t.addUser(a)}),a.globalRoom=t,a.syncingClientDuration=0,a}return o(u,c),a(u,[{key:"receiveMessage",value:function(e,t){return s(u.prototype.__proto__||Object.getPrototypeOf(u.prototype),"receiveMessage",this).call(this,e,JSON.parse(JSON.stringify(t)))}},{key:"send",value:function(e,n){var r=t.buffers[e];null!=r&&(null==r[this.userId]&&(r[this.userId]=[]),r[this.userId].push(JSON.parse(JSON.stringify([this.userId,n]))))}},{key:"broadcast",value:function(e){for(var n in t.buffers){var r=t.buffers[n];null==r[this.userId]&&(r[this.userId]=[]),r[this.userId].push(JSON.parse(JSON.stringify([this.userId,e])))}}},{key:"isDisconnected",value:function(){return null==t.users[this.userId]}},{key:"reconnect",value:function(){return this.isDisconnected()&&(t.addUser(this),s(u.prototype.__proto__||Object.getPrototypeOf(u.prototype),"reconnect",this).call(this)),e.utils.globalRoom.flushAll()}},{key:"disconnect",value:function(){var e=Promise.resolve();this.isDisconnected()||(t.removeUser(this.userId),e=s(u.prototype.__proto__||Object.getPrototypeOf(u.prototype),"disconnect",this).call(this));var n=this;return e.then(function(){return n.y.db.whenTransactionsFinished()})}},{key:"flush",value:function(){var e=this;return async(regeneratorRuntime.mark(function n(){var r,i,o;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:r=t.buffers[e.userId];case 1:if(!(Object.keys(r).length>0)){n.next=9;break}return i=getRandom(Object.keys(r)),o=r[i].shift(),0===r[i].length&&delete r[i],n.next=7,this.receiveMessage(o[0],o[1]);case 7:n.next=1;break;case 9:return n.next=11,e.whenTransactionsFinished();case 11:case"end":return n.stop()}},n,this)}))}}]),u}(e.AbstractConnector);e.Test=c}},{}],9:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();t.exports=function(e){var t=function(){function t(e,n){function i(){return o.whenTransactionsFinished().then(function(){return o.gc1.length>0||o.gc2.length>0?(o.y.connector.isSynced||console.warn("gc should be empty when not synced!"),new Promise(function(e){o.requestTransaction(regeneratorRuntime.mark(function t(){var n,r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(null==o.y.connector||!o.y.connector.isSynced){t.next=10;break}n=0;case 2:if(!(n<o.gc2.length)){t.next=8;break}return r=o.gc2[n],t.delegateYield(this.garbageCollectOperation(r),"t0",5);case 5:n++,t.next=2;break;case 8:o.gc2=o.gc1,o.gc1=[];case 10:o.gcTimeout>0&&(o.gcInterval=setTimeout(i,o.gcTimeout)),e();case 12:case"end":return t.stop()}},t,this)}))})):(o.gcTimeout>0&&(o.gcInterval=setTimeout(i,o.gcTimeout)),Promise.resolve())})}r(this,t),this.y=e,this.dbOpts=n;var o=this;this.userId=null;var a;this.userIdPromise=new Promise(function(e){a=e}),this.userIdPromise.resolve=a,this.forwardAppliedOperations=!1,this.listenersById={},this.listenersByIdExecuteNow=[],this.listenersByIdRequestPending=!1,this.initializedTypes={},this.waitingTransactions=[],this.transactionInProgress=!1,this.transactionIsFlushed=!1,"undefined"!=typeof YConcurrency_TestingMode&&(this.executeOrder=[]),this.gc1=[],this.gc2=[],this.garbageCollect=i,this.startGarbageCollector(),this.repairCheckInterval=n.repairCheckInterval?n.repairCheckInterval:6e3,this.opsReceivedTimestamp=new Date,this.startRepairCheck()}return i(t,[{key:"startGarbageCollector",value:function(){this.gc=null==this.dbOpts.gc||this.dbOpts.gc,this.gc?this.gcTimeout=this.dbOpts.gcTimeout?this.dbOpts.gcTimeout:5e4:this.gcTimeout=-1,this.gcTimeout>0&&this.garbageCollect()}},{key:"startRepairCheck",value:function(){var e=this;this.repairCheckInterval>0&&(this.repairCheckIntervalHandler=setInterval(function(){new Date-e.opsReceivedTimestamp>e.repairCheckInterval&&Object.keys(e.listenersById).length>0&&(e.listenersById={},e.opsReceivedTimestamp=new Date,e.y.connector.repair())},this.repairCheckInterval))}},{key:"stopRepairCheck",value:function(){clearInterval(this.repairCheckIntervalHandler)}},{key:"queueGarbageCollector",value:function(e){this.y.connector.isSynced&&this.gc&&this.gc1.push(e)}},{key:"emptyGarbageCollector",value:function(){var e=this;return new Promise(function(t){var n=function n(){e.gc1.length>0||e.gc2.length>0?e.garbageCollect().then(n):t()};setTimeout(n,0)})}},{key:"addToDebug",value:function(){if("undefined"!=typeof YConcurrency_TestingMode){var e=Array.prototype.map.call(arguments,function(e){return"string"==typeof e?e:JSON.stringify(e)}).join("").replace(/"/g,"'").replace(/,/g,", ").replace(/:/g,": ");this.executeOrder.push(e)}}},{key:"getDebugData",value:function(){console.log(this.executeOrder.join("\n"))}},{key:"stopGarbageCollector",value:function(){var e=this;return this.gc=!1,this.gcTimeout=-1,new Promise(function(t){e.requestTransaction(regeneratorRuntime.mark(function n(){var r,i,o;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:r=e.gc1.concat(e.gc2),e.gc1=[],e.gc2=[],i=0;case 4:if(!(i<r.length)){n.next=13;break}return n.delegateYield(this.getOperation(r[i]),"t0",6);case 6:if(null==(o=n.t0)){n.next=10;break}return delete o.gc,n.delegateYield(this.setOperation(o),"t1",10);case 10:i++,n.next=4;break;case 13:t();case 14:case"end":return n.stop()}},n,this)}))})}},{key:"addToGarbageCollector",value:regeneratorRuntime.mark(function e(t,n){var r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=t.gc||!0!==t.deleted||!this.store.gc||!this.store.y.connector.isSynced){e.next=15;break}if(r=!1,null==n||!0!==n.deleted){e.next=6;break}r=!0,e.next=10;break;case 6:if(!(null!=t.content&&t.content.length>1)){e.next=10;break}return e.delegateYield(this.getInsertionCleanStart([t.id[0],t.id[1]+1]),"t0",8);case 8:t=e.t0,r=!0;case 10:if(!r){e.next=15;break}return t.gc=!0,e.delegateYield(this.setOperation(t),"t1",13);case 13:return this.store.queueGarbageCollector(t.id),e.abrupt("return",!0);case 15:return e.abrupt("return",!1);case 16:case"end":return e.stop()}},e,this)})},{key:"removeFromGarbageCollector",value:function(t){function n(n){return!e.utils.compareIds(n,t.id)}this.gc1=this.gc1.filter(n),this.gc2=this.gc2.filter(n),delete t.gc}},{key:"destroyTypes",value:function(){for(var e in this.initializedTypes){var t=this.initializedTypes[e];null!=t._destroy?t._destroy():console.error("The type you included does not provide destroy functionality, it will remain in memory (updating your packages will help).")}}},{key:"destroy",value:regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:clearInterval(this.gcInterval),this.gcInterval=null,this.stopRepairCheck();case 3:case"end":return e.stop()}},e,this)})},{key:"setUserId",value:function(e){if(!this.userIdPromise.inProgress){this.userIdPromise.inProgress=!0;var t=this;t.requestTransaction(regeneratorRuntime.mark(function n(){var r;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return t.userId=e,n.delegateYield(this.getState(e),"t0",2);case 2:r=n.t0,t.opClock=r.clock,t.userIdPromise.resolve(e);case 5:case"end":return n.stop()}},n,this)}))}return this.userIdPromise}},{key:"whenUserIdSet",value:function(e){this.userIdPromise.then(e)}},{key:"getNextOpId",value:function(e){if(null==e)throw new Error("getNextOpId expects the number of created ids to create!");if(null==this.userId)throw new Error("OperationStore not yet initialized!");var t=[this.userId,this.opClock];return this.opClock+=e,t}},{key:"apply",value:function(t){this.opsReceivedTimestamp=new Date;for(var n=0;n<t.length;n++){var r=t[n];if(null==r.id||r.id[0]!==this.y.connector.userId){var i=e.Struct[r.struct].requiredOps(r);null!=r.requires&&(i=i.concat(r.requires)),this.whenOperationsExist(i,r)}}}},{key:"whenOperationsExist",value:function(e,t){if(e.length>0)for(var n={op:t,missing:e.length},r=0;r<e.length;r++){var i=e[r],o=JSON.stringify(i),a=this.listenersById[o];null==a&&(a=[],this.listenersById[o]=a),a.push(n)}else this.listenersByIdExecuteNow.push({op:t});if(!this.listenersByIdRequestPending){this.listenersByIdRequestPending=!0;var s=this;this.requestTransaction(regeneratorRuntime.mark(function e(){var t,n,r,i,o,a,c,u,l,d,p;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=s.listenersByIdExecuteNow,s.listenersByIdExecuteNow=[],n=s.listenersById,s.listenersById={},s.listenersByIdRequestPending=!1,r=0;case 6:if(!(r<t.length)){e.next=12;break}return i=t[r].op,e.delegateYield(s.tryExecute.call(this,i),"t0",9);case 9:r++,e.next=6;break;case 12:e.t1=regeneratorRuntime.keys(n);case 13:if((e.t2=e.t1()).done){e.next=39;break}if(o=e.t2.value,a=n[o],c=JSON.parse(o),"string"!=typeof c[1]){e.next=22;break}return e.delegateYield(this.getOperation(c),"t3",19);case 19:u=e.t3,e.next=24;break;case 22:return e.delegateYield(this.getInsertion(c),"t4",23);case 23:u=e.t4;case 24:if(null!=u){e.next=28;break}s.listenersById[o]=a,e.next=37;break;case 28:l=0;case 29:if(!(l<a.length)){e.next=37;break}if(d=a[l],p=d.op,0!=--d.missing){e.next=34;break}return e.delegateYield(s.tryExecute.call(this,p),"t5",34);case 34:l++,e.next=29;break;case 37:e.next=13;break;case 39:case"end":return e.stop()}},e,this)}))}}},{key:"tryExecute",value:regeneratorRuntime.mark(function t(n){var r,i,o,a;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(this.store.addToDebug("yield* this.store.tryExecute.call(this, ",JSON.stringify(n),")"),"Delete"!==n.struct){t.next=5;break}return t.delegateYield(e.Struct.Delete.execute.call(this,n),"t0",3);case 3:t.next=32;break;case 5:return t.delegateYield(this.getInsertion(n.id),"t1",6);case 6:r=t.t1;case 7:if(null==r||null==r.content){t.next=21;break}if(!(r.id[1]+r.content.length<n.id[1]+n.content.length)){t.next=18;break}return i=r.content.length-(n.id[1]-r.id[1]),n.content.splice(0,i),n.id=[n.id[0],n.id[1]+i],n.left=e.utils.getLastId(r),n.origin=n.left,t.delegateYield(this.getOperation(n.id),"t2",15);case 15:r=t.t2,t.next=19;break;case 18:return t.abrupt("break",21);case 19:t.next=7;break;case 21:if(null!=r){t.next=32;break}return o=n.id,t.delegateYield(this.isGarbageCollected(o),"t3",24);case 24:if(a=t.t3){t.next=32;break}return t.delegateYield(e.Struct[n.struct].execute.call(this,n),"t4",27);case 27:return t.delegateYield(this.addOperation(n),"t5",28);case 28:return t.delegateYield(this.store.operationAdded(this,n),"t6",29);case 29:return t.delegateYield(this.getOperation(o),"t7",30);case 30:return n=t.t7,t.delegateYield(this.tryCombineWithLeft(n),"t8",32);case 32:case"end":return t.stop()}},t,this)})},{key:"operationAdded",value:regeneratorRuntime.mark(function t(n,r){var i,o,a,s,c,u,l,d,p,f,h,g,m,v,y,b;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if("Delete"!==r.struct){t.next=6;break}if(null==(i=this.initializedTypes[JSON.stringify(r.targetParent)])){t.next=4;break}return t.delegateYield(i._changed(n,r),"t0",4);case 4:t.next=33;break;case 6:return t.delegateYield(n.updateState(r.id[0]),"t1",7);case 7:for(o=null!=r.content?r.content.length:1,a=0;a<o;a++)if(s=JSON.stringify([r.id[0],r.id[1]+a]),c=this.listenersById[s],delete this.listenersById[s],null!=c)for(u in c)l=c[u],0==--l.missing&&this.whenOperationsExist([],l.op);if(d=this.initializedTypes[JSON.stringify(r.parent)],null==r.parent){t.next=16;break}return t.delegateYield(n.isDeleted(r.parent),"t2",12);case 12:if(!(p=t.t2)){t.next=16;break}return t.delegateYield(n.deleteList(r.id),"t3",15);case 15:return t.abrupt("return");case 16:if(null==d){t.next=19;break}return f=e.utils.copyOperation(r),t.delegateYield(d._changed(n,f),"t4",19);case 19:if(r.deleted){t.next=33;break}h=null!=r.content?r.content.length:1,g=r.id,m=0;case 23:if(!(m<h)){t.next=33;break}return v=[g[0],g[1]+m],t.delegateYield(n.isDeleted(v),"t5",26);case 26:if(!(y=t.t5)){t.next=30;break}return b={struct:"Delete",target:v},t.delegateYield(this.tryExecute.call(n,b),"t6",30);case 30:m++,t.next=23;break;case 33:case"end":return t.stop()}},t,this)})},{key:"whenTransactionsFinished",value:function(){if(this.transactionInProgress){if(null==this.transactionsFinished){var e,t=new Promise(function(t){e=t});this.transactionsFinished={resolve:e,promise:t}}return this.transactionsFinished.promise}return Promise.resolve()}},{key:"getNextRequest",value:function(){return 0===this.waitingTransactions.length?this.transactionIsFlushed?(this.transactionInProgress=!1,this.transactionIsFlushed=!1,null!=this.transactionsFinished&&(this.transactionsFinished.resolve(),this.transactionsFinished=null),null):(this.transactionIsFlushed=!0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.delegateYield(this.flush(),"t0",1);case 1:case"end":return e.stop()}},e,this)})):(this.transactionIsFlushed=!1,this.waitingTransactions.shift())}},{key:"requestTransaction",value:function(e,t){var n=this;this.waitingTransactions.push(e),this.transactionInProgress||(this.transactionInProgress=!0,setTimeout(function(){n.transact(n.getNextRequest())},0))}},{key:"getType",value:function(e){return this.initializedTypes[JSON.stringify(e)]}},{key:"initType",value:regeneratorRuntime.mark(function t(n,r){var i,o,a;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(i=JSON.stringify(n),null!=(o=this.store.initializedTypes[i])){t.next=9;break}return t.delegateYield(this.getOperation(n),"t0",4);case 4:if(null==(a=t.t0)){t.next=9;break}return t.delegateYield(e[a.type].typeDefinition.initType.call(this,this.store,a,r),"t1",7);case 7:o=t.t1,this.store.initializedTypes[i]=o;case 9:return t.abrupt("return",o);case 10:case"end":return t.stop()}},t,this)})},{key:"createType",value:function(t,n){var r=t[0].struct;n=n||this.getNextOpId(1);var i=e.Struct[r].create(n);i.type=t[0].name,this.requestTransaction(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("_"!==i.id[0]){e.next=4;break}return e.delegateYield(this.setOperation(i),"t0",2);case 2:e.next=5;break;case 4:return e.delegateYield(this.applyCreatedOperations([i]),"t1",5);case 5:case"end":return e.stop()}},e,this)}));var o=e[i.type].typeDefinition.createType(this,i,t[1]);return this.initializedTypes[JSON.stringify(i.id)]=o,o}}]),t}();e.AbstractDatabase=t}},{}],10:[function(e,t,n){"use strict";t.exports=function(e){var t={Delete:{encode:function(e){return{target:e.target,length:e.length||0,struct:"Delete"}},requiredOps:function(e){return[]},execute:regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.delegateYield(this.deleteOperation(t.target,t.length||1),"t0",1);case 1:return e.abrupt("return",e.t0);case 2:case"end":return e.stop()}},e,this)})},Insert:{encode:function(e){var t={id:e.id,left:e.left,right:e.right,origin:e.origin,parent:e.parent,struct:e.struct};return null!=e.parentSub&&(t.parentSub=e.parentSub),e.hasOwnProperty("opContent")?t.opContent=e.opContent:t.content=e.content.slice(),t},requiredOps:function(t){var n=[];return null!=t.left&&n.push(t.left),null!=t.right&&n.push(t.right),null==t.origin||e.utils.compareIds(t.left,t.origin)||n.push(t.origin),n.push(t.parent),null!=t.opContent&&n.push(t.opContent),n},getDistanceToOrigin:regeneratorRuntime.mark(function t(n){var r,i;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(null!=n.left){t.next=4;break}return t.abrupt("return",0);case 4:return r=0,t.delegateYield(this.getInsertion(n.left),"t0",6);case 6:i=t.t0;case 7:if(e.utils.matchesId(i,n.origin)){t.next=17;break}if(r++,null!=i.left){t.next=13;break}return t.abrupt("break",17);case 13:return t.delegateYield(this.getInsertion(i.left),"t1",14);case 14:i=t.t1;case 15:t.next=7;break;case 17:return t.abrupt("return",r);case 18:case"end":return t.stop()}},t,this)}),execute:regeneratorRuntime.mark(function n(r){var i,o,a,s,c,u,l,d,p,f,h,g;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(o=[],null==r.origin){n.next=8;break}return n.delegateYield(this.getInsertionCleanEnd(r.origin),"t0",3);case 3:return a=n.t0,null==a.originOf&&(a.originOf=[]),a.originOf.push(r.id),n.delegateYield(this.setOperation(a),"t1",7);case 7:null!=a.right&&o.push(a.right);case 8:return n.delegateYield(t.Insert.getDistanceToOrigin.call(this,r),"t2",9);case 9:if(s=i=n.t2,null==r.left){n.next=23;break}return n.delegateYield(this.getInsertionCleanEnd(r.left),"t3",12);case 12:if(c=n.t3,e.utils.compareIds(r.left,r.origin)||null==c.right||o.push(c.right),null!=c.right){n.next=18;break}n.t4=null,n.next=20;break;case 18:return n.delegateYield(this.getOperation(c.right),"t5",19);case 19:n.t4=n.t5;case 20:c=n.t4,n.next=34;break;case 23:return n.delegateYield(this.getOperation(r.parent),"t6",24);case 24:if(u=n.t6,null!=(d=r.parentSub?u.map[r.parentSub]:u.start)){n.next=30;break}n.t7=null,n.next=32;break;case 30:return n.delegateYield(this.getOperation(d),"t8",31);case 31:n.t7=n.t8;case 32:l=n.t7,c=l;case 34:if(null==r.right){n.next=37;break}return o.push(r.right),n.delegateYield(this.getInsertionCleanStart(r.right),"t9",37);case 37:if(null==c||e.utils.compareIds(c.id,r.right)){n.next=59;break}return n.delegateYield(t.Insert.getDistanceToOrigin.call(this,c),"t10",40);case 40:if((p=n.t10)!==i){n.next=45;break}c.id[0]<r.id[0]&&(r.left=e.utils.getLastId(c),s=i+1),n.next=50;break;case 45:if(!(p<i)){n.next=49;break}i-s<=p&&(r.left=e.utils.getLastId(c),s=i+1),n.next=50;break;case 49:return n.abrupt("break",62);case 50:if(i++,null==c.right){n.next=56;break}return n.delegateYield(this.getInsertion(c.right),"t11",53);case 53:c=n.t11,n.next=57;break;case 56:c=null;case 57:n.next=60;break;case 59:return n.abrupt("break",62);case 60:n.next=37;break;case 62:if(f=null,h=null,null!=u){n.next=67;break}return n.delegateYield(this.getOperation(r.parent),"t12",66);case 66:u=n.t12;case 67:if(null==r.left){n.next=75;break}return n.delegateYield(this.getInsertion(r.left),"t13",69);case 69:return f=n.t13,r.right=f.right,f.right=r.id,n.delegateYield(this.setOperation(f),"t14",73);case 73:n.next=76;break;case 75:r.right=r.parentSub?u.map[r.parentSub]||null:u.start;case 76:if(null==r.right){n.next=86;break}return n.delegateYield(this.getOperation(r.right),"t15",78);case 78:if(h=n.t15,h.left=e.utils.getLastId(r),null==h.gc){n.next=85;break}if(!(null!=h.content&&h.content.length>1)){n.next=84;break}return n.delegateYield(this.getInsertionCleanEnd(h.id),"t16",83);case 83:h=n.t16;case 84:this.store.removeFromGarbageCollector(h);case 85:return n.delegateYield(this.setOperation(h),"t17",86);case 86:if(null==r.parentSub){n.next=96;break}if(null!=f){n.next=90;break}return u.map[r.parentSub]=r.id,n.delegateYield(this.setOperation(u),"t18",90);case 90:if(null==r.right){n.next=92;break}return n.delegateYield(this.deleteOperation(r.right,1,!0),"t19",92);case 92:if(null==r.left){n.next=94;break}return n.delegateYield(this.deleteOperation(r.id,1,!0),"t20",94);case 94:n.next=100;break;case 96:if(null!=h&&null!=f){n.next=100;break}return null==h&&(u.end=e.utils.getLastId(r)),null==f&&(u.start=r.id),n.delegateYield(this.setOperation(u),"t21",100);case 100:i=0;case 101:if(!(i<o.length)){n.next=108;break}return n.delegateYield(this.getOperation(o[i]),"t22",103);case 103:return g=n.t22,n.delegateYield(this.tryCombineWithLeft(g),"t23",105);case 105:i++,n.next=101;break;case 108:case"end":return n.stop()}},n,this)})},List:{create:function(e){return{start:null,end:null,struct:"List",id:e}},encode:function(e){var t={struct:"List",id:e.id,type:e.type};return null!=e.requires&&(t.requires=e.requires),null!=e.info&&(t.info=e.info),t},requiredOps:function(){return[]},execute:regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.start=null,t.end=null;case 2:case"end":return e.stop()}},e,this)}),ref:regeneratorRuntime.mark(function e(t,n){var r,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=t.start){e.next=2;break}return e.abrupt("return",null);case 2:return r=null,e.delegateYield(this.getOperation(t.start),"t0",4);case 4:i=e.t0;case 5:if(i.deleted||(r=i,n--),!(n>=0&&null!=i.right)){e.next=12;break}return e.delegateYield(this.getOperation(i.right),"t1",9);case 9:i=e.t1,e.next=13;break;case 12:return e.abrupt("break",15);case 13:e.next=5;break;case 15:return e.abrupt("return",r);case 16:case"end":return e.stop()}},e,this)}),map:regeneratorRuntime.mark(function e(t,n){var r,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=t.start,r=[];case 2:if(null==t){e.next=9;break}return e.delegateYield(this.getOperation(t),"t0",4);case 4:i=e.t0,i.deleted||r.push(n(i)),t=i.right,e.next=2;break;case 9:return e.abrupt("return",r);case 10:case"end":return e.stop()}},e,this)})},Map:{create:function(e){return{id:e,map:{},struct:"Map"}},encode:function(e){var t={struct:"Map",type:e.type,id:e.id,map:{}};return null!=e.requires&&(t.requires=e.requires),null!=e.info&&(t.info=e.info),t},requiredOps:function(){return[]},execute:regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,this)}),get:regeneratorRuntime.mark(function e(t,n){var r,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null==(r=t.map[n])){e.next=14;break}return e.delegateYield(this.getOperation(r),"t0",3);case 3:if(null!=(i=e.t0)&&!i.deleted){e.next=8;break}return e.abrupt("return",void 0);case 8:if(null!=i.opContent){e.next=12;break}return e.abrupt("return",i.content[0]);case 12:return e.delegateYield(this.getType(i.opContent),"t1",13);case 13:return e.abrupt("return",e.t1);case 14:case"end":return e.stop()}},e,this)})}};e.Struct=t}},{}],11:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();t.exports=function(e){var t=function(){function t(){r(this,t)}return i(t,[{key:"applyCreatedOperations",value:regeneratorRuntime.mark(function t(n){var r,i,o;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:r=[],i=0;case 2:if(!(i<n.length)){t.next=9;break}return o=n[i],t.delegateYield(this.store.tryExecute.call(this,o),"t0",5);case 5:null!=o.id&&"string"==typeof o.id[1]||r.push(e.Struct[o.struct].encode(o));case 6:i++,t.next=2;break;case 9:r.length>0&&this.store.y.connector.broadcastOps(r);case 10:case"end":return t.stop()}},t,this)})},{key:"deleteList",value:regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null==t){e.next=15;break}return e.delegateYield(this.getOperation(t),"t0",2);case 2:if(t=e.t0,t.gc){e.next=12;break}return t.gc=!0,t.deleted=!0,e.delegateYield(this.setOperation(t),"t1",7);case 7:return n=null!=t.content?t.content.length:1,e.delegateYield(this.markDeleted(t.id,n),"t2",9);case 9:if(null==t.opContent){e.next=11;break}return e.delegateYield(this.deleteOperation(t.opContent),"t3",11);case 11:this.store.queueGarbageCollector(t.id);case 12:t=t.right,e.next=0;break;case 15:case"end":return e.stop()}},e,this)})},{key:"deleteOperation",value:regeneratorRuntime.mark(function e(t,n,r){var i,o,a,s,c,u,l;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return null==n&&(n=1),e.delegateYield(this.markDeleted(t,n),"t0",2);case 2:if(!(n>0)){e.next=64;break}return i=!1,e.delegateYield(this.os.findWithUpperBound([t[0],t[1]+n-1]),"t1",5);case 5:if(o=e.t1,a=null!=o&&null!=o.content?o.content.length:1,!(null==o||o.id[0]!==t[0]||o.id[1]+a<=t[1])){e.next=12;break}o=null,n=0,e.next=22;break;case 12:if(o.deleted){e.next=21;break}if(!(o.id[1]<t[1])){e.next=17;break}return e.delegateYield(this.getInsertionCleanStart(t),"t2",15);case 15:o=e.t2,a=o.content.length;case 17:if(!(o.id[1]+a>t[1]+n)){e.next=21;break}return e.delegateYield(this.getInsertionCleanEnd([t[0],t[1]+n-1]),"t3",19);case 19:o=e.t3,a=o.content.length;case 21:n=o.id[1]-t[1];case 22:if(null==o){e.next=62;break}if(o.deleted){e.next=44;break}if(i=!0,o.deleted=!0,null==o.start){e.next=28;break}return e.delegateYield(this.deleteList(o.start),"t4",28);case 28:if(null==o.map){e.next=35;break}e.t5=regeneratorRuntime.keys(o.map);case 30:if((e.t6=e.t5()).done){e.next=35;break}return s=e.t6.value,e.delegateYield(this.deleteList(o.map[s]),"t7",33);case 33:e.next=30;break;case 35:if(null==o.opContent){e.next=37;break}return e.delegateYield(this.deleteOperation(o.opContent),"t8",37);case 37:if(null==o.requires){e.next=44;break}c=0;case 39:if(!(c<o.requires.length)){e.next=44;break}return e.delegateYield(this.deleteOperation(o.requires[c]),"t9",41);case 41:c++,e.next=39;break;case 44:if(null==o.left){e.next=49;break}return e.delegateYield(this.getInsertion(o.left),"t10",46);case 46:u=e.t10,e.next=50;break;case 49:u=null;case 50:return e.delegateYield(this.setOperation(o),"t11",51);case 51:if(null==o.right){e.next=56;break}return e.delegateYield(this.getOperation(o.right),"t12",53);case 53:l=e.t12,e.next=57;break;case 56:l=null;case 57:if(!i||r){e.next=59;break}return e.delegateYield(this.store.operationAdded(this,{struct:"Delete",target:o.id,length:a,targetParent:o.parent}),"t13",59);case 59:return e.delegateYield(this.store.addToGarbageCollector.call(this,o,u),"t14",60);case 60:if(null==l){e.next=62;break}return e.delegateYield(this.store.addToGarbageCollector.call(this,l,o),"t15",62);case 62:e.next=2;break;case 64:case"end":return e.stop()}},e,this)})},{key:"markGarbageCollected",value:regeneratorRuntime.mark(function t(n,r){var i,o,a,s;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return this.store.addToDebug("yield* this.markGarbageCollected(",n,", ",r,")"),t.delegateYield(this.markDeleted(n,r),"t0",2);case 2:if(i=t.t0,!(i.id[1]<n[1])||i.gc){t.next=9;break}return o=i.len-(n[1]-i.id[1]),i.len-=o,t.delegateYield(this.ds.put(i),"t1",7);case 7:return i={id:n,len:o,gc:!1},t.delegateYield(this.ds.put(i),"t2",9);case 9:return t.delegateYield(this.ds.findPrev(n),"t3",10);case 10:return a=t.t3,t.delegateYield(this.ds.findNext(n),"t4",12);case 12:if(s=t.t4,!(n[1]+r<i.id[1]+i.len)||i.gc){t.next=16;break}return t.delegateYield(this.ds.put({id:[n[0],n[1]+r],len:i.len-r,gc:!1}),"t5",15);case 15:i.len=r;case 16:if(i.gc=!0,null==a||!a.gc||!e.utils.compareIds([a.id[0],a.id[1]+a.len],i.id)){t.next=21;break}return a.len+=i.len,t.delegateYield(this.ds.delete(i.id),"t6",20);case 20:i=a;case 21:if(null==s||!s.gc||!e.utils.compareIds([i.id[0],i.id[1]+i.len],s.id)){t.next=24;break}return i.len+=s.len,t.delegateYield(this.ds.delete(s.id),"t7",24);case 24:return t.delegateYield(this.ds.put(i),"t8",25);case 25:return t.delegateYield(this.updateState(i.id[0]),"t9",26);case 26:case"end":return t.stop()}},t,this)})},{key:"markDeleted",value:regeneratorRuntime.mark(function e(t,n){var r,i,o,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return null==n&&(n=1),e.delegateYield(this.ds.findWithUpperBound(t),"t0",2);case 2:if(null==(r=e.t0)||r.id[0]!==t[0]){e.next=27;break}if(!(r.id[1]<=t[1]&&t[1]<=r.id[1]+r.len)){e.next=23;break}if(!((i=t[1]+n-(r.id[1]+r.len))>0)){e.next=20;break}if(r.gc){e.next=11;break}r.len+=i,e.next=18;break;case 11:if(!((i=r.id[1]+r.len-t[1])<n)){e.next=17;break}return r={id:[t[0],t[1]+i],len:n-i,gc:!1},e.delegateYield(this.ds.put(r),"t1",15);case 15:e.next=18;break;case 17:throw new Error("Cannot happen! (it dit though.. :()");case 18:e.next=21;break;case 20:return e.abrupt("return",r);case 21:e.next=25;break;case 23:return r={id:t,len:n,gc:!1},e.delegateYield(this.ds.put(r),"t2",25);case 25:e.next=29;break;case 27:return r={id:t,len:n,gc:!1},e.delegateYield(this.ds.put(r),"t3",29);case 29:return e.delegateYield(this.ds.findNext(r.id),"t4",30);case 30:if(!(null!=(o=e.t4)&&r.id[0]===o.id[0]&&r.id[1]+r.len>=o.id[1])){e.next=61;break}i=r.id[1]+r.len-o.id[1];case 33:if(!(i>=0)){e.next=61;break}if(!o.gc){e.next=44;break}if(r.len-=i,!(i>=o.len)){e.next=41;break}if(!((i-=o.len)>0)){e.next=41;break}return e.delegateYield(this.ds.put(r),"t5",40);case 40:return e.delegateYield(this.markDeleted([o.id[0],o.id[1]+o.len],i),"t6",41);case 41:return e.abrupt("break",61);case 44:if(!(i>o.len)){e.next=56;break}return e.delegateYield(this.ds.findNext(o.id),"t7",46);case 46:return a=e.t7,e.delegateYield(this.ds.delete(o.id),"t8",48);case 48:if(null!=a&&r.id[0]===a.id[0]){e.next=52;break}return e.abrupt("break",61);case 52:o=a,i=r.id[1]+r.len-o.id[1];case 54:e.next=59;break;case 56:return r.len+=o.len-i,e.delegateYield(this.ds.delete(o.id),"t9",58);case 58:return e.abrupt("break",61);case 59:e.next=33;break;case 61:return e.delegateYield(this.ds.put(r),"t10",62);case 62:return e.abrupt("return",r);case 63:case"end":return e.stop()}},e,this)})},{key:"garbageCollectAfterSync",value:regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if((this.store.gc1.length>0||this.store.gc2.length>0)&&console.warn("gc should be empty after sync"),this.store.gc){e.next=3;break}return e.abrupt("return");case 3:return e.delegateYield(this.os.iterate(this,null,null,regeneratorRuntime.mark(function e(t){var n,r,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.gc){e.next=3;break}return delete t.gc,e.delegateYield(this.setOperation(t),"t0",3);case 3:if(null==t.parent){e.next=23;break}return e.delegateYield(this.isDeleted(t.parent),"t1",5);case 5:if(!(n=e.t1)){e.next=23;break}if(t.gc=!0,t.deleted){e.next=20;break}return e.delegateYield(this.markDeleted(t.id,null!=t.content?t.content.length:1),"t2",10);case 10:if(t.deleted=!0,null==t.opContent){e.next=13;break}return e.delegateYield(this.deleteOperation(t.opContent),"t3",13);case 13:if(null==t.requires){e.next=20;break}r=0;case 15:if(!(r<t.requires.length)){e.next=20;break}return e.delegateYield(this.deleteOperation(t.requires[r]),"t4",17);case 17:r++,e.next=15;break;case 20:return e.delegateYield(this.setOperation(t),"t5",21);case 21:return this.store.gc1.push(t.id),e.abrupt("return");case 23:if(!t.deleted){e.next=29;break}if(i=null,null==t.left){e.next=28;break}return e.delegateYield(this.getInsertion(t.left),"t6",27);case 27:i=e.t6;case 28:return e.delegateYield(this.store.addToGarbageCollector.call(this,t,i),"t7",29);case 29:case"end":return e.stop()}},e,this)})),"t0",4);case 4:case"end":return e.stop()}},e,this)})},{key:"garbageCollectOperation",value:regeneratorRuntime.mark(function t(n){var r,i,o,a,s,c,u,l,d,p,f,h,g;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return this.store.addToDebug("yield* this.garbageCollectOperation(",n,")"),t.delegateYield(this.getOperation(n),"t0",2);case 2:return r=t.t0,t.delegateYield(this.markGarbageCollected(n,null!=r&&null!=r.content?r.content.length:1),"t1",4);case 4:if(null==r){t.next=74;break}i=[],null!=r.opContent&&i.push(r.opContent),null!=r.requires&&(i=i.concat(r.requires)),o=0;case 9:if(!(o<i.length)){t.next=26;break}return t.delegateYield(this.getOperation(i[o]),"t2",11);case 11:if(null==(a=t.t2)){t.next=22;break}if(a.deleted){t.next=17;break}return t.delegateYield(this.deleteOperation(a.id),"t3",15);case 15:return t.delegateYield(this.getOperation(a.id),"t4",16);case 16:a=t.t4;case 17:return a.gc=!0,t.delegateYield(this.setOperation(a),"t5",19);case 19:this.store.queueGarbageCollector(a.id),t.next=23;break;case 22:return t.delegateYield(this.markGarbageCollected(i[o],1),"t6",23);case 23:o++,t.next=9;break;case 26:if(null==r.left){t.next=31;break}return t.delegateYield(this.getInsertion(r.left),"t7",28);case 28:return s=t.t7,s.right=r.right,t.delegateYield(this.setOperation(s),"t8",31);case 31:if(null==r.right){t.next=60;break}return t.delegateYield(this.getOperation(r.right),"t9",33);case 33:return c=t.t9,c.left=r.left,t.delegateYield(this.setOperation(c),"t10",36);case 36:if(!(null!=r.originOf&&r.originOf.length>0)){t.next=60;break}u=r.left,l=null;case 39:if(null==u){t.next=47;break}return t.delegateYield(this.getInsertion(u),"t11",41);case 41:if(l=t.t11,!l.deleted){t.next=44;break}return t.abrupt("break",47);case 44:u=l.left,t.next=39;break;case 47:t.t12=regeneratorRuntime.keys(r.originOf);case 48:if((t.t13=t.t12()).done){t.next=57;break}return d=t.t13.value,t.delegateYield(this.getOperation(r.originOf[d]),"t14",51);case 51:if(null==(p=t.t14)){t.next=55;break}return p.origin=u,t.delegateYield(this.setOperation(p),"t15",55);case 55:t.next=48;break;case 57:if(null==u){t.next=60;break}return null==l.originOf?l.originOf=r.originOf:l.originOf=r.originOf.concat(l.originOf),t.delegateYield(this.setOperation(l),"t16",60);case 60:if(null==r.origin){t.next=65;break}return t.delegateYield(this.getInsertion(r.origin),"t17",62);case 62:return f=t.t17,f.originOf=f.originOf.filter(function(t){return!e.utils.compareIds(n,t)}),t.delegateYield(this.setOperation(f),"t18",65);case 65:if(null==r.parent){t.next=68;break}return t.delegateYield(this.getOperation(r.parent),"t19",67);case 67:h=t.t19;case 68:if(null==h){t.next=73;break}if(g=!1,null!=r.parentSub?e.utils.compareIds(h.map[r.parentSub],r.id)&&(g=!0,null!=r.right?h.map[r.parentSub]=r.right:delete h.map[r.parentSub]):(e.utils.compareIds(h.start,r.id)&&(g=!0,h.start=r.right),e.utils.matchesId(r,h.end)&&(g=!0,h.end=r.left)),!g){t.next=73;break}return t.delegateYield(this.setOperation(h),"t20",73);case 73:return t.delegateYield(this.removeOperation(r.id),"t21",74);case 74:case"end":return t.stop()}},t,this)})},{key:"checkDeleteStoreForState",value:regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.delegateYield(this.ds.findWithUpperBound([t.user,t.clock]),"t0",1);case 1:null!=(n=e.t0)&&n.id[0]===t.user&&n.gc&&(t.clock=Math.max(t.clock,n.id[1]+n.len));case 3:case"end":return e.stop()}},e,this)})},{key:"updateState",value:regeneratorRuntime.mark(function e(t){var n,r,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.delegateYield(this.getState(t),"t0",1);case 1:return n=e.t0,e.delegateYield(this.checkDeleteStoreForState(n),"t1",3);case 3:return e.delegateYield(this.getInsertion([t,n.clock]),"t2",4);case 4:r=e.t2,i=null!=r&&null!=r.content?r.content.length:1;case 6:if(!(null!=r&&t===r.id[0]&&r.id[1]<=n.clock&&r.id[1]+i>n.clock)){e.next=14;break}return n.clock+=i,e.delegateYield(this.checkDeleteStoreForState(n),"t3",9);case 9:return e.delegateYield(this.os.findNext(r.id),"t4",10);case 10:r=e.t4,i=null!=r&&null!=r.content?r.content.length:1,e.next=6;break;case 14:return e.delegateYield(this.setState(n),"t5",15);case 15:case"end":return e.stop()}},e,this)})},{key:"applyDeleteSet",value:regeneratorRuntime.mark(function e(t){var n,r,i,o,a,s,c,u,l,d,p;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=[],e.t0=regeneratorRuntime.keys(t);case 2:if((e.t1=e.t0()).done){e.next=11;break}return r=e.t1.value,i=t[r],o=0,a=i[o],e.delegateYield(this.ds.iterate(this,[r,0],[r,Number.MAX_VALUE],regeneratorRuntime.mark(function e(t){var s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null==a){e.next=10;break}if(s=0,!(t.id[1]+t.len<=a[0])){e.next=6;break}return e.abrupt("break",10);case 6:a[0]<t.id[1]?(s=Math.min(t.id[1]-a[0],a[1]),n.push([r,a[0],s,a[2]])):(s=t.id[1]+t.len-a[0],a[2]&&!t.gc&&n.push([r,a[0],Math.min(s,a[1]),a[2]]));case 7:a[1]<=s?a=i[++o]:(a[0]=a[0]+s,a[1]=a[1]-s),e.next=0;break;case 10:case"end":return e.stop()}},e,this)})),"t2",8);case 8:for(;o<i.length;o++)a=i[o],n.push([r,a[0],a[1],a[2]]);e.next=2;break;case 11:s=0;case 12:if(!(s<n.length)){e.next=40;break}return c=n[s],e.delegateYield(this.deleteOperation([c[0],c[1]],c[2]),"t3",15);case 15:if(!c[3]){e.next=36;break}return e.delegateYield(this.markGarbageCollected([c[0],c[1]],c[2]),"t4",17);case 17:u=c[1]+c[2];case 18:if(!(u>=c[1])){e.next=36;break}return e.delegateYield(this.os.findWithUpperBound([c[0],u-1]),"t5",20);case 20:if(null!=(l=e.t5)){e.next=23;break}return e.abrupt("break",36);case 23:if(d=null!=l.content?l.content.length:1,!(l.id[0]!==c[0]||l.id[1]+d<=c[1])){e.next=26;break}return e.abrupt("break",36);case 26:if(!(l.id[1]+d>c[1]+c[2])){e.next=29;break}return e.delegateYield(this.getInsertionCleanEnd([c[0],c[1]+c[2]-1]),"t6",28);case 28:l=e.t6;case 29:if(!(l.id[1]<c[1])){e.next=32;break}return e.delegateYield(this.getInsertionCleanStart([c[0],c[1]]),"t7",31);case 31:l=e.t7;case 32:return u=l.id[1],e.delegateYield(this.garbageCollectOperation(l.id),"t8",34);case 34:e.next=18;break;case 36:this.store.forwardAppliedOperations&&(p=[],p.push({struct:"Delete",target:[c[0],c[1]],length:c[2]}),this.store.y.connector.broadcastOps(p));case 37:s++,e.next=12;break;case 40:case"end":return e.stop()}},e,this)})},{key:"isGarbageCollected",value:regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.delegateYield(this.ds.findWithUpperBound(t),"t0",1);case 1:return n=e.t0,e.abrupt("return",null!=n&&n.id[0]===t[0]&&t[1]<n.id[1]+n.len&&n.gc);case 3:case"end":return e.stop()}},e,this)})},{key:"getDeleteSet",value:regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t={},e.delegateYield(this.ds.iterate(this,null,null,regeneratorRuntime.mark(function e(n){var r,i,o,a,s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r=n.id[0],i=n.id[1],o=n.len,a=n.gc,s=t[r],void 0===s&&(s=[],t[r]=s),s.push([i,o,a]);case 7:case"end":return e.stop()}},e,this)})),"t0",2);case 2:return e.abrupt("return",t);case 3:case"end":return e.stop()}},e,this)})},{key:"isDeleted",value:regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.delegateYield(this.ds.findWithUpperBound(t),"t0",1);case 1:return n=e.t0,e.abrupt("return",null!=n&&n.id[0]===t[0]&&t[1]<n.id[1]+n.len);case 3:case"end":return e.stop()}},e,this)})},{key:"setOperation",value:regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.delegateYield(this.os.put(t),"t0",1);case 1:return e.abrupt("return",t);case 2:case"end":return e.stop()}},e,this)})},{key:"addOperation",value:regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.delegateYield(this.os.put(t),"t0",1);case 1:this.store.forwardAppliedOperations&&"string"!=typeof t.id[1]&&this.store.y.connector.broadcastOps([t]);case 2:case"end":return e.stop()}},e,this)})},{key:"tryCombineWithLeft",value:regeneratorRuntime.mark(function t(n){var r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(null==n||null==n.left||null==n.content||n.left[0]!==n.id[0]||!e.utils.compareIds(n.left,n.origin)){t.next=9;break}return t.delegateYield(this.getInsertion(n.left),"t0",2);case 2:if(r=t.t0,null==r.content||r.id[1]+r.content.length!==n.id[1]||1!==r.originOf.length||r.gc||r.deleted||n.gc||n.deleted){t.next=9;break}return null!=n.originOf?r.originOf=n.originOf:delete r.originOf,r.content=r.content.concat(n.content),r.right=n.right,t.delegateYield(this.os.delete(n.id),"t1",8);case 8:return t.delegateYield(this.setOperation(r),"t2",9);case 9:case"end":return t.stop()}},t,this)})},{key:"getInsertion",value:regeneratorRuntime.mark(function e(t){var n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.delegateYield(this.os.findWithUpperBound(t),"t0",1);case 1:if(null!=(n=e.t0)){e.next=6;break}return e.abrupt("return",null);case 6:if(r=null!=n.content?n.content.length:1,!(t[0]===n.id[0]&&t[1]<n.id[1]+r)){e.next=11;break}return e.abrupt("return",n);case 11:return e.abrupt("return",null);case 12:case"end":return e.stop()}},e,this)})},{key:"getInsertionCleanStartEnd",value:regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.delegateYield(this.getInsertionCleanStart(t),"t0",1);case 1:return e.delegateYield(this.getInsertionCleanEnd(t),"t1",2);case 2:return e.abrupt("return",e.t1);case 3:case"end":return e.stop()}},e,this)})},{key:"getInsertionCleanStart",value:regeneratorRuntime.mark(function t(n){var r,i,o;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.delegateYield(this.getInsertion(n),"t0",1);case 1:if(null==(r=t.t0)){t.next=21;break}if(r.id[1]!==n[1]){t.next=7;break}return t.abrupt("return",r);case 7:return i=e.utils.copyObject(r),r.content=i.content.splice(n[1]-r.id[1]),r.id=n,o=e.utils.getLastId(i),r.origin=o,i.originOf=[r.id],i.right=r.id,r.left=o,t.delegateYield(this.setOperation(i),"t1",16);case 16:return t.delegateYield(this.setOperation(r),"t2",17);case 17:return i.gc&&this.store.queueGarbageCollector(r.id),t.abrupt("return",r);case 19:t.next=22;break;case 21:return t.abrupt("return",null);case 22:case"end":return t.stop()}},t,this)})},{key:"getInsertionCleanEnd",value:regeneratorRuntime.mark(function t(n){var r,i,o;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.delegateYield(this.getInsertion(n),"t0",1);case 1:if(null==(r=t.t0)){t.next=21;break}if(null!=r.content&&r.id[1]+r.content.length-1!==n[1]){t.next=7;break}return t.abrupt("return",r);case 7:return i=e.utils.copyObject(r),i.content=r.content.splice(n[1]-r.id[1]+1),i.id=[n[0],n[1]+1],o=e.utils.getLastId(r),i.origin=o,r.originOf=[i.id],r.right=i.id,i.left=o,t.delegateYield(this.setOperation(i),"t1",16);case 16:return t.delegateYield(this.setOperation(r),"t2",17);case 17:return r.gc&&this.store.queueGarbageCollector(i.id),t.abrupt("return",r);case 19:t.next=22;break;case 21:return t.abrupt("return",null);case 22:case"end":return t.stop()}},t,this)})},{key:"getOperation",value:regeneratorRuntime.mark(function t(n){var r,i,o,a;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.delegateYield(this.os.find(n),"t0",1);case 1:if(r=t.t0,"_"===n[0]&&null==r){t.next=6;break}return t.abrupt("return",r);case 6:if(i=n[1].split("_"),!(i.length>1)){t.next=15;break}return o=i[0],a=e.Struct[o].create(n),a.type=i[1],t.delegateYield(this.setOperation(a),"t1",12);case 12:return t.abrupt("return",a);case 15:return console.error("Unexpected case. How can this happen?"),t.abrupt("return",null);case 18:case"end":return t.stop()}},t,this)})},{key:"removeOperation",value:regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.delegateYield(this.os.delete(t),"t0",1);case 1:case"end":return e.stop()}},e,this)})},{key:"setState",value:regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n={id:[t.user],clock:t.clock},e.delegateYield(this.ss.put(n),"t0",2);case 2:case"end":return e.stop()}},e,this)})},{key:"getState",value:regeneratorRuntime.mark(function e(t){var n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.delegateYield(this.ss.find([t]),"t0",1);case 1:return n=e.t0,r=null==n?null:n.clock,null==r&&(r=0),e.abrupt("return",{user:t,clock:r});case 5:case"end":return e.stop()}},e,this)})},{key:"getStateVector",value:regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],e.delegateYield(this.ss.iterate(this,null,null,regeneratorRuntime.mark(function e(n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.push({user:n.id[0],clock:n.clock});case 1:case"end":return e.stop()}},e,this)})),"t0",2);case 2:return e.abrupt("return",t);case 3:case"end":return e.stop()}},e,this)})},{key:"getStateSet",value:regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t={},e.delegateYield(this.ss.iterate(this,null,null,regeneratorRuntime.mark(function e(n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t[n.id[0]]=n.clock;case 1:case"end":return e.stop()}},e,this)})),"t0",2);case 2:return e.abrupt("return",t);case 3:case"end":return e.stop()}},e,this)})},{key:"getOperations",value:regeneratorRuntime.mark(function t(n){var r,i,o,a,s,c,u,l,d,p,f;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return null==n&&(n={}),r=[],t.delegateYield(this.getStateVector(),"t0",3);case 3:i=t.t0,o=!0,a=!1,s=void 0,t.prev=7,c=i[Symbol.iterator]();case 9:if(o=(u=c.next()).done){t.next=23;break}if(l=u.value,"_"!==(d=l.user)){t.next=14;break}return t.abrupt("continue",20);case 14:if(!((p=n[d]||0)>0)){t.next=19;break}return t.delegateYield(this.getInsertion([d,p]),"t1",17);case 17:null!=(f=t.t1)&&(p=f.id[1],n[d]=p);case 19:return t.delegateYield(this.os.iterate(this,[d,p],[d,Number.MAX_VALUE],regeneratorRuntime.mark(function t(i){var o,a,s,c;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(i=e.Struct[i.struct].encode(i),"Insert"===i.struct){t.next=5;break}r.push(i),t.next=27;break;case 5:if(!(null==i.right||i.right[1]<(n[i.right[0]]||0))){t.next=27;break}o=i,a=[i],s=i.right;case 9:if(null!=o.left){t.next=15;break}return i.left=null,r.push(i),e.utils.compareIds(o.id,i.id)||(o=e.Struct[i.struct].encode(o),o.right=a[a.length-1].id,r.push(o)),t.abrupt("break",27);case 15:return t.delegateYield(this.getInsertion(o.left),"t0",16);case 16:for(o=t.t0;a.length>0&&e.utils.matchesId(o,a[a.length-1].origin);)a.pop();if(!(o.id[1]<(n[o.id[0]]||0))){t.next=24;break}return i.left=e.utils.getLastId(o),r.push(i),t.abrupt("break",27);case 24:e.utils.matchesId(o,i.origin)?(i.left=i.origin,r.push(i),i=e.Struct[i.struct].encode(o),i.right=s,a.length>0&&console.log("This should not happen .. :( please report this"),a=[i]):(c=e.Struct[i.struct].encode(o),c.right=a[a.length-1].id,c.left=c.origin,r.push(c),a.push(o));case 25:t.next=9;break;case 27:case"end":return t.stop()}},t,this)})),"t2",20);case 20:o=!0,t.next=9;break;case 23:t.next=29;break;case 25:t.prev=25,t.t3=t.catch(7),a=!0,s=t.t3;case 29:t.prev=29,t.prev=30,!o&&c.return&&c.return();case 32:if(t.prev=32,!a){t.next=35;break}throw s;case 35:return t.finish(32);case 36:return t.finish(29);case 37:return t.abrupt("return",r.reverse());case 38:case"end":return t.stop()}},t,this,[[7,25,29,37],[30,,32,36]])})},{key:"getOperationsUntransformed",value:regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],e.delegateYield(this.os.iterate(this,null,null,regeneratorRuntime.mark(function e(n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:"_"!==n.id[0]&&t.push(n);case 1:case"end":return e.stop()}},e,this)})),"t0",2);case 2:return e.abrupt("return",{untransformed:t});case 3:case"end":return e.stop()}},e,this)})},{key:"applyOperationsUntransformed",value:regeneratorRuntime.mark(function t(n,r){var i,o,a,s,c,u;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:i=n.untransformed,o=0;case 2:if(!(o<i.length)){t.next=23;break}if(a=i[o],null==a.parent||"_"!==a.parent[0]){t.next=19;break}if("Insert"!==a.struct){t.next=19;break}if(null==a.parentSub||null!=a.left){t.next=13;break}return t.delegateYield(this.getOperation(a.parent),"t0",8);case 8:return s=t.t0,s.map[a.parentSub]=a.id,t.delegateYield(this.setOperation(s),"t1",11);case 11:t.next=19;break;case 13:if(null!=a.right&&null!=a.left){t.next=19;break}return t.delegateYield(this.getOperation(a.parent),"t2",15);case 15:return c=t.t2,null==a.right&&(c.end=e.utils.getLastId(a)),null==a.left&&(c.start=a.id),t.delegateYield(this.setOperation(c),"t3",19);case 19:return t.delegateYield(this.os.put(a),"t4",20);case 20:o++,t.next=2;break;case 23:t.t5=regeneratorRuntime.keys(r);case 24:if((t.t6=t.t5()).done){t.next=29;break}return u=t.t6.value,t.delegateYield(this.ss.put({id:[u],clock:r[u]}),"t7",27);case 27:t.next=24;break;case 29:case"end":return t.stop()}},t,this)})},{key:"flush",value:regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.delegateYield(this.os.flush(),"t0",1);case 1:return e.delegateYield(this.ss.flush(),"t1",2);case 2:return e.delegateYield(this.ds.flush(),"t2",3);case 3:case"end":return e.stop()}},e,this)})}]),t}();e.Transaction=t}},{}],12:[function(e,t,n){"use strict";function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;return void 0!==a?a.call(r):void 0},c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();t.exports=function(e){function t(e){var t={};for(var n in e)t[n]=e[n];return t}function n(e){return e=t(e),null!=e.content&&(e.content=e.content.map(function(e){return e})),e}function u(e,t){return e[0]<t[0]||e[0]===t[0]&&(e[1]<t[1]||a(e[1])<a(t[1]))}function l(e,t){return e.target[0]===t[0]&&e.target[1]<=t[1]&&t[1]<e.target[1]+(e.length||1)}function d(e,t){return null==e||null==t?e===t:e[0]===t[0]&&e[1]===t[1]}function p(e,t){return null==t||null==e?t===e:t[0]===e.id[0]?null==e.content?t[1]===e.id[1]:t[1]>=e.id[1]&&t[1]<e.id[1]+e.content.length:void 0}function f(e){return null==e.content||1===e.content.length?e.id:[e.id[0],e.id[1]+e.content.length-1]}function h(e){for(var t=new Array(e),n=0;n<t.length;n++)t[n]={id:[null,null]};return t}function g(e){return function(e){function t(e,n){o(this,t);var i=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return i.writeBuffer=h(5),i.readBuffer=h(10),i}return i(t,e),c(t,[{key:"find",value:regeneratorRuntime.mark(function e(n,r){var i,o,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:i=this.readBuffer.length-1;case 1:if(!(i>=0)){e.next=10;break}if(o=this.readBuffer[i],o.id[1]!==n[1]||o.id[0]!==n[0]){e.next=7;break}for(;i<this.readBuffer.length-1;i++)this.readBuffer[i]=this.readBuffer[i+1];return this.readBuffer[this.readBuffer.length-1]=o,e.abrupt("return",o);case 7:i--,e.next=1;break;case 10:i=this.writeBuffer.length-1;case 11:if(!(i>=0)){e.next=19;break}if(o=this.writeBuffer[i],o.id[1]!==n[1]||o.id[0]!==n[0]){e.next=16;break}return a=o,e.abrupt("break",19);case 16:i--,e.next=11;break;case 19:if(!(i<0&&void 0===r)){e.next=22;break}return e.delegateYield(s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"find",this).call(this,n),"t0",21);case 21:a=e.t0;case 22:if(null!=a){for(i=0;i<this.readBuffer.length-1;i++)this.readBuffer[i]=this.readBuffer[i+1];this.readBuffer[this.readBuffer.length-1]=a}return e.abrupt("return",a);case 24:case"end":return e.stop()}},e,this)})},{key:"put",value:regeneratorRuntime.mark(function e(n){var r,i,o,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r=n.id,i=this.writeBuffer.length-1;case 2:if(!(i>=0)){e.next=11;break}if(o=this.writeBuffer[i],o.id[1]!==r[1]||o.id[0]!==r[0]){e.next=8;break}for(;i<this.writeBuffer.length-1;i++)this.writeBuffer[i]=this.writeBuffer[i+1];return this.writeBuffer[this.writeBuffer.length-1]=n,e.abrupt("break",11);case 8:i--,e.next=2;break;case 11:if(!(i<0)){e.next=17;break}if(a=this.writeBuffer[0],null===a.id[0]){e.next=15;break}return e.delegateYield(s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"put",this).call(this,a),"t0",15);case 15:for(i=0;i<this.writeBuffer.length-1;i++)this.writeBuffer[i]=this.writeBuffer[i+1];this.writeBuffer[this.writeBuffer.length-1]=n;case 17:for(i=0;i<this.readBuffer.length-1;i++)o=this.readBuffer[i+1],o.id[1]===r[1]&&o.id[0]===r[0]?this.readBuffer[i]=n:this.readBuffer[i]=o;this.readBuffer[this.readBuffer.length-1]=n;case 19:case"end":return e.stop()}},e,this)})},{key:"delete",value:regeneratorRuntime.mark(function e(n){var r,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:for(r=0;r<this.readBuffer.length;r++)i=this.readBuffer[r],i.id[1]===n[1]&&i.id[0]===n[0]&&(this.readBuffer[r]={id:[null,null]});return e.delegateYield(this.flush(),"t0",2);case 2:return e.delegateYield(s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"delete",this).call(this,n),"t1",3);case 3:case"end":return e.stop()}},e,this)})},{key:"findWithLowerBound",value:regeneratorRuntime.mark(function e(n){var r,i=arguments;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.delegateYield(this.find(n,!0),"t0",1);case 1:if(null==(r=e.t0)){e.next=6;break}return e.abrupt("return",r);case 6:return e.delegateYield(this.flush(),"t1",7);case 7:return e.delegateYield(s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"findWithLowerBound",this).apply(this,i),"t2",8);case 8:return e.abrupt("return",e.t2);case 9:case"end":return e.stop()}},e,this)})},{key:"findWithUpperBound",value:regeneratorRuntime.mark(function e(n){var r,i=arguments;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.delegateYield(this.find(n,!0),"t0",1);case 1:if(null==(r=e.t0)){e.next=6;break}return e.abrupt("return",r);case 6:return e.delegateYield(this.flush(),"t1",7);case 7:return e.delegateYield(s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"findWithUpperBound",this).apply(this,i),"t2",8);case 8:return e.abrupt("return",e.t2);case 9:case"end":return e.stop()}},e,this)})},{key:"findNext",value:regeneratorRuntime.mark(function e(){var n=arguments;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.delegateYield(this.flush(),"t0",1);case 1:return e.delegateYield(s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"findNext",this).apply(this,n),"t1",2);case 2:return e.abrupt("return",e.t1);case 3:case"end":return e.stop()}},e,this)})},{key:"findPrev",value:regeneratorRuntime.mark(function e(){var n=arguments;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.delegateYield(this.flush(),"t0",1);case 1:return e.delegateYield(s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"findPrev",this).apply(this,n),"t1",2);case 2:return e.abrupt("return",e.t1);case 3:case"end":return e.stop()}},e,this)})},{key:"iterate",value:regeneratorRuntime.mark(function e(){var n=arguments;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.delegateYield(this.flush(),"t0",1);case 1:return e.delegateYield(s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"iterate",this).apply(this,n),"t1",2);case 2:case"end":return e.stop()}},e,this)})},{key:"flush",value:regeneratorRuntime.mark(function e(){var n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=0;case 1:if(!(n<this.writeBuffer.length)){e.next=9;break}if(r=this.writeBuffer[n],null===r.id[0]){e.next=6;break}return e.delegateYield(s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"put",this).call(this,r),"t0",5);case 5:this.writeBuffer[n]={id:[null,null]};case 6:n++,e.next=1;break;case 9:case"end":return e.stop()}},e,this)})}]),t}(e)}function m(e){return e?(e^16*Math.random()>>e/4).toString(16):([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,m)}e.utils={},e.utils.bubbleEvent=function(e,t){for(e.eventHandler.callEventListeners(t),t.path=[];null!=e&&null!=e._deepEventHandler;){e._deepEventHandler.callEventListeners(t);var n=null;null!=e._parent&&(n=e.os.getType(e._parent)),null!=n&&null!=n._getPathToChild?(t.path=[n._getPathToChild(e._model)].concat(t.path),e=n):e=null}};var v=function(){function e(){o(this,e),this.eventListeners=[]}return c(e,[{key:"destroy",value:function(){this.eventListeners=null}},{key:"addEventListener",value:function(e){this.eventListeners.push(e)}},{key:"removeEventListener",value:function(e){this.eventListeners=this.eventListeners.filter(function(t){return e!==t})}},{key:"removeAllEventListeners",value:function(){this.eventListeners=[]}},{key:"callEventListeners",value:function(e){for(var t=0;t<this.eventListeners.length;t++)try{var n={};for(var r in e)n[r]=e[r];this.eventListeners[t](n)}catch(e){console.error('Your observer threw an error. This error was caught so that Yjs still can ensure data consistency! In order to debug this error you have to check "Pause On Caught Exceptions"',e)}}}]),e}();e.utils.EventListenerHandler=v;var y=function(t){function n(e){o(this,n);var t=r(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));return t.waiting=[],t.awaiting=0,t.onevent=e,t}return i(n,t),c(n,[{key:"destroy",value:function(){s(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"destroy",this).call(this),this.waiting=null,this.onevent=null}},{key:"receivedOp",value:function(e){if(this.awaiting<=0)this.onevent(e);else if("Delete"===e.struct){var t=this;null==e.key?function e(n){if(null==n.length)throw new Error("This shouldn't happen! d.length must be defined!");for(var r=0;r<t.waiting.length;r++){var i=t.waiting[r];if("Insert"===i.struct&&i.id[0]===n.target[0]){var o=i.hasOwnProperty("content")?i.content.length:1,a=n.target[1],s=n.target[1]+(n.length||1),c=i.id[1],u=i.id[1]+o;if(u<=a||s<=c)continue;if(c<a){if(a<u){if(u<s){i.content.splice(a-c),n.length=s-u,n.target=[n.target[0],u];continue}if(u===s)return void i.content.splice(a-c);var l={id:[i.id[0],s],content:i.content.slice(s-c),struct:"Insert"};return t.waiting.push(l),void i.content.splice(a-c)}}else{if(a===c){if(u<s){n.length=s-u,n.target=[n.target[0],u],i.content=[];continue}return u===s?void t.waiting.splice(r,1):(i.content=i.content.slice(s-c),void(i.id=[i.id[0],s]))}if(c<s){if(u<s)return t.waiting.splice(r,1),e({target:[n.target[0],a],length:c-a,struct:"Delete"}),void e({target:[n.target[0],u],length:u-s,struct:"Delete"});if(u===s){t.waiting.splice(r,1),r--,n.length-=o;continue}n.length=c-a,i.content.splice(0,s-c),i.id=[i.id[0],s];continue}}}}t.waiting.push(n)}(e):this.waiting.push(e)}else this.waiting.push(e)}},{key:"awaitAndPrematurelyCall",value:function(t){this.awaiting++,t.map(e.utils.copyOperation).forEach(this.onevent)}},{key:"awaitOps",value:regeneratorRuntime.mark(function t(n,r,i){var o,a,s,c,u,l,d,p,f;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return o=function(t){for(var n=[];t.length>0;)for(var r=0;r<t.length;r++){for(var i=!0,o=0;o<t.length;o++)if(e.utils.matchesId(t[o],t[r].left)){i=!1;break}i&&(n.push(t.splice(r,1)[0]),r--)}return n},a=this.waiting.length,t.delegateYield(r.apply(n,i),"t0",3);case 3:if(this.waiting.splice(a),this.awaiting>0&&this.awaiting--,!(0===this.awaiting&&this.waiting.length>0)){t.next=70;break}s=0;case 7:if(!(s<this.waiting.length)){t.next=41;break}if(c=this.waiting[s],"Insert"!==c.struct){t.next=38;break}return t.delegateYield(n.getInsertion(c.id),"t1",11);case 11:if(u=t.t1,null==u.parentSub||null==u.left){t.next=17;break}this.waiting.splice(s,1),s--,t.next=38;break;case 17:if(e.utils.compareIds(u.id,c.id)){t.next=21;break}c.left=[c.id[0],c.id[1]-1],t.next=38;break;case 21:if(null!=u.left){t.next=25;break}c.left=null,t.next=38;break;case 25:return t.delegateYield(n.getInsertion(u.left),"t2",26);case 26:l=t.t2;case 27:if(null==l.deleted){t.next=37;break}if(null==l.left){t.next=33;break}return t.delegateYield(n.getInsertion(l.left),"t3",30);case 30:l=t.t3,t.next=35;break;case 33:return l=null,t.abrupt("break",37);case 35:t.next=27;break;case 37:c.left=null!=l?e.utils.getLastId(l):null;case 38:s++,t.next=7;break;case 41:if(null!=this._pullChanges&&this._pullChanges(),0!==this.awaiting){t.next=70;break}d=[],p=[],this.waiting.forEach(function(e){"Delete"===e.struct?p.push(e):d.push(e)}),this.waiting=[],d=o(d),f=0;case 49:if(!(f<d.length)){t.next=59;break}if(0!==this.awaiting){t.next=54;break}this.onevent(d[f]),t.next=56;break;case 54:return this.waiting=this.waiting.concat(d.slice(f)),t.abrupt("break",59);case 56:f++,t.next=49;break;case 59:f=0;case 60:if(!(f<p.length)){t.next=70;break}if(0!==this.awaiting){t.next=65;break}this.onevent(p[f]),t.next=67;break;case 65:return this.waiting=this.waiting.concat(p.slice(f)),t.abrupt("break",70);case 67:f++,t.next=60;break;case 70:case"end":return t.stop()}},t,this)})},{key:"awaitedInserts",value:function(t){for(var n=this.waiting.splice(this.waiting.length-t),r=0;r<n.length;r++){var i=n[r];if("Insert"!==i.struct)throw new Error("Expected Insert Operation!");for(var o=this.waiting.length-1;o>=0;o--){var a=this.waiting[o];"Insert"===a.struct&&(e.utils.matchesId(a,i.left)?(a.right=i.id,i.left=a.left):e.utils.compareIds(a.id,i.right)&&(a.left=e.utils.getLastId(i),i.right=a.right))}}this._tryCallEvents(t)}},{key:"awaitedDeletes",value:function(t,n){for(var r=this.waiting.splice(this.waiting.length-t),i=0;i<r.length;i++){var o=r[i];if("Delete"!==o.struct)throw new Error("Expected Delete Operation!");if(null!=n)for(var a=0;a<this.waiting.length;a++){var s=this.waiting[a];"Insert"===s.struct&&e.utils.compareIds(o.target,s.left)&&(s.left=n)}}this._tryCallEvents(t)}},{key:"_tryCallEvents",value:function(){if(this.awaiting>0&&this.awaiting--,0===this.awaiting&&this.waiting.length>0){var t=[],n=[];this.waiting.forEach(function(e){"Delete"===e.struct?n.push(e):t.push(e)}),t=function(t){for(var n=[];t.length>0;)for(var r=0;r<t.length;r++){for(var i=!0,o=0;o<t.length;o++)if(e.utils.matchesId(t[o],t[r].left)){i=!1;break}i&&(n.push(t.splice(r,1)[0]),r--)}return n}(t),t.forEach(this.onevent),n.forEach(this.onevent),this.waiting=[]}}}]),n}(v);e.utils.EventHandler=y;var b=function(){function e(){o(this,e)}return c(e,[{key:"getPath",value:function(){var e=null;if(null!=this._parent&&(e=this.os.getType(this._parent)),null!=e&&null!=e._getPathToChild){var t=e._getPathToChild(this._model),n=e.getPath();return n.push(t),n}return[]}}]),e}();e.utils.CustomType=b;var w=function e(t){if(o(this,e),null==t.struct||null==t.initType||null==t.class||null==t.name||null==t.createType)throw new Error("Custom type was not initialized correctly!");this.struct=t.struct,this.initType=t.initType,this.createType=t.createType,this.class=t.class,this.name=t.name,null!=t.appendAdditionalInfo&&(this.appendAdditionalInfo=t.appendAdditionalInfo),this.parseArguments=(t.parseArguments||function(){return[this]}).bind(this),this.parseArguments.typeDefinition=this};e.utils.CustomTypeDefinition=w,e.utils.isTypeDefinition=function(t){if(null!=t){if(t instanceof e.utils.CustomTypeDefinition)return[t];if(t.constructor===Array&&t[0]instanceof e.utils.CustomTypeDefinition)return t;if(t instanceof Function&&t.typeDefinition instanceof e.utils.CustomTypeDefinition)return[t.typeDefinition]}return!1},e.utils.copyObject=t,e.utils.copyOperation=n,e.utils.smaller=u,e.utils.inDeletionRange=l,e.utils.compareIds=d,e.utils.matchesId=p,e.utils.getLastId=f,e.utils.createSmallLookupBuffer=g,e.utils.generateGuid=m}},{}],13:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(t){var n;n=null===o.sourceDir?null:o.sourceDir||"/bower_components";for(var r="undefined"!=typeof regeneratorRuntime?".js":".es6",i=[],a=0;a<t.length;a++){var c=t[a].split("(")[0],u="y-"+c.toLowerCase();if(null==o[c])if(null==s[c])if("undefined"!=typeof window&&"undefined"!==window.Y){var l;!function(){null!=n&&(l=document.createElement("script"),l.src=n+"/"+u+"/"+u+r,document.head.appendChild(l));var e={};s[c]=e,e.promise=new Promise(function(t){e.resolve=t}),i.push(e.promise)}()}else console.info("YJS: Please do not depend on automatic requiring of modules anymore! Extend modules as follows `require('y-modulename')(Y)`"),e(u)(o);else i.push(s[t[a]].promise)}return Promise.all(i)}function o(e){e.hasOwnProperty("sourceDir")&&(o.sourceDir=e.sourceDir),e.types=null!=e.types?e.types:[];var t=[e.db.name,e.connector.name].concat(e.types);for(var n in e.share)t.push(e.share[n]);return new Promise(function(n,r){null==e?r("An options object is expected! "):null==e.connector?r("You must specify a connector! (missing connector property)"):null==e.connector.name?r("You must specify connector name! (missing connector.name property)"):null==e.db?r("You must specify a database! (missing db property)"):null==e.connector.name?r("You must specify db name! (missing db.name property)"):(e=o.utils.copyObject(e),e.connector=o.utils.copyObject(e.connector),e.db=o.utils.copyObject(e.db),e.share=o.utils.copyObject(e.share),setTimeout(function(){o.requestModules(t).then(function(){var t=new c(e);t.db.whenUserIdSet(function(){t.init(function(){n(t)})})}).catch(r)},0))})}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();e("./Connector.js")(o),e("./Database.js")(o),e("./Transaction.js")(o),e("./Struct.js")(o),e("./Utils.js")(o),e("./Connectors/Test.js")(o),o.debug=e("debug");var s={};t.exports=o,o.requiringModules=s,o.extend=function(e,t){if(2===arguments.length&&"string"==typeof e)t instanceof o.utils.CustomTypeDefinition?o[e]=t.parseArguments:o[e]=t,null!=s[e]&&(s[e].resolve(),delete s[e]);else for(var n=0;n<arguments.length;n++){var r=arguments[n];if("function"!=typeof r)throw new Error("Expected function!");r(o)}},o.requestModules=i;var c=function(){function e(t,n){r(this,e),this.options=t,this.db=new o[t.db.name](this,t.db),this.connector=new o[t.connector.name](this,t.connector),this.connected=!0}return a(e,[{key:"init",value:function(e){var t=this.options,n={};this.share=n,this.db.requestTransaction(regeneratorRuntime.mark(function r(){var i,a,s,c,u,l,d;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:r.t0=regeneratorRuntime.keys(t.share);case 1:if((r.t1=r.t0()).done){r.next=26;break}if(i=r.t1.value,a=t.share[i].split("("),s=a.splice(0,1),c=o[s],u=c.typeDefinition,l=["_",u.struct+"_"+s+"_"+i+"_"+a],d=[],1!==a.length){r.next=22;break}r.prev=10,d=JSON.parse("["+a[0].split(")")[0]+"]"),r.next=17;break;case 14:throw r.prev=14,r.t2=r.catch(10),new Error("Was not able to parse type definition! (share."+i+")");case 17:if(null!=c.typeDefinition.parseArguments){r.next=21;break}throw new Error(s+" does not expect arguments!");case 21:d=u.parseArguments(d[0])[1];case 22:return r.delegateYield(this.store.initType.call(this,l,d),"t3",23);case 23:n[i]=r.t3,r.next=1;break;case 26:this.store.whenTransactionsFinished().then(e);case 27:case"end":return r.stop()}},r,this,[[10,14]])}))}},{key:"isConnected",value:function(){return this.connector.isSynced}},{key:"disconnect",value:function(){return this.connected?(this.connected=!1,this.connector.disconnect()):Promise.resolve()}},{key:"reconnect",value:function(){return this.connected?Promise.resolve():(this.connected=!0,this.connector.reconnect())}},{key:"destroy",value:function(){var e=this;return this.close().then(function(){return null!=e.db.deleteDB?e.db.deleteDB():Promise.resolve()})}},{key:"close",value:function(){var e=this;return this.share=null,null!=this.connector.destroy?this.connector.destroy():this.connector.disconnect(),this.db.whenTransactionsFinished(function(){return this.db.destroyTypes(),this.db.requestTransaction(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.delegateYield(e.db.destroy(),"t0",1);case 1:case"end":return t.stop()}},t,this)})),this.db.whenTransactionsFinished()})}}]),e}()},{"./Connector.js":7,"./Connectors/Test.js":8,"./Database.js":9,"./Struct.js":10,"./Transaction.js":11,"./Utils.js":12,debug:1}]},{},[6,13])(13)})}).call(t,n(1))},function(e,t,n){var r,r;!function(t){e.exports=t()}(function(){return function e(t,n,i){function o(s,c){if(!n[s]){if(!t[s]){var u="function"==typeof r&&r;if(!c&&u)return r(s,!0);if(a)return a(s,!0);var l=new Error("Cannot find module '"+s+"'");throw l.code="MODULE_NOT_FOUND",l}var d=n[s]={exports:{}};t[s][0].call(d.exports,function(e){return o(t[s][1][e]||e)},d,d.exports,e,t,n,i)}return n[s].exports}for(var a="function"==typeof r&&r,s=0;s<i.length;s++)o(i[s]);return o}({1:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(t){e("./RedBlackTree.js")(t);var n=function(e){function t(e){r(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.store=e,n.ss=e.ss,n.os=e.os,n.ds=e.ds,n}return o(t,e),t}(t.Transaction),a=t.utils.RBTree,u=t.utils.createSmallLookupBuffer(a),l=function(e){function t(e,n){r(this,t);var o=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return o.os=new u,o.ds=new a,o.ss=new u,o}return o(t,e),s(t,[{key:"logTable",value:function(){this.requestTransaction(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("User: ",this.store.y.connector.userId,"=============================="),e.t0=console,e.delegateYield(this.getStateSet(),"t1",3);case 3:return e.t2=e.t1,e.t0.log.call(e.t0,"State Set (SS):",e.t2),console.log("Operation Store (OS):"),e.delegateYield(this.os.logTable(),"t3",7);case 7:return console.log("Deletion Store (DS):"),e.delegateYield(this.ds.logTable(),"t4",9);case 9:(this.store.gc1.length>0||this.store.gc2.length>0)&&console.warn("GC1|2 not empty!",this.store.gc1,this.store.gc2),"{}"!==JSON.stringify(this.store.listenersById)&&console.warn("listenersById not empty!"),"[]"!==JSON.stringify(this.store.listenersByIdExecuteNow)&&console.warn("listenersByIdExecuteNow not empty!"),this.store.transactionInProgress&&console.warn("Transaction still in progress!");case 13:case"end":return e.stop()}},e,this)}),!0)}},{key:"transact",value:function(e){for(var t=new n(this);null!==e;){for(var r=e.call(t),i=r.next();!i.done;)i=r.next(i.value);e=this.getNextRequest()}}},{key:"destroy",value:regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.delegateYield(c(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destroy",this).call(this),"t0",1);case 1:delete this.os,delete this.ss,delete this.ds;case 4:case"end":return e.stop()}},e,this)})}]),t}(t.AbstractDatabase);t.extend("memory",l)}var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;return void 0!==a?a.call(r):void 0};t.exports=a,"undefined"!=typeof Y&&a(Y)},{"./RedBlackTree.js":2}],2:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();t.exports=function(e){var t=function(){function e(t){if(r(this,e),this.val=t,this.color=!0,this._left=null,this._right=null,this._parent=null,null===t.id)throw new Error("You must define id!")}return o(e,[{key:"isRed",value:function(){return this.color}},{key:"isBlack",value:function(){return!this.color}},{key:"redden",value:function(){return this.color=!0,this}},{key:"blacken",value:function(){return this.color=!1,this}},{key:"rotateLeft",value:function(e){var t=this.parent,n=this.right,r=this.right.left;if(n.left=this,this.right=r,null===t)e.root=n,n._parent=null;else if(t.left===this)t.left=n;else{if(t.right!==this)throw new Error("The elements are wrongly connected!");t.right=n}}},{key:"next",value:function(){if(null!==this.right){for(var e=this.right;null!==e.left;)e=e.left;return e}for(var t=this;null!==t.parent&&t!==t.parent.left;)t=t.parent;return t.parent}},{key:"prev",value:function(){if(null!==this.left){for(var e=this.left;null!==e.right;)e=e.right;return e}for(var t=this;null!==t.parent&&t!==t.parent.right;)t=t.parent;return t.parent}},{key:"rotateRight",value:function(e){var t=this.parent,n=this.left,r=this.left.right;if(n.right=this,this.left=r,null===t)e.root=n,n._parent=null;else if(t.left===this)t.left=n;else{if(t.right!==this)throw new Error("The elements are wrongly connected!");t.right=n}}},{key:"getUncle",value:function(){return this.parent===this.parent.parent.left?this.parent.parent.right:this.parent.parent.left}},{key:"grandparent",get:function(){return this.parent.parent}},{key:"parent",get:function(){return this._parent}},{key:"sibling",get:function(){return this===this.parent.left?this.parent.right:this.parent.left}},{key:"left",get:function(){return this._left},set:function(e){null!==e&&(e._parent=this),this._left=e}},{key:"right",get:function(){return this._right},set:function(e){null!==e&&(e._parent=this),this._right=e}}]),e}(),n=function(){function n(){r(this,n),this.root=null,this.length=0}return o(n,[{key:"findNext",value:regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.delegateYield(this.findWithLowerBound([t[0],t[1]+1]),"t0",1);case 1:return e.abrupt("return",e.t0);case 2:case"end":return e.stop()}},e,this)})},{key:"findPrev",value:regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.delegateYield(this.findWithUpperBound([t[0],t[1]-1]),"t0",1);case 1:return e.abrupt("return",e.t0);case 2:case"end":return e.stop()}},e,this)})},{key:"findNodeWithLowerBound",value:function(t){if(void 0===t)throw new Error("You must define from!");var n=this.root;if(null===n)return null;for(;;)if(null!==t&&!e.utils.smaller(t,n.val.id)||null===n.left){if(null===t||!e.utils.smaller(n.val.id,t))return n;if(null===n.right)return n.next();n=n.right}else n=n.left}},{key:"findNodeWithUpperBound",value:function(t){if(void 0===t)throw new Error("You must define from!");var n=this.root;if(null===n)return null;for(;;)if(null!==t&&!e.utils.smaller(n.val.id,t)||null===n.right){if(null===t||!e.utils.smaller(t,n.val.id))return n;if(null===n.left)return n.prev();n=n.left}else n=n.right}},{key:"findSmallestNode",value:function(){for(var e=this.root;null!=e&&null!=e.left;)e=e.left;return e}},{key:"findWithLowerBound",value:regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.findNodeWithLowerBound(t),e.abrupt("return",null==n?null:n.val);case 2:case"end":return e.stop()}},e,this)})},{key:"findWithUpperBound",value:regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.findNodeWithUpperBound(t),e.abrupt("return",null==n?null:n.val);case 2:case"end":return e.stop()}},e,this)})},{key:"iterate",value:regeneratorRuntime.mark(function t(n,r,i,o){var a;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:a=null===r?this.findSmallestNode():this.findNodeWithLowerBound(r);case 1:if(null===a||null!==i&&!e.utils.smaller(a.val.id,i)&&!e.utils.compareIds(a.val.id,i)){t.next=6;break}return t.delegateYield(o.call(n,a.val),"t0",3);case 3:a=a.next(),t.next=1;break;case 6:return t.abrupt("return",!0);case 7:case"end":return t.stop()}},t,this)})},{key:"logTable",value:regeneratorRuntime.mark(function e(t,n,r){var o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return null==r&&(r=function(){return!0}),null==t&&(t=null),null==n&&(n=null),o=[],e.delegateYield(this.iterate(this,t,n,regeneratorRuntime.mark(function e(t){var n,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r(t)){n={};for(a in t)"object"===i(t[a])?n[a]=JSON.stringify(t[a]):n[a]=t[a];o.push(n)}case 1:case"end":return e.stop()}},e,this)})),"t0",5);case 5:null!=console.table&&console.table(o);case 6:case"end":return e.stop()}},e,this)})},{key:"find",value:regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(n=this.findNode(t))?n.val:null);case 1:case"end":return e.stop()}},e,this)})},{key:"findNode",value:function(t){if(null==t||t.constructor!==Array)throw new Error("Expect id to be an array!");var n=this.root;if(null===n)return!1;for(;;){if(null===n)return!1;if(e.utils.smaller(t,n.val.id))n=n.left;else{if(!e.utils.smaller(n.val.id,t))return n;n=n.right}}}},{key:"delete",value:regeneratorRuntime.mark(function e(n){var r,i,o,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=n&&n.constructor===Array){e.next=2;break}throw new Error("id is expected to be an Array!");case 2:if(null!=(r=this.findNode(n))){e.next=5;break}return e.abrupt("return");case 5:if(this.length--,null!==r.left&&null!==r.right){for(i=r.left;null!==i.right;)i=i.right;r.val=i.val,r=i}if(a=r.left||r.right,null===a?(o=!0,a=new t({id:0}),a.blacken(),r.right=a):o=!1,null!==r.parent){e.next=14;break}return o?this.root=null:(this.root=a,a.blacken(),a._parent=null),e.abrupt("return");case 14:if(r.parent.left!==r){e.next=18;break}r.parent.left=a,e.next=23;break;case 18:if(r.parent.right!==r){e.next=22;break}r.parent.right=a,e.next=23;break;case 22:throw new Error("Impossible!");case 23:if(r.isBlack()&&(a.isRed()?a.blacken():this._fixDelete(a)),this.root.blacken(),!o){e.next=35;break}if(a.parent.left!==a){e.next=30;break}a.parent.left=null,e.next=35;break;case 30:if(a.parent.right!==a){e.next=34;break}a.parent.right=null,e.next=35;break;case 34:throw new Error("Impossible #3");case 35:case"end":return e.stop()}},e,this)})},{key:"_fixDelete",value:function(e){function t(e){return null===e||e.isBlack()}function n(e){return null!==e&&e.isRed()}if(null!==e.parent){var r=e.sibling;if(n(r)){if(e.parent.redden(),r.blacken(),e===e.parent.left)e.parent.rotateLeft(this);else{if(e!==e.parent.right)throw new Error("Impossible #2");e.parent.rotateRight(this)}r=e.sibling}e.parent.isBlack()&&r.isBlack()&&t(r.left)&&t(r.right)?(r.redden(),this._fixDelete(e.parent)):e.parent.isRed()&&r.isBlack()&&t(r.left)&&t(r.right)?(r.redden(),e.parent.blacken()):(e===e.parent.left&&r.isBlack()&&n(r.left)&&t(r.right)?(r.redden(),r.left.blacken(),r.rotateRight(this),r=e.sibling):e===e.parent.right&&r.isBlack()&&n(r.right)&&t(r.left)&&(r.redden(),r.right.blacken(),r.rotateLeft(this),r=e.sibling),r.color=e.parent.color,e.parent.blacken(),e===e.parent.left?(r.right.blacken(),e.parent.rotateLeft(this)):(r.left.blacken(),e.parent.rotateRight(this)))}}},{key:"put",value:regeneratorRuntime.mark(function n(r){var i,o;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(null!=r&&null!=r.id&&r.id.constructor===Array){n.next=2;break}throw new Error("v is expected to have an id property which is an Array!");case 2:if(i=new t(r),null===this.root){n.next=31;break}o=this.root;case 5:if(!e.utils.smaller(i.val.id,o.val.id)){n.next=15;break}if(null!==o.left){n.next=12;break}return o.left=i,n.abrupt("break",28);case 12:o=o.left;case 13:n.next=26;break;case 15:if(!e.utils.smaller(o.val.id,i.val.id)){n.next=24;break}if(null!==o.right){n.next=21;break}return o.right=i,n.abrupt("break",28);case 21:o=o.right;case 22:n.next=26;break;case 24:return o.val=i.val,n.abrupt("return",o);case 26:n.next=5;break;case 28:this._fixInsert(i),n.next=32;break;case 31:this.root=i;case 32:return this.length++,this.root.blacken(),n.abrupt("return",i);case 35:case"end":return n.stop()}},n,this)})},{key:"_fixInsert",value:function(e){if(null===e.parent)return void e.blacken();if(!e.parent.isBlack()){var t=e.getUncle();null!==t&&t.isRed()?(e.parent.blacken(),t.blacken(),e.grandparent.redden(),this._fixInsert(e.grandparent)):(e===e.parent.right&&e.parent===e.grandparent.left?(e.parent.rotateLeft(this),e=e.left):e===e.parent.left&&e.parent===e.grandparent.right&&(e.parent.rotateRight(this),e=e.right),e.parent.blacken(),e.grandparent.redden(),e===e.parent.left?e.grandparent.rotateRight(this):e.grandparent.rotateLeft(this))}}},{key:"flush",value:regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,this)})}]),n}();e.utils.RBTree=n}},{}]},{},[1])(1)})},function(module,exports,__webpack_require__){(function(global){var require,require;!function(e){module.exports=e()}(function(){var define,module,exports;return function e(t,n,r){function i(a,s){if(!n[a]){if(!t[a]){var c="function"==typeof require&&require;if(!s&&c)return require(a,!0);if(o)return o(a,!0);var u=new Error("Cannot find module '"+a+"'");throw u.code="MODULE_NOT_FOUND",u}var l=n[a]={exports:{}};t[a][0].call(l.exports,function(e){var n=t[a][1][e];return i(n||e)},l,l.exports,e,t,n,r)}return n[a].exports}for(var o="function"==typeof require&&require,a=0;a<r.length;a++)i(r[a]);return i}({1:[function(e,t,n){t.exports=function(e,t,n){var r,i=window.URL,o={autoplay:!0,mirror:!1,muted:!1},a=t||document.createElement("video");if(n)for(r in n)o[r]=n[r];if(o.autoplay&&(a.autoplay="autoplay"),o.muted&&(a.muted=!0),o.mirror&&["","moz","webkit","o","ms"].forEach(function(e){var t=e?e+"Transform":"transform";a.style[t]="scaleX(-1)"}),i&&i.createObjectURL)a.src=i.createObjectURL(e);else if(a.srcObject)a.srcObject=e;else{if(!a.mozSrcObject)return!1;a.mozSrcObject=e}return a}},{}],2:[function(e,t,n){function r(e){o.call(this);var t=e||{};this.config={chunksize:16384,pacing:0};var n;for(n in t)this.config[n]=t[n];this.file=null,this.channel=null}function i(){o.call(this),this.receiveBuffer=[],this.received=0,this.metadata={},this.channel=null}var o=e("wildemitter"),a=e("util");a.inherits(r,o),r.prototype.send=function(e,t){var n=this;this.file=e,this.channel=t;var r=function(t){var i=new window.FileReader;i.onload=function(){return function(i){n.channel.send(i.target.result),n.emit("progress",t,e.size,i.target.result),e.size>t+i.target.result.byteLength?window.setTimeout(r,n.config.pacing,t+n.config.chunksize):(n.emit("progress",e.size,e.size,null),n.emit("sentFile"))}}();var o=e.slice(t,t+n.config.chunksize);i.readAsArrayBuffer(o)};window.setTimeout(r,0,0)},a.inherits(i,o),i.prototype.receive=function(e,t){var n=this;e&&(this.metadata=e),this.channel=t,t.binaryType="arraybuffer",this.channel.onmessage=function(e){var t=e.data.byteLength;n.received+=t,n.receiveBuffer.push(e.data),n.emit("progress",n.received,n.metadata.size,e.data),n.received===n.metadata.size?(n.emit("receivedFile",new window.Blob(n.receiveBuffer),n.metadata),n.receiveBuffer=[]):n.received>n.metadata.size&&(console.error("received more than expected, discarding..."),n.receiveBuffer=[])}},t.exports={},t.exports.support="undefined"!=typeof window&&window&&window.File&&window.FileReader&&window.Blob,t.exports.Sender=r,t.exports.Receiver=i},{util:57,wildemitter:52}],3:[function(e,t,n){var r=e("getusermedia"),i={};t.exports=function(e,t){var n,o=2===arguments.length,a=o?t:e;if("undefined"==typeof window||"http:"===window.location.protocol)return n=new Error("NavigatorUserMediaError"),n.name="HTTPS_REQUIRED",a(n);if(window.navigator.userAgent.match("Chrome")){var s=parseInt(window.navigator.userAgent.match(/Chrome\/(.*) /)[1],10),c=33,u=!window.chrome.webstore;if(window.navigator.userAgent.match("Linux")&&(c=35),sessionStorage.getScreenMediaJSExtensionId)chrome.runtime.sendMessage(sessionStorage.getScreenMediaJSExtensionId,{type:"getScreen",id:1},null,function(t){if(t&&""!==t.sourceId)e=o&&e||{audio:!1,video:{mandatory:{chromeMediaSource:"desktop",maxWidth:window.screen.width,maxHeight:window.screen.height,maxFrameRate:3}}},e.video.mandatory.chromeMediaSourceId=t.sourceId,r(e,a);else{var n=new Error("NavigatorUserMediaError");n.name="PERMISSION_DENIED",a(n)}});else if(window.cefGetScreenMedia)window.cefGetScreenMedia(function(t){if(t)e=o&&e||{audio:!1,video:{mandatory:{chromeMediaSource:"desktop",maxWidth:window.screen.width,maxHeight:window.screen.height,maxFrameRate:3},optional:[{googLeakyBucket:!0},{googTemporalLayeredScreencast:!0}]}},e.video.mandatory.chromeMediaSourceId=t,r(e,a);else{var n=new Error("cefGetScreenMediaError");n.name="CEF_GETSCREENMEDIA_CANCELED",a(n)}});else if(u||s>=26&&s<=c)e=o&&e||{video:{mandatory:{googLeakyBucket:!0,maxWidth:window.screen.width,maxHeight:window.screen.height,maxFrameRate:3,chromeMediaSource:"screen"}}},r(e,a);else{var l=window.setTimeout(function(){return n=new Error("NavigatorUserMediaError"),n.name="EXTENSION_UNAVAILABLE",a(n)},1e3);i[l]=[a,o?e:null],window.postMessage({type:"getScreen",id:l},"*")}}else if(window.navigator.userAgent.match("Firefox")){var d=parseInt(window.navigator.userAgent.match(/Firefox\/(.*)/)[1],10);d>=33?(e=o&&e||{video:{mozMediaSource:"window",mediaSource:"window"}},r(e,function(e,t){if(a(e,t),!e)var n=t.currentTime,r=window.setInterval(function(){t||window.clearInterval(r),t.currentTime==n&&(window.clearInterval(r),t.onended&&t.onended()),n=t.currentTime},500)})):(n=new Error("NavigatorUserMediaError"),n.name="EXTENSION_UNAVAILABLE")}},window.addEventListener("message",function(e){if(e.origin==window.location.origin)if("gotScreen"==e.data.type&&i[e.data.id]){var t=i[e.data.id],n=t[1],o=t[0];if(delete i[e.data.id],""===e.data.sourceId){var a=new Error("NavigatorUserMediaError");a.name="PERMISSION_DENIED",o(a)}else n=n||{audio:!1,video:{mandatory:{chromeMediaSource:"desktop",maxWidth:window.screen.width,maxHeight:window.screen.height,maxFrameRate:3},optional:[{googLeakyBucket:!0},{googTemporalLayeredScreencast:!0}]}},n.video.mandatory.chromeMediaSourceId=e.data.sourceId,r(n,o)}else"getScreenPending"==e.data.type&&window.clearTimeout(e.data.id)})},{getusermedia:4}],4:[function(e,t,n){e("webrtc-adapter"),t.exports=function(e,t){var n,r=2===arguments.length,i={video:!0,audio:!0},o="PermissionDeniedError",a="ConstraintNotSatisfiedError";return r||(t=e,e=i),"undefined"!=typeof navigator&&navigator.getUserMedia?e.audio||e.video?void navigator.mediaDevices.getUserMedia(e).then(function(e){t(null,e)}).catch(function(e){var n;"string"==typeof e?(n=new Error("MediaStreamError"),n.name=e===o||"PERMISSION_DENIED"===e?o:a):(n=e,n.name||(n[o]?e.name=o:e.name=a)),t(n)}):(n=new Error("MediaStreamError"),n.name="NoMediaRequestedError",setTimeout(function(){t(n)},0)):(n=new Error("MediaStreamError"),n.name="NotSupportedError",setTimeout(function(){t(n)},0))}},{"webrtc-adapter":42}],5:[function(e,t,n){e("webrtc-adapter"),t.exports=function(e,t){var n,r=2===arguments.length,i={video:!0,audio:!0},o="PermissionDeniedError",a="ConstraintNotSatisfiedError";return r||(t=e,e=i),"undefined"!=typeof navigator&&navigator.getUserMedia?e.audio||e.video?(localStorage&&"true"===localStorage.useFirefoxFakeDevice&&(e.fake=!0),void navigator.mediaDevices.getUserMedia(e).then(function(e){t(null,e)}).catch(function(e){var n;"string"==typeof e?(n=new Error("MediaStreamError"),n.name=e===o||"PERMISSION_DENIED"===e?o:a):(n=e,n.name||(n[o]?e.name=o:e.name=a)),t(n)})):(n=new Error("MediaStreamError"),n.name="NoMediaRequestedError",setTimeout(function(){t(n)},0)):(n=new Error("MediaStreamError"),n.name="NotSupportedError",setTimeout(function(){t(n)},0))}},{"webrtc-adapter":42}],6:[function(e,t,n){function r(e,t){var n=-1/0;e.getFloatFrequencyData(t);for(var r=4,i=t.length;r<i;r++)t[r]>n&&t[r]<0&&(n=t[r]);return n}var i=e("wildemitter"),o=window.AudioContext||window.webkitAudioContext,a=null;t.exports=function(e,t){var n=new i;if(!o)return n;var t=t||{},s=t.smoothing||.1,c=t.interval||50,u=t.threshold,l=t.play,d=t.history||10,p=!0;a||(a=new o);var f,h,g;g=a.createAnalyser(),g.fftSize=512,g.smoothingTimeConstant=s,h=new Float32Array(g.fftSize),e.jquery&&(e=e[0]),e instanceof HTMLAudioElement||e instanceof HTMLVideoElement?(f=a.createMediaElementSource(e),"undefined"==typeof l&&(l=!0),u=u||-50):(f=a.createMediaStreamSource(e),u=u||-50),f.connect(g),l&&g.connect(a.destination),n.speaking=!1,n.setThreshold=function(e){u=e},n.setInterval=function(e){c=e},n.stop=function(){p=!1,n.emit("volume_change",-100,u),n.speaking&&(n.speaking=!1,n.emit("stopped_speaking"))},n.speakingHistory=[];for(var m=0;m<d;m++)n.speakingHistory.push(0);var v=function(){setTimeout(function(){if(p){var e=r(g,h);n.emit("volume_change",e,u);var t=0;if(e>u&&!n.speaking){for(var i=n.speakingHistory.length-3;i<n.speakingHistory.length;i++)t+=n.speakingHistory[i];t>=2&&(n.speaking=!0,n.emit("speaking"))}else if(e<u&&n.speaking){for(var i=0;i<n.speakingHistory.length;i++)t+=n.speakingHistory[i];0==t&&(n.speaking=!1,n.emit("stopped_speaking"))}n.speakingHistory.shift(),n.speakingHistory.push(0+(e>u)),v()}},c)};return v(),n}},{wildemitter:52}],7:[function(e,t,n){function r(e){u.call(this);var t,n=this.config={autoAdjustMic:!1,detectSpeakingEvents:!1,audioFallback:!1,media:{audio:!0,video:!0},logger:d};for(t in e)this.config[t]=e[t];this.logger=n.logger,this._log=this.logger.log.bind(this.logger,"LocalMedia:"),this._logerror=this.logger.error.bind(this.logger,"LocalMedia:"),this.screenSharingSupport=a.screenSharing,this.localStreams=[],this.localScreens=[],a.supportGetUserMedia||this._logerror("Your browser does not support local media capture.")}var i=e("util"),o=e("hark"),a=e("webrtcsupport"),s=e("getusermedia"),c=e("getscreenmedia"),u=e("wildemitter"),l=e("mediastream-gain"),d=e("mockconsole");i.inherits(r,u),r.prototype.start=function(e,t){var n=this,r=e||this.config.media;s(r,function(e,i){if(e){if(n.config.audioFallback&&"DevicesNotFoundError"===e.name&&!1!==r.video)return r.video=!1,void n.start(r,t)}else r.audio&&n.config.detectSpeakingEvents&&n.setupAudioMonitor(i,n.config.harkOptions),n.localStreams.push(i),n.config.autoAdjustMic&&(n.gainController=new l(i),n.setMicIfEnabled(.5)),i.onended=function(){},n.emit("localStream",i);if(t)return t(e,i)})},r.prototype.stop=function(e){var t=this;if(e){e.getTracks().forEach(function(e){e.stop()});var n=t.localStreams.indexOf(e);n>-1?(t.emit("localStreamStopped",e),t.localStreams=t.localStreams.splice(n,1)):(n=t.localScreens.indexOf(e))>-1&&(t.emit("localScreenStopped",e),t.localScreens=t.localScreens.splice(n,1))}else this.stopStreams(),this.stopScreenShare()},r.prototype.stopStreams=function(){var e=this;this.audioMonitor&&(this.audioMonitor.stop(),delete this.audioMonitor),this.localStreams.forEach(function(t){t.getTracks().forEach(function(e){e.stop()}),e.emit("localStreamStopped",t)}),this.localStreams=[]},r.prototype.startScreenShare=function(e){var t=this;c(function(n,r){if(n||(t.localScreens.push(r),r.onended=function(){var e=t.localScreens.indexOf(r);e>-1&&t.localScreens.splice(e,1),t.emit("localScreenStopped",r)},t.emit("localScreen",r)),e)return e(n,r)})},r.prototype.stopScreenShare=function(e){var t=this;e?(e.getTracks().forEach(function(e){e.stop()}),this.emit("localScreenStopped",e)):(this.localScreens.forEach(function(e){e.getTracks().forEach(function(e){e.stop()}),t.emit("localScreenStopped",e)}),this.localScreens=[])},r.prototype.mute=function(){this._audioEnabled(!1),this.hardMuted=!0,this.emit("audioOff")},r.prototype.unmute=function(){this._audioEnabled(!0),this.hardMuted=!1,this.emit("audioOn")},r.prototype.setupAudioMonitor=function(e,t){this._log("Setup audio");var n,r=this.audioMonitor=o(e,t),i=this;r.on("speaking",function(){i.emit("speaking"),i.hardMuted||i.setMicIfEnabled(1)}),r.on("stopped_speaking",function(){n&&clearTimeout(n),n=setTimeout(function(){i.emit("stoppedSpeaking"),i.hardMuted||i.setMicIfEnabled(.5)},1e3)}),r.on("volume_change",function(e,t){i.emit("volumeChange",e,t)})},r.prototype.setMicIfEnabled=function(e){this.config.autoAdjustMic&&this.gainController.setGain(e)},r.prototype.pauseVideo=function(){this._videoEnabled(!1),this.emit("videoOff")},r.prototype.resumeVideo=function(){this._videoEnabled(!0),this.emit("videoOn")},r.prototype.pause=function(){this.mute(),this.pauseVideo()},r.prototype.resume=function(){this.unmute(),this.resumeVideo()},r.prototype._audioEnabled=function(e){this.setMicIfEnabled(e?1:0),this.localStreams.forEach(function(t){t.getAudioTracks().forEach(function(t){t.enabled=!!e})})},r.prototype._videoEnabled=function(e){this.localStreams.forEach(function(t){t.getVideoTracks().forEach(function(t){t.enabled=!!e})})},r.prototype.isAudioEnabled=function(){var e=!0;return this.localStreams.forEach(function(t){t.getAudioTracks().forEach(function(t){e=e&&t.enabled})}),e},r.prototype.isVideoEnabled=function(){var e=!0;return this.localStreams.forEach(function(t){t.getVideoTracks().forEach(function(t){e=e&&t.enabled})}),e},r.prototype.startLocalMedia=r.prototype.start,r.prototype.stopLocalMedia=r.prototype.stop,Object.defineProperty(r.prototype,"localStream",{get:function(){return this.localStreams.length>0?this.localStreams[0]:null}}),Object.defineProperty(r.prototype,"localScreen",{get:function(){return this.localScreens.length>0?this.localScreens[0]:null}}),t.exports=r},{getscreenmedia:3,getusermedia:5,hark:6,"mediastream-gain":26,mockconsole:27,util:57,webrtcsupport:8,wildemitter:52}],8:[function(e,t,n){var r,i;window.mozRTCPeerConnection||navigator.mozGetUserMedia?(r="moz",i=parseInt(navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1],10)):(window.webkitRTCPeerConnection||navigator.webkitGetUserMedia)&&(r="webkit",i=navigator.userAgent.match(/Chrom(e|ium)/)&&parseInt(navigator.userAgent.match(/Chrom(e|ium)\/([0-9]+)\./)[2],10));var o=window.RTCPeerConnection||window.mozRTCPeerConnection||window.webkitRTCPeerConnection,a=window.mozRTCIceCandidate||window.RTCIceCandidate,s=window.mozRTCSessionDescription||window.RTCSessionDescription,c=window.webkitMediaStream||window.MediaStream,u="https:"===window.location.protocol&&("webkit"===r&&i>=26||"moz"===r&&i>=33),l=window.AudioContext||window.webkitAudioContext,d=document.createElement("video"),p=d&&d.canPlayType&&"probably"===d.canPlayType('video/webm; codecs="vp8", vorbis'),f=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.msGetUserMedia||navigator.mozGetUserMedia;t.exports={prefix:r,browserVersion:i,support:!!o&&!!f,supportRTCPeerConnection:!!o,supportVp8:p,supportGetUserMedia:!!f,supportDataChannel:!!(o&&o.prototype&&o.prototype.createDataChannel),supportWebAudio:!(!l||!l.prototype.createMediaStreamSource),supportMediaStream:!(!c||!c.prototype.removeTrack),supportScreenSharing:!!u,AudioContext:l,PeerConnection:o,SessionDescription:s,IceCandidate:a,MediaStream:c,getUserMedia:f}},{}],9:[function(e,t,n){function r(e,t){for(var n=-1,r=e.length;++n<r&&!1!==t(e[n],n,e););return e}t.exports=r},{}],10:[function(e,t,n){function r(e,t){for(var n=-1,r=e.length,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i}t.exports=r},{}],11:[function(e,t,n){function r(e){return null==e?"":e+""}function i(e,t,n){var r=typeof e;return"function"==r?void 0===t?e:C(e,t,n):null==e?b:"object"==r?s(e):void 0===t?w(e):c(e,t)}function o(e,t,n){if(null!=e){void 0!==n&&n in g(e)&&(t=[n]);for(var r=0,i=t.length;null!=e&&r<i;)e=e[t[r++]];return r&&r==i?e:void 0}}function a(e,t,n){var r=t.length,i=r,o=!n;if(null==e)return!i;for(e=g(e);r--;){var a=t[r];if(o&&a[2]?a[1]!==e[a[0]]:!(a[0]in e))return!1}for(;++r<i;){a=t[r];var s=a[0],c=e[s],u=a[1];if(o&&a[2]){if(void 0===c&&!(s in e))return!1}else{var l=n?n(c,u,s):void 0;if(!(void 0===l?k(u,c,n,!0):l))return!1}}return!0}function s(e){var t=p(e);if(1==t.length&&t[0][2]){var n=t[0][0],r=t[0][1];return function(e){return null!=e&&e[n]===r&&(void 0!==r||n in g(e))}}return function(e){return a(e,t)}}function c(e,t){var n=S(e),r=f(e)&&h(t),i=e+"";return e=m(e),function(a){if(null==a)return!1;var s=i;if(a=g(a),(n||!r)&&!(s in a)){if(null==(a=1==e.length?a:o(a,d(e,0,-1))))return!1;s=v(e),a=g(a)}return a[s]===t?void 0!==t||s in a:k(t,a[s],void 0,!0)}}function u(e){return function(t){return null==t?void 0:t[e]}}function l(e){var t=e+"";return e=m(e),function(n){return o(n,e,t)}}function d(e,t,n){var r=-1,i=e.length;t=null==t?0:+t||0,t<0&&(t=-t>i?0:i+t),n=void 0===n||n>i?i:+n||0,n<0&&(n+=i),i=t>n?0:n-t>>>0,t>>>=0;for(var o=Array(i);++r<i;)o[r]=e[r+t];return o}function p(e){for(var t=x(e),n=t.length;n--;)t[n][2]=h(t[n][1]);return t}function f(e,t){var n=typeof e;return!!("string"==n&&E.test(e)||"number"==n)||!S(e)&&(!T.test(e)||null!=t&&e in g(t))}function h(e){return e===e&&!y(e)}function g(e){return y(e)?e:Object(e)}function m(e){if(S(e))return e;var t=[];return r(e).replace(O,function(e,n,r,i){t.push(r?i.replace(_,"$1"):n||e)}),t}function v(e){var t=e?e.length:0;return t?e[t-1]:void 0}function y(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function b(e){return e}function w(e){return f(e)?u(e):l(e)}var k=e("lodash._baseisequal"),C=e("lodash._bindcallback"),S=e("lodash.isarray"),x=e("lodash.pairs"),T=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\n\\]|\\.)*?\1)\]/,E=/^\w*$/,O=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\n\\]|\\.)*?)\2)\]/g,_=/\\(\\)?/g;t.exports=i},{"lodash._baseisequal":14,"lodash._bindcallback":15,"lodash.isarray":20,"lodash.pairs":24}],12:[function(e,t,n){function r(e,t){return l(e,t,s)}function i(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=c}function o(e){return a(e)?e:Object(e)}function a(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}var s=e("lodash.keys"),c=9007199254740991,u=function(e,t){return function(n,r){var a=n?d(n):0;if(!i(a))return e(n,r);for(var s=t?a:-1,c=o(n);(t?s--:++s<a)&&!1!==r(c[s],s,c););return n}}(r),l=function(e){return function(t,n,r){for(var i=o(t),a=r(t),s=a.length,c=e?s:-1;e?c--:++c<s;){var u=a[c];if(!1===n(i[u],u,i))break}return t}}(),d=function(e){return function(t){return null==t?void 0:t[e]}}("length");t.exports=u},{"lodash.keys":22}],13:[function(e,t,n){function r(e,t,n){if(null!=e){void 0!==n&&n in i(e)&&(t=[n]);for(var r=0,o=t.length;null!=e&&r<o;)e=e[t[r++]];return r&&r==o?e:void 0}}function i(e){return o(e)?e:Object(e)}function o(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}t.exports=r},{}],14:[function(e,t,n){function r(e){return!!e&&"object"==typeof e}function i(e,t){for(var n=-1,r=e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}function o(e,t,n,i,s,c){return e===t||(null==e||null==t||!l(e)&&!r(t)?e!==e&&t!==t:a(e,t,o,n,i,s,c))}function a(e,t,n,r,i,o,a){var l=d(e),f=d(t),m=g,v=g;l||(m=T.call(e),m==h?m=w:m!=w&&(l=p(e))),f||(v=T.call(t),v==h?v=w:v!=w&&(f=p(t)));var y=m==w,b=v==w,k=m==v;if(k&&!l&&!y)return c(e,t,m);if(!i){var C=y&&x.call(e,"__wrapped__"),S=b&&x.call(t,"__wrapped__");if(C||S)return n(C?e.value():e,S?t.value():t,r,i,o,a)}if(!k)return!1;o||(o=[]),a||(a=[]);for(var E=o.length;E--;)if(o[E]==e)return a[E]==t;o.push(e),a.push(t);var O=(l?s:u)(e,t,n,r,i,o,a);return o.pop(),a.pop(),O}function s(e,t,n,r,o,a,s){var c=-1,u=e.length,l=t.length;if(u!=l&&!(o&&l>u))return!1;for(;++c<u;){var d=e[c],p=t[c],f=r?r(o?p:d,o?d:p,c):void 0;if(void 0!==f){if(f)continue;return!1}if(o){if(!i(t,function(e){return d===e||n(d,e,r,o,a,s)}))return!1}else if(d!==p&&!n(d,p,r,o,a,s))return!1}return!0}function c(e,t,n){switch(n){case m:case v:return+e==+t;case y:return e.name==t.name&&e.message==t.message;case b:return e!=+e?t!=+t:e==+t;case k:case C:return e==t+""}return!1}function u(e,t,n,r,i,o,a){var s=f(e),c=s.length;if(c!=f(t).length&&!i)return!1;for(var u=c;u--;){var l=s[u];if(!(i?l in t:x.call(t,l)))return!1}for(var d=i;++u<c;){l=s[u];var p=e[l],h=t[l],g=r?r(i?h:p,i?p:h,l):void 0;if(!(void 0===g?n(p,h,r,i,o,a):g))return!1;d||(d="constructor"==l)}if(!d){var m=e.constructor,v=t.constructor;if(m!=v&&"constructor"in e&&"constructor"in t&&!("function"==typeof m&&m instanceof m&&"function"==typeof v&&v instanceof v))return!1}return!0}function l(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}var d=e("lodash.isarray"),p=e("lodash.istypedarray"),f=e("lodash.keys"),h="[object Arguments]",g="[object Array]",m="[object Boolean]",v="[object Date]",y="[object Error]",b="[object Number]",w="[object Object]",k="[object RegExp]",C="[object String]",S=Object.prototype,x=S.hasOwnProperty,T=S.toString;t.exports=o},{"lodash.isarray":20,"lodash.istypedarray":21,"lodash.keys":22}],15:[function(e,t,n){function r(e,t,n){if("function"!=typeof e)return i;if(void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 3:return function(n,r,i){return e.call(t,n,r,i)};case 4:return function(n,r,i,o){return e.call(t,n,r,i,o)};case 5:return function(n,r,i,o,a){return e.call(t,n,r,i,o,a)}}return function(){return e.apply(t,arguments)}}function i(e){return e}t.exports=r},{}],16:[function(e,t,n){function r(e){return!!e&&"object"==typeof e}function i(e,t){var n=null==e?void 0:e[t];return s(n)?n:void 0}function o(e){return a(e)&&f.call(e)==c}function a(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function s(e){return null!=e&&(o(e)?h.test(d.call(e)):r(e)&&u.test(e))}var c="[object Function]",u=/^\[object .+?Constructor\]$/,l=Object.prototype,d=Function.prototype.toString,p=l.hasOwnProperty,f=l.toString,h=RegExp("^"+d.call(p).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");t.exports=i},{}],17:[function(e,t,n){function r(e){return null==e?"":e+""}function i(e){if(o(e))return e;var t=[];return r(e).replace(a,function(e,n,r,i){t.push(r?i.replace(s,"$1"):n||e)}),t}var o=e("lodash.isarray"),a=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\n\\]|\\.)*?)\2)\]/g,s=/\\(\\)?/g;t.exports=i},{"lodash.isarray":20}],18:[function(e,t,n){var r=e("lodash._arrayeach"),i=e("lodash._baseeach"),o=e("lodash._bindcallback"),a=e("lodash.isarray"),s=function(e,t){return function(n,r,i){return"function"==typeof r&&void 0===i&&a(n)?e(n,r):t(n,o(r,i,3))}}(r,i);t.exports=s},{"lodash._arrayeach":9,"lodash._baseeach":12,"lodash._bindcallback":15,"lodash.isarray":20}],19:[function(e,t,n){function r(e){return o(e)&&g.call(e,"callee")&&(!v.call(e,"callee")||m.call(e)==d)}function i(e){return null!=e&&s(e.length)&&!a(e)}function o(e){return u(e)&&i(e)}function a(e){var t=c(e)?m.call(e):"";return t==p||t==f}function s(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=l}function c(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function u(e){return!!e&&"object"==typeof e}var l=9007199254740991,d="[object Arguments]",p="[object Function]",f="[object GeneratorFunction]",h=Object.prototype,g=h.hasOwnProperty,m=h.toString,v=h.propertyIsEnumerable;t.exports=r},{}],20:[function(e,t,n){function r(e){return!!e&&"object"==typeof e}function i(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=m}function o(e){return a(e)&&f.call(e)==c}function a(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function s(e){return null!=e&&(o(e)?h.test(d.call(e)):r(e)&&u.test(e))}var c="[object Function]",u=/^\[object .+?Constructor\]$/,l=Object.prototype,d=Function.prototype.toString,p=l.hasOwnProperty,f=l.toString,h=RegExp("^"+d.call(p).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),g=function(e,t){var n=null==e?void 0:e[t];return s(n)?n:void 0}(Array,"isArray"),m=9007199254740991,v=g||function(e){return r(e)&&i(e.length)&&"[object Array]"==f.call(e)};t.exports=v},{}],21:[function(e,t,n){function r(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=a}function i(e){return!!e&&"object"==typeof e}function o(e){return i(e)&&r(e.length)&&!!s[u.call(e)]}var a=9007199254740991,s={};s["[object Float32Array]"]=s["[object Float64Array]"]=s["[object Int8Array]"]=s["[object Int16Array]"]=s["[object Int32Array]"]=s["[object Uint8Array]"]=s["[object Uint8ClampedArray]"]=s["[object Uint16Array]"]=s["[object Uint32Array]"]=!0,s["[object Arguments]"]=s["[object Array]"]=s["[object ArrayBuffer]"]=s["[object Boolean]"]=s["[object DataView]"]=s["[object Date]"]=s["[object Error]"]=s["[object Function]"]=s["[object Map]"]=s["[object Number]"]=s["[object Object]"]=s["[object RegExp]"]=s["[object Set]"]=s["[object String]"]=s["[object WeakMap]"]=!1;var c=Object.prototype,u=c.toString;t.exports=o},{}],22:[function(e,t,n){function r(e){return null!=e&&o(v(e))}function i(e,t){return e="number"==typeof e||p.test(e)?+e:-1,t=null==t?m:t,e>-1&&e%1==0&&e<t}function o(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=m}function a(e){for(var t=c(e),n=t.length,r=n&&e.length,a=!!r&&o(r)&&(d(e)||l(e)),s=-1,u=[];++s<n;){var p=t[s];(a&&i(p,r)||h.call(e,p))&&u.push(p)}return u}function s(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function c(e){if(null==e)return[];s(e)||(e=Object(e));var t=e.length;t=t&&o(t)&&(d(e)||l(e))&&t||0;for(var n=e.constructor,r=-1,a="function"==typeof n&&n.prototype===e,c=Array(t),u=t>0;++r<t;)c[r]=r+"";for(var p in e)u&&i(p,t)||"constructor"==p&&(a||!h.call(e,p))||c.push(p);return c}var u=e("lodash._getnative"),l=e("lodash.isarguments"),d=e("lodash.isarray"),p=/^\d+$/,f=Object.prototype,h=f.hasOwnProperty,g=u(Object,"keys"),m=9007199254740991,v=function(e){return function(t){return null==t?void 0:t[e]}}("length"),y=g?function(e){var t=null==e?void 0:e.constructor;return"function"==typeof t&&t.prototype===e||"function"!=typeof e&&r(e)?a(e):s(e)?g(e):[]}:a;t.exports=y},{"lodash._getnative":16,"lodash.isarguments":19,"lodash.isarray":20}],23:[function(e,t,n){function r(e,t){var n=-1,r=i(e)?Array(e.length):[];return u(e,function(e,i,o){r[++n]=t(e,i,o)}),r}function i(e){return null!=e&&o(p(e))}function o(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=d}function a(e,t,n){var i=l(e)?s:r;return t=c(t,n,3),i(e,t)}var s=e("lodash._arraymap"),c=e("lodash._basecallback"),u=e("lodash._baseeach"),l=e("lodash.isarray"),d=9007199254740991,p=function(e){return function(t){return null==t?void 0:t[e]}}("length");t.exports=a},{"lodash._arraymap":10,"lodash._basecallback":11,"lodash._baseeach":12,"lodash.isarray":20}],24:[function(e,t,n){function r(e){return i(e)?e:Object(e)}function i(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function o(e){e=r(e);for(var t=-1,n=a(e),i=n.length,o=Array(i);++t<i;){var s=n[t];o[t]=[s,e[s]]}return o}var a=e("lodash.keys");t.exports=o},{"lodash.keys":22}],25:[function(e,t,n){function r(e){return function(t){return null==t?void 0:t[e]}}function i(e){var t=e+"";return e=d(e),function(n){return l(n,e,t)}}function o(e,t){var n=typeof e;return!!("string"==n&&g.test(e)||"number"==n)||!p(e)&&(!h.test(e)||null!=t&&e in a(t))}function a(e){return c(e)?e:Object(e)}function s(e,t){return f(e,u(t))}function c(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function u(e){return o(e)?r(e):i(e)}var l=e("lodash._baseget"),d=e("lodash._topath"),p=e("lodash.isarray"),f=e("lodash.map"),h=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\n\\]|\\.)*?\1)\]/,g=/^\w*$/;t.exports=s},{"lodash._baseget":13,"lodash._topath":17,"lodash.isarray":20,"lodash.map":23}],26:[function(e,t,n){function r(e){if(this.support=i.webAudio&&i.mediaStream,this.gain=1,this.support){var t=this.context=new i.AudioContext;this.microphone=t.createMediaStreamSource(e),this.gainFilter=t.createGain(),this.destination=t.createMediaStreamDestination(),this.outputStream=this.destination.stream,this.microphone.connect(this.gainFilter),this.gainFilter.connect(this.destination),e.addTrack(this.outputStream.getAudioTracks()[0]),e.removeTrack(e.getAudioTracks()[0])}this.stream=e}var i=e("webrtcsupport");r.prototype.setGain=function(e){this.support&&(this.gainFilter.gain.value=e,this.gain=e)},r.prototype.getGain=function(){return this.gain},r.prototype.off=function(){return this.setGain(0)},r.prototype.on=function(){this.setGain(1)},t.exports=r},{webrtcsupport:51}],27:[function(e,t,n){for(var r="assert,count,debug,dir,dirxml,error,exception,group,groupCollapsed,groupEnd,info,log,markTimeline,profile,profileEnd,time,timeEnd,trace,warn".split(","),i=r.length,o=function(){},a={};i--;)a[r[i]]=o;t.exports=a},{}],28:[function(e,t,n){function r(e,t){var n,r=this;c.call(this),e=e||{},e.iceServers=e.iceServers||[],this.enableChromeNativeSimulcast=!1,t&&t.optional&&"chrome"===l.webrtcDetectedBrowser&&null===navigator.appVersion.match(/Chromium\//)&&t.optional.forEach(function(e){e.enableChromeNativeSimulcast&&(r.enableChromeNativeSimulcast=!0)}),this.enableMultiStreamHacks=!1,t&&t.optional&&"chrome"===l.webrtcDetectedBrowser&&t.optional.forEach(function(e){e.enableMultiStreamHacks&&(r.enableMultiStreamHacks=!0)}),this.restrictBandwidth=0,t&&t.optional&&t.optional.forEach(function(e){e.andyetRestrictBandwidth&&(r.restrictBandwidth=e.andyetRestrictBandwidth)}),this.batchIceCandidates=0,t&&t.optional&&t.optional.forEach(function(e){e.andyetBatchIce&&(r.batchIceCandidates=e.andyetBatchIce)}),this.batchedIceCandidates=[],t&&t.optional&&"chrome"===l.webrtcDetectedBrowser&&t.optional.forEach(function(e){e.andyetFasterICE&&(r.eliminateDuplicateCandidates=e.andyetFasterICE)}),t&&t.optional&&t.optional.forEach(function(e){e.andyetDontSignalCandidates&&(r.dontSignalCandidates=e.andyetDontSignalCandidates)}),this.assumeSetLocalSuccess=!1,t&&t.optional&&t.optional.forEach(function(e){e.andyetAssumeSetLocalSuccess&&(r.assumeSetLocalSuccess=e.andyetAssumeSetLocalSuccess)}),"firefox"===l.webrtcDetectedBrowser&&t&&t.optional&&(this.wtFirefox=0,t.optional.forEach(function(e){e.andyetFirefoxMakesMeSad&&(r.wtFirefox=e.andyetFirefoxMakesMeSad,r.wtFirefox>0&&(r.firefoxcandidatebuffer=[]))})),this.pc=new u(e,t),this.getLocalStreams=this.pc.getLocalStreams.bind(this.pc),this.getRemoteStreams=this.pc.getRemoteStreams.bind(this.pc),this.addStream=this.pc.addStream.bind(this.pc),this.removeStream=this.pc.removeStream.bind(this.pc),this.pc.on("*",function(){r.emit.apply(r,arguments)}),this.pc.onremovestream=this.emit.bind(this,"removeStream"),this.pc.onaddstream=this.emit.bind(this,"addStream"),this.pc.onnegotiationneeded=this.emit.bind(this,"negotiationNeeded"),this.pc.oniceconnectionstatechange=this.emit.bind(this,"iceConnectionStateChange"),this.pc.onsignalingstatechange=this.emit.bind(this,"signalingStateChange"),this.pc.onicecandidate=this._onIce.bind(this),this.pc.ondatachannel=this._onDataChannel.bind(this),this.localDescription={contents:[]},this.remoteDescription={contents:[]},this.config={debug:!1,ice:{},sid:"",isInitiator:!0,sdpSessionID:Date.now(),useJingle:!1};for(n in e)this.config[n]=e[n];this.config.debug&&this.on("*",function(){(e.logger||console).log("PeerConnection event:",arguments)}),this.hadLocalStunCandidate=!1,this.hadRemoteStunCandidate=!1,this.hadLocalRelayCandidate=!1,this.hadRemoteRelayCandidate=!1,this.hadLocalIPv6Candidate=!1,this.hadRemoteIPv6Candidate=!1,this._remoteDataChannels=[],this._localDataChannels=[],this._candidateBuffer=[]}var i=e("util"),o=e("lodash.foreach"),a=e("lodash.pluck"),s=e("sdp-jingle-json"),c=e("wildemitter"),u=e("traceablepeerconnection"),l=e("webrtc-adapter-test");i.inherits(r,c),Object.defineProperty(r.prototype,"signalingState",{get:function(){return this.pc.signalingState}}),Object.defineProperty(r.prototype,"iceConnectionState",{get:function(){return this.pc.iceConnectionState}}),r.prototype._role=function(){return this.isInitiator?"initiator":"responder"},r.prototype.addStream=function(e){this.localStream=e,this.pc.addStream(e)},r.prototype._checkLocalCandidate=function(e){var t=s.toCandidateJSON(e);"srflx"==t.type?this.hadLocalStunCandidate=!0:"relay"==t.type&&(this.hadLocalRelayCandidate=!0),-1!=t.ip.indexOf(":")&&(this.hadLocalIPv6Candidate=!0)},r.prototype._checkRemoteCandidate=function(e){var t=s.toCandidateJSON(e);"srflx"==t.type?this.hadRemoteStunCandidate=!0:"relay"==t.type&&(this.hadRemoteRelayCandidate=!0),-1!=t.ip.indexOf(":")&&(this.hadRemoteIPv6Candidate=!0)},r.prototype.processIce=function(e,t){t=t||function(){};var n=this;if("closed"===this.pc.signalingState)return t();if(e.contents||e.jingle&&e.jingle.contents){var r=a(this.remoteDescription.contents,"name");(e.contents||e.jingle.contents).forEach(function(e){var t=e.transport||{},i=t.candidates||[],o=r.indexOf(e.name),a=e.name;i.forEach(function(e){var t=s.toCandidateSDP(e)+"\r\n";n.pc.addIceCandidate(new RTCIceCandidate({candidate:t,sdpMLineIndex:o,sdpMid:a}),function(){},function(e){n.emit("error",e)}),n._checkRemoteCandidate(t)})})}else{if(e.candidate&&0!==e.candidate.candidate.indexOf("a=")&&(e.candidate.candidate="a="+e.candidate.candidate),this.wtFirefox&&null!==this.firefoxcandidatebuffer&&this.pc.localDescription&&"offer"===this.pc.localDescription.type)return this.firefoxcandidatebuffer.push(e.candidate),t();n.pc.addIceCandidate(new RTCIceCandidate(e.candidate),function(){},function(e){n.emit("error",e)}),n._checkRemoteCandidate(e.candidate.candidate)}t()},r.prototype.offer=function(e,t){var n=this,r=2===arguments.length,i=r&&e?e:{mandatory:{OfferToReceiveAudio:!0,OfferToReceiveVideo:!0}};return t=r?t:e,t=t||function(){},"closed"===this.pc.signalingState?t("Already closed"):void this.pc.createOffer(function(e){var r={type:"offer",sdp:e.sdp};n.assumeSetLocalSuccess&&(n.emit("offer",r),t(null,r)),n._candidateBuffer=[],n.pc.setLocalDescription(e,function(){var i;n.config.useJingle&&(i=s.toSessionJSON(e.sdp,{role:n._role(),direction:"outgoing"}),i.sid=n.config.sid,n.localDescription=i,o(i.contents,function(e){var t=e.transport||{};t.ufrag&&(n.config.ice[e.name]={ufrag:t.ufrag,pwd:t.pwd})}),r.jingle=i),r.sdp.split("\r\n").forEach(function(e){0===e.indexOf("a=candidate:")&&n._checkLocalCandidate(e)}),n.assumeSetLocalSuccess||(n.emit("offer",r),t(null,r))},function(e){n.emit("error",e),t(e)})},function(e){n.emit("error",e),t(e)},i)},r.prototype.handleOffer=function(e,t){t=t||function(){};var n=this;if(e.type="offer",e.jingle){if(this.enableChromeNativeSimulcast&&e.jingle.contents.forEach(function(e){"video"===e.name&&(e.description.googConferenceFlag=!0)}),this.enableMultiStreamHacks&&e.jingle.contents.forEach(function(e){if("video"===e.name){var t=e.description.sources||[];0!==t.length&&"3735928559"===t[0].ssrc||(t.unshift({ssrc:"3735928559",parameters:[{key:"cname",value:"deadbeef"},{key:"msid",value:"mixyourfecintothis please"}]}),e.description.sources=t)}}),n.restrictBandwidth>0&&e.jingle.contents.length>=2&&"video"===e.jingle.contents[1].name){var r=e.jingle.contents[1];r.description&&r.description.bandwidth||(e.jingle.contents[1].description.bandwidth={type:"AS",bandwidth:n.restrictBandwidth.toString()},e.sdp=s.toSessionSDP(e.jingle,{sid:n.config.sdpSessionID,role:n._role(),direction:"outgoing"}))}e.sdp=s.toSessionSDP(e.jingle,{sid:n.config.sdpSessionID,role:n._role(),direction:"incoming"}),n.remoteDescription=e.jingle}e.sdp.split("\r\n").forEach(function(e){0===e.indexOf("a=candidate:")&&n._checkRemoteCandidate(e)}),n.pc.setRemoteDescription(new RTCSessionDescription(e),function(){t()},t)},r.prototype.answerAudioOnly=function(e){var t={mandatory:{OfferToReceiveAudio:!0,OfferToReceiveVideo:!1}};this._answer(t,e)},r.prototype.answerBroadcastOnly=function(e){var t={mandatory:{OfferToReceiveAudio:!1,OfferToReceiveVideo:!1}};this._answer(t,e)},r.prototype.answer=function(e,t){var n=2===arguments.length,r=n?t:e,i=n&&e?e:{mandatory:{OfferToReceiveAudio:!0,OfferToReceiveVideo:!0}};this._answer(i,r)},r.prototype.handleAnswer=function(e,t){t=t||function(){};var n=this;e.jingle&&(e.sdp=s.toSessionSDP(e.jingle,{sid:n.config.sdpSessionID,role:n._role(),direction:"incoming"}),n.remoteDescription=e.jingle),e.sdp.split("\r\n").forEach(function(e){0===e.indexOf("a=candidate:")&&n._checkRemoteCandidate(e)}),n.pc.setRemoteDescription(new RTCSessionDescription(e),function(){n.wtFirefox&&window.setTimeout(function(){n.firefoxcandidatebuffer.forEach(function(e){n.pc.addIceCandidate(new RTCIceCandidate(e),function(){},function(e){n.emit("error",e)}),n._checkRemoteCandidate(e.candidate)}),n.firefoxcandidatebuffer=null},n.wtFirefox),t(null)},t)},r.prototype.close=function(){this.pc.close(),this._localDataChannels=[],this._remoteDataChannels=[],this.emit("close")},r.prototype._answer=function(e,t){t=t||function(){};var n=this;if(!this.pc.remoteDescription)throw new Error("remoteDescription not set");return"closed"===this.pc.signalingState?t("Already closed"):void n.pc.createAnswer(function(e){var r=[];if(n.enableChromeNativeSimulcast&&(e.jingle=s.toSessionJSON(e.sdp,{role:n._role(),direction:"outgoing"}),e.jingle.contents.length>=2&&"video"===e.jingle.contents[1].name)){var i=e.jingle.contents[1].description.sourceGroups||[],o=!1;if(i.forEach(function(e){"SIM"==e.semantics&&(o=!0)}),!o&&e.jingle.contents[1].description.sources.length){var a=JSON.parse(JSON.stringify(e.jingle.contents[1].description.sources[0]));a.ssrc=""+Math.floor(4294967295*Math.random()),e.jingle.contents[1].description.sources.push(a),r.push(e.jingle.contents[1].description.sources[0].ssrc),r.push(a.ssrc),i.push({semantics:"SIM",sources:r});var c=JSON.parse(JSON.stringify(a));c.ssrc=""+Math.floor(4294967295*Math.random()),e.jingle.contents[1].description.sources.push(c),i.push({semantics:"FID",sources:[a.ssrc,c.ssrc]}),e.jingle.contents[1].description.sourceGroups=i,e.sdp=s.toSessionSDP(e.jingle,{sid:n.config.sdpSessionID,role:n._role(),direction:"outgoing"})}}var u={type:"answer",sdp:e.sdp};n.assumeSetLocalSuccess&&(n.emit("answer",u),t(null,u)),n._candidateBuffer=[],n.pc.setLocalDescription(e,function(){if(n.config.useJingle){var r=s.toSessionJSON(e.sdp,{role:n._role(),direction:"outgoing"});r.sid=n.config.sid,n.localDescription=r,u.jingle=r}n.enableChromeNativeSimulcast&&(u.jingle||(u.jingle=s.toSessionJSON(e.sdp,{role:n._role(),direction:"outgoing"})),u.jingle.contents[1].description.sources.forEach(function(e,t){e.parameters=e.parameters.map(function(e){return"msid"===e.key&&(e.value+="-"+Math.floor(t/2)),e})}),u.sdp=s.toSessionSDP(u.jingle,{sid:n.sdpSessionID,role:n._role(),direction:"outgoing"})),u.sdp.split("\r\n").forEach(function(e){0===e.indexOf("a=candidate:")&&n._checkLocalCandidate(e)}),n.assumeSetLocalSuccess||(n.emit("answer",u),t(null,u))},function(e){n.emit("error",e),t(e)})},function(e){n.emit("error",e),t(e)},e)},r.prototype._onIce=function(e){var t=this;if(e.candidate){if(this.dontSignalCandidates)return;var n=e.candidate,r={candidate:{candidate:n.candidate,sdpMid:n.sdpMid,sdpMLineIndex:n.sdpMLineIndex}};this._checkLocalCandidate(n.candidate);var i,a,c=s.toCandidateJSON(n.candidate);if(this.eliminateDuplicateCandidates&&"relay"===c.type&&(i=this._candidateBuffer.filter(function(e){return"relay"===e.type}).map(function(e){return e.foundation+":"+e.component}),(a=i.indexOf(c.foundation+":"+c.component))>-1&&c.priority>>24>=i[a].priority>>24))return;if("max-bundle"===this.config.bundlePolicy&&(i=this._candidateBuffer.filter(function(e){return c.type===e.type}).map(function(e){return e.address+":"+e.port}),(a=i.indexOf(c.address+":"+c.port))>-1))return;if("require"===this.config.rtcpMuxPolicy&&"2"===c.component)return;if(this._candidateBuffer.push(c),t.config.useJingle){if(n.sdpMid||(t.pc.remoteDescription&&"offer"===t.pc.remoteDescription.type?n.sdpMid=t.remoteDescription.contents[n.sdpMLineIndex].name:n.sdpMid=t.localDescription.contents[n.sdpMLineIndex].name),!t.config.ice[n.sdpMid]){var u=s.toSessionJSON(t.pc.localDescription.sdp,{role:t._role(),direction:"outgoing"});o(u.contents,function(e){var n=e.transport||{};n.ufrag&&(t.config.ice[e.name]={ufrag:n.ufrag,pwd:n.pwd})})}if(r.jingle={contents:[{name:n.sdpMid,creator:t._role(),transport:{transType:"iceUdp",ufrag:t.config.ice[n.sdpMid].ufrag,pwd:t.config.ice[n.sdpMid].pwd,candidates:[c]}}]},t.batchIceCandidates>0)return 0===t.batchedIceCandidates.length&&window.setTimeout(function(){var e={};t.batchedIceCandidates.forEach(function(t){t=t.contents[0],e[t.name]||(e[t.name]=t),e[t.name].transport.candidates.push(t.transport.candidates[0])});var n={jingle:{contents:[]}};Object.keys(e).forEach(function(t){n.jingle.contents.push(e[t])}),t.batchedIceCandidates=[],t.emit("ice",n)},t.batchIceCandidates),void t.batchedIceCandidates.push(r.jingle)}this.emit("ice",r)}else this.emit("endOfCandidates")},r.prototype._onDataChannel=function(e){var t=e.channel;this._remoteDataChannels.push(t),this.emit("addChannel",t)},r.prototype.createDataChannel=function(e,t){var n=this.pc.createDataChannel(e,t);return this._localDataChannels.push(n),n},r.prototype.getStats=function(e){"firefox"===l.webrtcDetectedBrowser?this.pc.getStats(function(t){var n=[];for(var r in t)"object"==typeof t[r]&&n.push(t[r]);e(null,n)},e):this.pc.getStats(function(t){var n=[];t.result().forEach(function(e){var t={};e.names().forEach(function(n){t[n]=e.stat(n)}),t.id=e.id,t.type=e.type,t.timestamp=e.timestamp,n.push(t)}),e(null,n)})},t.exports=r},{"lodash.foreach":18,"lodash.pluck":25,"sdp-jingle-json":29,traceablepeerconnection:40,util:57,"webrtc-adapter-test":41,wildemitter:52}],29:[function(e,t,n){var r=e("./lib/tosdp"),i=e("./lib/tojson");n.toIncomingSDPOffer=function(e){return r.toSessionSDP(e,{role:"responder",direction:"incoming"})},n.toOutgoingSDPOffer=function(e){return r.toSessionSDP(e,{role:"initiator",direction:"outgoing"})},n.toIncomingSDPAnswer=function(e){return r.toSessionSDP(e,{role:"initiator",direction:"incoming"})},n.toOutgoingSDPAnswer=function(e){return r.toSessionSDP(e,{role:"responder",direction:"outgoing"})},n.toIncomingMediaSDPOffer=function(e){return r.toMediaSDP(e,{role:"responder",direction:"incoming"})},n.toOutgoingMediaSDPOffer=function(e){return r.toMediaSDP(e,{role:"initiator",direction:"outgoing"})},n.toIncomingMediaSDPAnswer=function(e){return r.toMediaSDP(e,{role:"initiator",direction:"incoming"})},n.toOutgoingMediaSDPAnswer=function(e){return r.toMediaSDP(e,{role:"responder",direction:"outgoing"})},n.toCandidateSDP=r.toCandidateSDP,n.toMediaSDP=r.toMediaSDP,n.toSessionSDP=r.toSessionSDP,n.toIncomingJSONOffer=function(e,t){return i.toSessionJSON(e,{role:"responder",direction:"incoming",creators:t})},n.toOutgoingJSONOffer=function(e,t){return i.toSessionJSON(e,{role:"initiator",direction:"outgoing",creators:t})},n.toIncomingJSONAnswer=function(e,t){return i.toSessionJSON(e,{role:"initiator",direction:"incoming",creators:t})},n.toOutgoingJSONAnswer=function(e,t){return i.toSessionJSON(e,{role:"responder",direction:"outgoing",creators:t})},n.toIncomingMediaJSONOffer=function(e,t){return i.toMediaJSON(e,{role:"responder",direction:"incoming",creator:t})},n.toOutgoingMediaJSONOffer=function(e,t){return i.toMediaJSON(e,{role:"initiator",direction:"outgoing",creator:t})},n.toIncomingMediaJSONAnswer=function(e,t){return i.toMediaJSON(e,{role:"initiator",direction:"incoming",creator:t})},n.toOutgoingMediaJSONAnswer=function(e,t){return i.toMediaJSON(e,{role:"responder",direction:"outgoing",creator:t})},n.toCandidateJSON=i.toCandidateJSON,n.toMediaJSON=i.toMediaJSON,n.toSessionJSON=i.toSessionJSON},{"./lib/tojson":32,"./lib/tosdp":33}],30:[function(e,t,n){n.lines=function(e){return e.split("\r\n").filter(function(e){return e.length>0})},n.findLine=function(e,t,n){for(var r=e.length,i=0;i<t.length;i++)if(t[i].substr(0,r)===e)return t[i];if(!n)return!1;for(var o=0;o<n.length;o++)if(n[o].substr(0,r)===e)return n[o];return!1},n.findLines=function(e,t,n){for(var r=[],i=e.length,o=0;o<t.length;o++)t[o].substr(0,i)===e&&r.push(t[o]);if(r.length||!n)return r;for(var a=0;a<n.length;a++)n[a].substr(0,i)===e&&r.push(n[a]);return r},n.mline=function(e){for(var t=e.substr(2).split(" "),n={media:t[0],port:t[1],proto:t[2],formats:[]},r=3;r<t.length;r++)t[r]&&n.formats.push(t[r]);return n},n.rtpmap=function(e){var t=e.substr(9).split(" "),n={id:t.shift()};return t=t[0].split("/"),n.name=t[0],n.clockrate=t[1],n.channels=3==t.length?t[2]:"1",n},n.sctpmap=function(e){var t=e.substr(10).split(" ");return{number:t.shift(),protocol:t.shift(),streams:t.shift()}},n.fmtp=function(e){for(var t,n,r,i=e.substr(e.indexOf(" ")+1).split(";"),o=[],a=0;a<i.length;a++)t=i[a].split("="),n=t[0].trim(),r=t[1],n&&r?o.push({key:n,value:r}):n&&o.push({key:"",value:n});return o},n.crypto=function(e){var t=e.substr(9).split(" ");return{tag:t[0],cipherSuite:t[1],keyParams:t[2],sessionParams:t.slice(3).join(" ")}},n.fingerprint=function(e){var t=e.substr(14).split(" ");return{hash:t[0],value:t[1]}},n.extmap=function(e){var t=e.substr(9).split(" "),n={},r=t.shift(),i=r.indexOf("/");return i>=0?(n.id=r.substr(0,i),n.senders=r.substr(i+1)):(n.id=r,n.senders="sendrecv"),n.uri=t.shift()||"",n},n.rtcpfb=function(e){var t=e.substr(10).split(" "),n={};return n.id=t.shift(),n.type=t.shift(),"trr-int"===n.type?n.value=t.shift():n.subtype=t.shift()||"",n.parameters=t,n},n.candidate=function(e){var t;t=0===e.indexOf("a=candidate:")?e.substring(12).split(" "):e.substring(10).split(" ");for(var n={foundation:t[0],component:t[1],protocol:t[2].toLowerCase(),priority:t[3],ip:t[4],port:t[5],type:t[7],generation:"0"},r=8;r<t.length;r+=2)"raddr"===t[r]?n.relAddr=t[r+1]:"rport"===t[r]?n.relPort=t[r+1]:"generation"===t[r]?n.generation=t[r+1]:"tcptype"===t[r]&&(n.tcpType=t[r+1]);return n.network="1",n},n.sourceGroups=function(e){for(var t=[],n=0;n<e.length;n++){var r=e[n].substr(13).split(" ");t.push({semantics:r.shift(),sources:r})}return t},n.sources=function(e){for(var t=[],n={},r=0;r<e.length;r++){var i=e[r].substr(7).split(" "),o=i.shift();if(!n[o]){var a={ssrc:o,parameters:[]};t.push(a),n[o]=a}i=i.join(" ").split(":");var s=i.shift(),c=i.join(":")||null;n[o].parameters.push({key:s,value:c})}return t},n.groups=function(e){for(var t,n=[],r=0;r<e.length;r++)t=e[r].substr(8).split(" "),n.push({semantics:t.shift(),contents:t});return n},n.bandwidth=function(e){var t=e.substr(2).split(":"),n={};return n.type=t.shift(),n.bandwidth=t.shift(),n},n.msid=function(e){var t=e.substr(7),n=t.split(" ");return{msid:t,mslabel:n[0],label:n[1]}}},{}],31:[function(e,t,n){t.exports={initiator:{incoming:{initiator:"recvonly",responder:"sendonly",both:"sendrecv",none:"inactive",recvonly:"initiator",sendonly:"responder",sendrecv:"both",inactive:"none"},outgoing:{initiator:"sendonly",responder:"recvonly",both:"sendrecv",none:"inactive",recvonly:"responder",sendonly:"initiator",sendrecv:"both",inactive:"none"}},responder:{incoming:{initiator:"sendonly",responder:"recvonly",both:"sendrecv",none:"inactive",recvonly:"responder",sendonly:"initiator",sendrecv:"both",inactive:"none"},outgoing:{initiator:"recvonly",responder:"sendonly",both:"sendrecv",none:"inactive",recvonly:"initiator",sendonly:"responder",sendrecv:"both",inactive:"none"}}}},{}],32:[function(e,t,n){var r=e("./senders"),i=e("./parsers"),o=Math.random();n._setIdCounter=function(e){o=e},n.toSessionJSON=function(e,t){var r,o=t.creators||[],a=t.role||"initiator",s=t.direction||"outgoing",c=e.split("\r\nm=");for(r=1;r<c.length;r++)c[r]="m="+c[r],r!==c.length-1&&(c[r]+="\r\n");var u=c.shift()+"\r\n",l=i.lines(u),d={},p=[];for(r=0;r<c.length;r++)p.push(n.toMediaJSON(c[r],u,{role:a,direction:s,creator:o[r]||"initiator"}));d.contents=p;var f=i.findLines("a=group:",l);return f.length&&(d.groups=i.groups(f)),d},n.toMediaJSON=function(e,t,o){var a=o.creator||"initiator",s=o.role||"initiator",c=o.direction||"outgoing",u=i.lines(e),l=i.lines(t),d=i.mline(u[0]),p={creator:a,name:d.media,description:{descType:"rtp",media:d.media,payloads:[],encryption:[],feedback:[],headerExtensions:[]},transport:{transType:"iceUdp",candidates:[],fingerprints:[]}};"application"==d.media&&(p.description={descType:"datachannel"},p.transport.sctp=[]);var f=p.description,h=p.transport,g=i.findLine("a=mid:",u);if(g&&(p.name=g.substr(6)),i.findLine("a=sendrecv",u,l)?p.senders="both":i.findLine("a=sendonly",u,l)?p.senders=r[s][c].sendonly:i.findLine("a=recvonly",u,l)?p.senders=r[s][c].recvonly:i.findLine("a=inactive",u,l)&&(p.senders="none"),"rtp"==f.descType){var m=i.findLine("b=",u);m&&(f.bandwidth=i.bandwidth(m));var v=i.findLine("a=ssrc:",u);v&&(f.ssrc=v.substr(7).split(" ")[0]);i.findLines("a=rtpmap:",u).forEach(function(e){var t=i.rtpmap(e);t.parameters=[],t.feedback=[],i.findLines("a=fmtp:"+t.id,u).forEach(function(e){t.parameters=i.fmtp(e)}),i.findLines("a=rtcp-fb:"+t.id,u).forEach(function(e){t.feedback.push(i.rtcpfb(e))}),f.payloads.push(t)});i.findLines("a=crypto:",u,l).forEach(function(e){f.encryption.push(i.crypto(e))}),i.findLine("a=rtcp-mux",u)&&(f.mux=!0);i.findLines("a=rtcp-fb:*",u).forEach(function(e){f.feedback.push(i.rtcpfb(e))});i.findLines("a=extmap:",u).forEach(function(e){var t=i.extmap(e);t.senders=r[s][c][t.senders],f.headerExtensions.push(t)});var y=i.findLines("a=ssrc-group:",u);f.sourceGroups=i.sourceGroups(y||[]);var b=i.findLines("a=ssrc:",u),w=f.sources=i.sources(b||[]),k=i.findLine("a=msid:",u);if(k){var C=i.msid(k);["msid","mslabel","label"].forEach(function(e){for(var t=0;t<w.length;t++){for(var n=!1,r=0;r<w[t].parameters.length;r++)w[t].parameters[r].key===e&&(n=!0);n||w[t].parameters.push({key:e,value:C[e]})}})}i.findLine("a=x-google-flag:conference",u,l)&&(f.googConferenceFlag=!0)}var S=i.findLines("a=fingerprint:",u,l),x=i.findLine("a=setup:",u,l);S.forEach(function(e){var t=i.fingerprint(e);x&&(t.setup=x.substr(8)),h.fingerprints.push(t)});var T=i.findLine("a=ice-ufrag:",u,l),E=i.findLine("a=ice-pwd:",u,l);if(T&&E){h.ufrag=T.substr(12),h.pwd=E.substr(10),h.candidates=[];i.findLines("a=candidate:",u,l).forEach(function(e){h.candidates.push(n.toCandidateJSON(e))})}if("datachannel"==f.descType){i.findLines("a=sctpmap:",u).forEach(function(e){var t=i.sctpmap(e);h.sctp.push(t)})}return p},n.toCandidateJSON=function(e){var t=i.candidate(e.split("\r\n")[0]);return t.id=(o++).toString(36).substr(0,12),t}},{"./parsers":30,"./senders":31}],33:[function(e,t,n){var r=e("./senders");n.toSessionSDP=function(e,t){var r=(t.role,t.direction,t.sid||e.sid||Date.now()),i=t.time||Date.now(),o=["v=0","o=- "+r+" "+i+" IN IP4 0.0.0.0","s=-","t=0 0"],a=e.contents||[],s=!1;return a.forEach(function(e){e.description.sources&&e.description.sources.length&&(s=!0)}),s&&o.push("a=msid-semantic: WMS *"),(e.groups||[]).forEach(function(e){o.push("a=group:"+e.semantics+" "+e.contents.join(" "))}),a.forEach(function(e){o.push(n.toMediaSDP(e,t))}),o.join("\r\n")+"\r\n"},n.toMediaSDP=function(e,t){var i=[],o=t.role||"initiator",a=t.direction||"outgoing",s=e.description,c=e.transport,u=s.payloads||[],l=c&&c.fingerprints||[],d=[];if("datachannel"==s.descType?(d.push("application"),d.push("1"),d.push("DTLS/SCTP"),c.sctp&&c.sctp.forEach(function(e){d.push(e.number)})):(d.push(s.media),d.push("1"),l.length>0?d.push("UDP/TLS/RTP/SAVPF"):s.encryption&&s.encryption.length>0?d.push("RTP/SAVPF"):d.push("RTP/AVPF"),u.forEach(function(e){d.push(e.id)})),i.push("m="+d.join(" ")),i.push("c=IN IP4 0.0.0.0"),s.bandwidth&&s.bandwidth.type&&s.bandwidth.bandwidth&&i.push("b="+s.bandwidth.type+":"+s.bandwidth.bandwidth),"rtp"==s.descType&&i.push("a=rtcp:1 IN IP4 0.0.0.0"),c){c.ufrag&&i.push("a=ice-ufrag:"+c.ufrag),c.pwd&&i.push("a=ice-pwd:"+c.pwd);l.forEach(function(e){i.push("a=fingerprint:"+e.hash+" "+e.value),e.setup&&!0&&i.push("a=setup:"+e.setup)}),c.sctp&&c.sctp.forEach(function(e){i.push("a=sctpmap:"+e.number+" "+e.protocol+" "+e.streams)})}return"rtp"==s.descType&&i.push("a="+(r[o][a][e.senders]||"sendrecv")),i.push("a=mid:"+e.name),s.sources&&s.sources.length&&(s.sources[0].parameters||[]).forEach(function(e){"msid"===e.key&&i.push("a=msid:"+e.value)}),s.mux&&i.push("a=rtcp-mux"),(s.encryption||[]).forEach(function(e){i.push("a=crypto:"+e.tag+" "+e.cipherSuite+" "+e.keyParams+(e.sessionParams?" "+e.sessionParams:""))}),s.googConferenceFlag&&i.push("a=x-google-flag:conference"),u.forEach(function(e){var t="a=rtpmap:"+e.id+" "+e.name+"/"+e.clockrate;if(e.channels&&"1"!=e.channels&&(t+="/"+e.channels),i.push(t),e.parameters&&e.parameters.length){var n=["a=fmtp:"+e.id],r=[];e.parameters.forEach(function(e){r.push((e.key?e.key+"=":"")+e.value)}),n.push(r.join(";")),i.push(n.join(" "))}e.feedback&&e.feedback.forEach(function(t){"trr-int"===t.type?i.push("a=rtcp-fb:"+e.id+" trr-int "+(t.value?t.value:"0")):i.push("a=rtcp-fb:"+e.id+" "+t.type+(t.subtype?" "+t.subtype:""))})}),s.feedback&&s.feedback.forEach(function(e){"trr-int"===e.type?i.push("a=rtcp-fb:* trr-int "+(e.value?e.value:"0")):i.push("a=rtcp-fb:* "+e.type+(e.subtype?" "+e.subtype:""))}),(s.headerExtensions||[]).forEach(function(e){i.push("a=extmap:"+e.id+(e.senders?"/"+r[o][a][e.senders]:"")+" "+e.uri)}),(s.sourceGroups||[]).forEach(function(e){i.push("a=ssrc-group:"+e.semantics+" "+e.sources.join(" "))}),(s.sources||[]).forEach(function(e){for(var t=0;t<e.parameters.length;t++){var n=e.parameters[t];i.push("a=ssrc:"+(e.ssrc||s.ssrc)+" "+n.key+(n.value?":"+n.value:""))}}),(c.candidates||[]).forEach(function(e){i.push(n.toCandidateSDP(e))}),i.join("\r\n")},n.toCandidateSDP=function(e){var t=[];t.push(e.foundation),t.push(e.component),t.push(e.protocol.toUpperCase()),t.push(e.priority),t.push(e.ip),t.push(e.port);var n=e.type;return t.push("typ"),t.push(n),"srflx"!==n&&"prflx"!==n&&"relay"!==n||e.relAddr&&e.relPort&&(t.push("raddr"),t.push(e.relAddr),t.push("rport"),t.push(e.relPort)),e.tcpType&&"TCP"==e.protocol.toUpperCase()&&(t.push("tcptype"),t.push(e.tcpType)),t.push("generation"),t.push(e.generation||"0"),"a=candidate:"+t.join(" ")}},{"./senders":31}],34:[function(e,t,n){"use strict";var r={};r.generateIdentifier=function(){return Math.random().toString(36).substr(2,10)},r.localCName=r.generateIdentifier(),r.splitLines=function(e){return e.trim().split("\n").map(function(e){return e.trim()})},r.splitSections=function(e){return e.split("\nm=").map(function(e,t){return(t>0?"m="+e:e).trim()+"\r\n"})},r.matchPrefix=function(e,t){return r.splitLines(e).filter(function(e){return 0===e.indexOf(t)})},r.parseCandidate=function(e){var t;t=0===e.indexOf("a=candidate:")?e.substring(12).split(" "):e.substring(10).split(" ");for(var n={foundation:t[0],component:t[1],protocol:t[2].toLowerCase(),priority:parseInt(t[3],10),ip:t[4],port:parseInt(t[5],10),type:t[7]},r=8;r<t.length;r+=2)switch(t[r]){case"raddr":n.relatedAddress=t[r+1];break;case"rport":n.relatedPort=parseInt(t[r+1],10);break;case"tcptype":n.tcpType=t[r+1]}return n},r.writeCandidate=function(e){var t=[];t.push(e.foundation),t.push(e.component),t.push(e.protocol.toUpperCase()),t.push(e.priority),t.push(e.ip),t.push(e.port);var n=e.type;return t.push("typ"),t.push(n),"host"!==n&&e.relatedAddress&&e.relatedPort&&(t.push("raddr"),t.push(e.relatedAddress),t.push("rport"),t.push(e.relatedPort)),e.tcpType&&"tcp"===e.protocol.toLowerCase()&&(t.push("tcptype"),t.push(e.tcpType)),"candidate:"+t.join(" ")},r.parseRtpMap=function(e){var t=e.substr(9).split(" "),n={payloadType:parseInt(t.shift(),10)};return t=t[0].split("/"),n.name=t[0],n.clockRate=parseInt(t[1],10),n.numChannels=3===t.length?parseInt(t[2],10):1,n},r.writeRtpMap=function(e){var t=e.payloadType;return void 0!==e.preferredPayloadType&&(t=e.preferredPayloadType),"a=rtpmap:"+t+" "+e.name+"/"+e.clockRate+(1!==e.numChannels?"/"+e.numChannels:"")+"\r\n"},r.parseExtmap=function(e){var t=e.substr(9).split(" ");return{id:parseInt(t[0],10),uri:t[1]}},r.writeExtmap=function(e){return"a=extmap:"+(e.id||e.preferredId)+" "+e.uri+"\r\n"},r.parseFmtp=function(e){for(var t,n={},r=e.substr(e.indexOf(" ")+1).split(";"),i=0;i<r.length;i++)t=r[i].trim().split("="),n[t[0].trim()]=t[1];return n},r.writeFmtp=function(e){var t="",n=e.payloadType;if(void 0!==e.preferredPayloadType&&(n=e.preferredPayloadType),e.parameters&&Object.keys(e.parameters).length){var r=[];Object.keys(e.parameters).forEach(function(t){r.push(t+"="+e.parameters[t])}),t+="a=fmtp:"+n+" "+r.join(";")+"\r\n"}return t},r.parseRtcpFb=function(e){var t=e.substr(e.indexOf(" ")+1).split(" ");return{type:t.shift(),parameter:t.join(" ")}},r.writeRtcpFb=function(e){var t="",n=e.payloadType;return void 0!==e.preferredPayloadType&&(n=e.preferredPayloadType),e.rtcpFeedback&&e.rtcpFeedback.length&&e.rtcpFeedback.forEach(function(e){t+="a=rtcp-fb:"+n+" "+e.type+(e.parameter&&e.parameter.length?" "+e.parameter:"")+"\r\n"}),t},r.parseSsrcMedia=function(e){var t=e.indexOf(" "),n={ssrc:parseInt(e.substr(7,t-7),10)},r=e.indexOf(":",t);return r>-1?(n.attribute=e.substr(t+1,r-t-1),n.value=e.substr(r+1)):n.attribute=e.substr(t+1),n},r.getDtlsParameters=function(e,t){var n=r.splitLines(e);n=n.concat(r.splitLines(t));var i=n.filter(function(e){return 0===e.indexOf("a=fingerprint:")})[0].substr(14);return{role:"auto",fingerprints:[{algorithm:i.split(" ")[0],value:i.split(" ")[1]}]}},r.writeDtlsParameters=function(e,t){var n="a=setup:"+t+"\r\n";return e.fingerprints.forEach(function(e){n+="a=fingerprint:"+e.algorithm+" "+e.value+"\r\n"}),n},r.getIceParameters=function(e,t){var n=r.splitLines(e);return n=n.concat(r.splitLines(t)),{usernameFragment:n.filter(function(e){return 0===e.indexOf("a=ice-ufrag:")})[0].substr(12),password:n.filter(function(e){return 0===e.indexOf("a=ice-pwd:")})[0].substr(10)}},r.writeIceParameters=function(e){return"a=ice-ufrag:"+e.usernameFragment+"\r\na=ice-pwd:"+e.password+"\r\n"},r.parseRtpParameters=function(e){for(var t={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},n=r.splitLines(e),i=n[0].split(" "),o=3;o<i.length;o++){var a=i[o],s=r.matchPrefix(e,"a=rtpmap:"+a+" ")[0];if(s){var c=r.parseRtpMap(s),u=r.matchPrefix(e,"a=fmtp:"+a+" ");switch(c.parameters=u.length?r.parseFmtp(u[0]):{},c.rtcpFeedback=r.matchPrefix(e,"a=rtcp-fb:"+a+" ").map(r.parseRtcpFb),t.codecs.push(c),c.name.toUpperCase()){case"RED":case"ULPFEC":t.fecMechanisms.push(c.name.toUpperCase())}}}return r.matchPrefix(e,"a=extmap:").forEach(function(e){t.headerExtensions.push(r.parseExtmap(e))}),t},r.writeRtpDescription=function(e,t){var n="";return n+="m="+e+" ",n+=t.codecs.length>0?"9":"0",n+=" UDP/TLS/RTP/SAVPF ",n+=t.codecs.map(function(e){return void 0!==e.preferredPayloadType?e.preferredPayloadType:e.payloadType}).join(" ")+"\r\n",n+="c=IN IP4 0.0.0.0\r\n",n+="a=rtcp:9 IN IP4 0.0.0.0\r\n",t.codecs.forEach(function(e){n+=r.writeRtpMap(e),n+=r.writeFmtp(e),n+=r.writeRtcpFb(e)}),n+="a=rtcp-mux\r\n"},r.parseRtpEncodingParameters=function(e){var t,n=[],i=r.parseRtpParameters(e),o=-1!==i.fecMechanisms.indexOf("RED"),a=-1!==i.fecMechanisms.indexOf("ULPFEC"),s=r.matchPrefix(e,"a=ssrc:").map(function(e){return r.parseSsrcMedia(e)}).filter(function(e){return"cname"===e.attribute}),c=s.length>0&&s[0].ssrc,u=r.matchPrefix(e,"a=ssrc-group:FID").map(function(e){var t=e.split(" ");return t.shift(),t.map(function(e){return parseInt(e,10)})});u.length>0&&u[0].length>1&&u[0][0]===c&&(t=u[0][1]),i.codecs.forEach(function(e){if("RTX"===e.name.toUpperCase()&&e.parameters.apt){var r={ssrc:c,codecPayloadType:parseInt(e.parameters.apt,10),rtx:{payloadType:e.payloadType,ssrc:t}};n.push(r),o&&(r=JSON.parse(JSON.stringify(r)),r.fec={ssrc:t,mechanism:a?"red+ulpfec":"red"},n.push(r))}}),0===n.length&&c&&n.push({ssrc:c});var l=r.matchPrefix(e,"b=");return l.length&&(0===l[0].indexOf("b=TIAS:")?l=parseInt(l[0].substr(7),10):0===l[0].indexOf("b=AS:")&&(l=parseInt(l[0].substr(5),10)),n.forEach(function(e){e.maxBitrate=l})),n},r.writeSessionBoilerplate=function(){return"v=0\r\no=thisisadapterortc 8169639915646943137 2 IN IP4 127.0.0.1\r\ns=-\r\nt=0 0\r\n"},r.writeMediaSection=function(e,t,n,i){var o=r.writeRtpDescription(e.kind,t);if(o+=r.writeIceParameters(e.iceGatherer.getLocalParameters()),o+=r.writeDtlsParameters(e.dtlsTransport.getLocalParameters(),"offer"===n?"actpass":"active"),o+="a=mid:"+e.mid+"\r\n",o+=e.rtpSender&&e.rtpReceiver?"a=sendrecv\r\n":e.rtpSender?"a=sendonly\r\n":e.rtpReceiver?"a=recvonly\r\n":"a=inactive\r\n",e.rtpSender){var a="msid:"+i.id+" "+e.rtpSender.track.id+"\r\n";o+="a="+a,o+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" "+a}return o+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" cname:"+r.localCName+"\r\n"},r.getDirection=function(e,t){for(var n=r.splitLines(e),i=0;i<n.length;i++)switch(n[i]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return n[i].substr(2)}return t?r.getDirection(t):"sendrecv"},t.exports=r},{}],35:[function(e,t,n){function r(e){var t=this;s.call(this),this.id=e.id,this.parent=e.parent,this.type=e.type||"video",this.oneway=e.oneway||!1,this.sharemyscreen=e.sharemyscreen||!1,this.browserPrefix=e.prefix,this.stream=e.stream,this.enableDataChannels=void 0===e.enableDataChannels?this.parent.config.enableDataChannels:e.enableDataChannels,this.receiveMedia=e.receiveMedia||this.parent.config.receiveMedia,this.channels={},this.sid=e.sid||Date.now().toString(),this.pc=new a(this.parent.config.peerConnectionConfig,this.parent.config.peerConnectionConstraints),this.pc.on("ice",this.onIceCandidate.bind(this)),this.pc.on("offer",function(e){t.parent.config.nick&&(e.nick=t.parent.config.nick),t.send("offer",e)}),this.pc.on("answer",function(e){t.parent.config.nick&&(e.nick=t.parent.config.nick),t.send("answer",e)}),this.pc.on("addStream",this.handleRemoteStreamAdded.bind(this)),this.pc.on("addChannel",this.handleDataChannelAdded.bind(this)),this.pc.on("removeStream",this.handleStreamRemoved.bind(this)),this.pc.on("negotiationNeeded",this.emit.bind(this,"negotiationNeeded")),this.pc.on("iceConnectionStateChange",this.emit.bind(this,"iceConnectionStateChange")),this.pc.on("iceConnectionStateChange",function(){switch(t.pc.iceConnectionState){case"failed":"offer"===t.pc.pc.peerconnection.localDescription.type&&(t.parent.emit("iceFailed",t),t.send("connectivityError"))}}),this.pc.on("signalingStateChange",this.emit.bind(this,"signalingStateChange")),this.logger=this.parent.logger,"screen"===e.type?this.parent.localScreen&&this.sharemyscreen&&(this.logger.log("adding local screen stream to peer connection"),this.pc.addStream(this.parent.localScreen),this.broadcaster=e.broadcaster):this.parent.localStreams.forEach(function(e){t.pc.addStream(e)}),this.on("channelOpen",function(e){e.protocol===u&&(e.onmessage=function(n){var r=JSON.parse(n.data),i=new c.Receiver;i.receive(r,e),t.emit("fileTransfer",r,i),i.on("receivedFile",function(e,t){i.channel.close()})})}),this.on("*",function(){t.parent.emit.apply(t.parent,arguments)})}var i=e("util"),o=e("webrtcsupport"),a=e("rtcpeerconnection"),s=e("wildemitter"),c=e("filetransfer"),u="https://simplewebrtc.com/protocol/filetransfer#inband-v1";i.inherits(r,s),r.prototype.handleMessage=function(e){var t=this;this.logger.log("getting",e.type,e),e.prefix&&(this.browserPrefix=e.prefix),"offer"===e.type?(this.nick||(this.nick=e.payload.nick),delete e.payload.nick,e.payload.sdp=e.payload.sdp.replace("a=fmtp:0 profile-level-id=0x42e00c;packetization-mode=1\r\n",""),this.pc.handleOffer(e.payload,function(e){e||t.pc.answer(t.receiveMedia,function(e,t){})})):"answer"===e.type?(this.nick||(this.nick=e.payload.nick),delete e.payload.nick,this.pc.handleAnswer(e.payload)):"candidate"===e.type?this.pc.processIce(e.payload):"connectivityError"===e.type?this.parent.emit("connectivityError",t):"mute"===e.type?this.parent.emit("mute",{id:e.from,name:e.payload.name}):"unmute"===e.type&&this.parent.emit("unmute",{id:e.from,name:e.payload.name})},r.prototype.send=function(e,t){var n={to:this.id,sid:this.sid,broadcaster:this.broadcaster,roomType:this.type,type:e,payload:t,prefix:o.prefix};this.logger.log("sending",e,n),this.parent.emit("message",n)},r.prototype.sendDirectly=function(e,t,n){var r={type:t,payload:n};this.logger.log("sending via datachannel",e,t,r);var i=this.getDataChannel(e);return"open"==i.readyState&&(i.send(JSON.stringify(r)),!0)},r.prototype._observeDataChannel=function(e){var t=this;e.onclose=this.emit.bind(this,"channelClose",e),e.onerror=this.emit.bind(this,"channelError",e),e.onmessage=function(n){t.emit("channelMessage",t,e.label,JSON.parse(n.data),e,n)},e.onopen=this.emit.bind(this,"channelOpen",e)},r.prototype.getDataChannel=function(e,t){if(!o.supportDataChannel)return this.emit("error",new Error("createDataChannel not supported"));var n=this.channels[e];return t||(t={}),n||(n=this.channels[e]=this.pc.createDataChannel(e,t),this._observeDataChannel(n),n)},r.prototype.onIceCandidate=function(e){if(!this.closed)if(e){var t=this.parent.config.peerConnectionConfig;"moz"===o.prefix&&t&&t.iceTransports&&e.candidate&&e.candidate.candidate&&e.candidate.candidate.indexOf(t.iceTransports)<0?this.logger.log("Ignoring ice candidate not matching pcConfig iceTransports type: ",t.iceTransports):this.send("candidate",e)}else this.logger.log("End of candidates.")},r.prototype.start=function(){this.enableDataChannels&&this.getDataChannel("simplewebrtc"),this.pc.offer(this.receiveMedia,function(e,t){})},r.prototype.icerestart=function(){var e=this.receiveMedia;e.mandatory.IceRestart=!0,this.pc.offer(e,function(e,t){})},r.prototype.end=function(){this.closed||(this.pc.close(),this.handleStreamRemoved())},r.prototype.handleRemoteStreamAdded=function(e){var t=this;this.stream?this.logger.warn("Already have a remote stream"):(this.stream=e.stream,this.stream.onended=function(){t.end()},this.parent.emit("peerStreamAdded",this))},r.prototype.handleStreamRemoved=function(){this.parent.peers.splice(this.parent.peers.indexOf(this),1),this.closed=!0,this.parent.emit("peerStreamRemoved",this)},r.prototype.handleDataChannelAdded=function(e){this.channels[e.label]=e,this._observeDataChannel(e)},r.prototype.sendFile=function(e){var t=new c.Sender,n=this.getDataChannel("filetransfer"+(new Date).getTime(),{protocol:u});return n.onopen=function(){n.send(JSON.stringify({size:e.size,name:e.name})),t.send(e,n)},n.onclose=function(){console.log("sender received transfer"),t.emit("complete")},t},t.exports=r},{filetransfer:2,rtcpeerconnection:28,util:57,webrtcsupport:51,wildemitter:52}],36:[function(e,t,n){function r(e){var t,n,r=this,l=e||{},d=this.config={url:"https://signaling.simplewebrtc.com:443/",socketio:{},connection:null,debug:!1,localVideoEl:"",remoteVideosEl:"",enableDataChannels:!0,autoRequestMedia:!1,autoRemoveVideos:!0,adjustPeerVolume:!0,peerVolumeWhenSpeaking:.25,media:{video:!0,audio:!0},receiveMedia:{mandatory:{OfferToReceiveAudio:!0,OfferToReceiveVideo:!0}},localVideo:{autoplay:!0,mirror:!0,muted:!0}};this.logger=function(){return e.debug?e.logger||console:e.logger||c}();for(t in l)this.config[t]=l[t];this.capabilities=a,o.call(this),n=null===this.config.connection?this.connection=new u(this.config):this.connection=this.config.connection,n.on("connect",function(){r.emit("connectionReady",n.getSessionid()),r.sessionReady=!0,r.testReadiness()}),n.on("message",function(e){var t,n=r.webrtc.getPeers(e.from,e.roomType);"offer"===e.type?(n.length&&n.forEach(function(n){n.sid==e.sid&&(t=n)}),t||(t=r.webrtc.createPeer({id:e.from,sid:e.sid,type:e.roomType,enableDataChannels:r.config.enableDataChannels&&"screen"!==e.roomType,sharemyscreen:"screen"===e.roomType&&!e.broadcaster,broadcaster:"screen"!==e.roomType||e.broadcaster?null:r.connection.getSessionid()}),r.emit("createdPeer",t)),t.handleMessage(e)):n.length&&n.forEach(function(t){e.sid?t.sid===e.sid&&t.handleMessage(e):t.handleMessage(e)})}),n.on("remove",function(e){e.id!==r.connection.getSessionid()&&r.webrtc.removePeers(e.id,e.type)}),e.logger=this.logger,e.debug=!1,this.webrtc=new i(e),["mute","unmute","pauseVideo","resumeVideo","pause","resume","sendToAll","sendDirectlyToAll","getPeers"].forEach(function(e){r[e]=r.webrtc[e].bind(r.webrtc)}),this.webrtc.on("*",function(){r.emit.apply(r,arguments)}),d.debug&&this.on("*",this.logger.log.bind(this.logger,"SimpleWebRTC event:")),this.webrtc.on("localStream",function(){r.testReadiness()}),this.webrtc.on("message",function(e){r.connection.emit("message",e)}),this.webrtc.on("peerStreamAdded",this.handlePeerStreamAdded.bind(this)),this.webrtc.on("peerStreamRemoved",this.handlePeerStreamRemoved.bind(this)),this.config.adjustPeerVolume&&(this.webrtc.on("speaking",this.setVolumeForAll.bind(this,this.config.peerVolumeWhenSpeaking)),this.webrtc.on("stoppedSpeaking",this.setVolumeForAll.bind(this,1))),n.on("stunservers",function(e){r.webrtc.config.peerConnectionConfig.iceServers=e,r.emit("stunservers",e)}),n.on("turnservers",function(e){r.webrtc.config.peerConnectionConfig.iceServers=r.webrtc.config.peerConnectionConfig.iceServers.concat(e),r.emit("turnservers",e)}),this.webrtc.on("iceFailed",function(e){}),this.webrtc.on("connectivityError",function(e){}),this.webrtc.on("audioOn",function(){r.webrtc.sendToAll("unmute",{name:"audio"})}),this.webrtc.on("audioOff",function(){r.webrtc.sendToAll("mute",{name:"audio"})}),this.webrtc.on("videoOn",function(){r.webrtc.sendToAll("unmute",{name:"video"})}),this.webrtc.on("videoOff",function(){r.webrtc.sendToAll("mute",{name:"video"})}),this.webrtc.on("localScreen",function(e){var t=document.createElement("video"),n=r.getRemoteVideoContainer();t.oncontextmenu=function(){return!1},t.id="localScreen",s(e,t),n&&n.appendChild(t),r.emit("localScreenAdded",t),r.connection.emit("shareScreen"),r.webrtc.peers.forEach(function(e){var t;"video"===e.type&&(t=r.webrtc.createPeer({id:e.id,type:"screen",sharemyscreen:!0,enableDataChannels:!1,receiveMedia:{mandatory:{OfferToReceiveAudio:!1,OfferToReceiveVideo:!1}},broadcaster:r.connection.getSessionid()}),r.emit("createdPeer",t),t.start())})}),this.webrtc.on("localScreenStopped",function(e){r.stopScreenShare()}),this.webrtc.on("channelMessage",function(e,t,n){"volume"==n.type&&r.emit("remoteVolumeChange",e,n.volume)}),this.config.autoRequestMedia&&this.startLocalVideo()}var i=e("./webrtc"),o=e("wildemitter"),a=e("webrtcsupport"),s=e("attachmediastream"),c=e("mockconsole"),u=e("./socketioconnection");r.prototype=Object.create(o.prototype,{constructor:{value:r}}),r.prototype.leaveRoom=function(){this.roomName&&(this.connection.emit("leave"),this.webrtc.peers.forEach(function(e){e.end()}),this.getLocalScreen()&&this.stopScreenShare(),this.emit("leftRoom",this.roomName),this.roomName=void 0)},r.prototype.disconnect=function(){this.connection.disconnect(),delete this.connection},r.prototype.handlePeerStreamAdded=function(e){var t=this,n=this.getRemoteVideoContainer(),r=s(e.stream);e.videoEl=r,r.id=this.getDomId(e),n&&n.appendChild(r),this.emit("videoAdded",r,e),window.setTimeout(function(){t.webrtc.isAudioEnabled()||e.send("mute",{name:"audio"}),t.webrtc.isVideoEnabled()||e.send("mute",{name:"video"})},250)},r.prototype.handlePeerStreamRemoved=function(e){var t=this.getRemoteVideoContainer(),n=e.videoEl;this.config.autoRemoveVideos&&t&&n&&t.removeChild(n),n&&this.emit("videoRemoved",n,e)},r.prototype.getDomId=function(e){return[e.id,e.type,e.broadcaster?"broadcasting":"incoming"].join("_")},r.prototype.setVolumeForAll=function(e){this.webrtc.peers.forEach(function(t){t.videoEl&&(t.videoEl.volume=e)})},r.prototype.joinRoom=function(e,t){var n=this;this.roomName=e,this.connection.emit("join",e,function(r,i){if(r)n.emit("error",r);else{var o,a,s,c;for(o in i.clients){a=i.clients[o];for(s in a)a[s]&&(c=n.webrtc.createPeer({id:o,type:s,enableDataChannels:n.config.enableDataChannels&&"screen"!==s,receiveMedia:{mandatory:{OfferToReceiveAudio:"screen"!==s&&n.config.receiveMedia.mandatory.OfferToReceiveAudio,OfferToReceiveVideo:n.config.receiveMedia.mandatory.OfferToReceiveVideo}}}),n.emit("createdPeer",c),c.start())}}t&&t(r,i),n.emit("joinedRoom",e)})},r.prototype.getEl=function(e){return"string"==typeof e?document.getElementById(e):e},r.prototype.startLocalVideo=function(){var e=this;this.webrtc.startLocalMedia(this.config.media,function(t,n){t?e.emit("localMediaError",t):s(n,e.getLocalVideoContainer(),e.config.localVideo)})},r.prototype.stopLocalVideo=function(){this.webrtc.stopLocalMedia()},r.prototype.getLocalVideoContainer=function(){var e=this.getEl(this.config.localVideoEl);if(e&&"VIDEO"===e.tagName)return e.oncontextmenu=function(){return!1},e;if(e){var t=document.createElement("video");return t.oncontextmenu=function(){return!1},e.appendChild(t),t}},r.prototype.getRemoteVideoContainer=function(){return this.getEl(this.config.remoteVideosEl)},r.prototype.shareScreen=function(e){this.webrtc.startScreenShare(e)},r.prototype.getLocalScreen=function(){return this.webrtc.localScreen},r.prototype.stopScreenShare=function(){this.connection.emit("unshareScreen");var e=document.getElementById("localScreen"),t=this.getRemoteVideoContainer(),n=this.getLocalScreen();this.config.autoRemoveVideos&&t&&e&&t.removeChild(e),e&&this.emit("videoRemoved",e),n&&n.stop(),this.webrtc.peers.forEach(function(e){e.broadcaster&&e.end()})},r.prototype.testReadiness=function(){var e=this;this.webrtc.localStream&&this.sessionReady&&e.emit("readyToCall",e.connection.getSessionid())},r.prototype.createRoom=function(e,t){2===arguments.length?this.connection.emit("create",e,t):this.connection.emit("create",e)},r.prototype.sendFile=function(){if(!a.dataChannel)return this.emit("error",new Error("DataChannelNotSupported"))},t.exports=r},{"./socketioconnection":37,"./webrtc":38,attachmediastream:1,mockconsole:27,webrtcsupport:51,wildemitter:52}],37:[function(e,t,n){function r(e){this.connection=i.connect(e.url,e.socketio)}var i=e("socket.io-client");r.prototype.on=function(e,t){this.connection.on(e,t)},r.prototype.emit=function(){this.connection.emit.apply(this.connection,arguments)},r.prototype.getSessionid=function(){return this.connection.socket.sessionid},r.prototype.disconnect=function(){return this.connection.disconnect()},t.exports=r},{"socket.io-client":39}],38:[function(e,t,n){function r(e){var t,n=this,r=e||{};this.config={debug:!1,peerConnectionConfig:{iceServers:[{url:"stun:stun.l.google.com:19302"}]},peerConnectionConstraints:{optional:[{DtlsSrtpKeyAgreement:!0}]},receiveMedia:{mandatory:{OfferToReceiveAudio:!0,OfferToReceiveVideo:!0}},enableDataChannels:!0},this.screenSharingSupport=o.screenSharing,this.logger=function(){return e.debug?e.logger||console:e.logger||a}();for(t in r)this.config[t]=r[t];o.support||this.logger.error("Your browser doesn't seem to support WebRTC"),this.peers=[],s.call(this,this.config),this.on("speaking",function(){n.hardMuted||n.peers.forEach(function(e){if(e.enableDataChannels){var t=e.getDataChannel("hark");if("open"!=t.readyState)return;t.send(JSON.stringify({type:"speaking"}))}})}),this.on("stoppedSpeaking",function(){n.hardMuted||n.peers.forEach(function(e){if(e.enableDataChannels){var t=e.getDataChannel("hark");if("open"!=t.readyState)return;t.send(JSON.stringify({type:"stoppedSpeaking"}))}})}),this.on("volumeChange",function(e,t){n.hardMuted||n.peers.forEach(function(t){if(t.enableDataChannels){var n=t.getDataChannel("hark");if("open"!=n.readyState)return;n.send(JSON.stringify({type:"volume",volume:e}))}})}),this.config.debug&&this.on("*",function(e,t,r){var i;i=n.config.logger===a?console:n.logger,i.log("event:",e,t,r)})}var i=e("util"),o=e("webrtcsupport"),a=(e("wildemitter"),e("mockconsole")),s=e("localmedia"),c=e("./peer");i.inherits(r,s),r.prototype.createPeer=function(e){var t;return e.parent=this,t=new c(e),this.peers.push(t),t},r.prototype.removePeers=function(e,t){this.getPeers(e,t).forEach(function(e){e.end()})},r.prototype.getPeers=function(e,t){return this.peers.filter(function(n){return!(e&&n.id!==e||t&&n.type!==t)})},r.prototype.sendToAll=function(e,t){this.peers.forEach(function(n){n.send(e,t)})},r.prototype.sendDirectlyToAll=function(e,t,n){this.peers.forEach(function(r){r.enableDataChannels&&r.sendDirectly(e,t,n)})},t.exports=r},{"./peer":35,localmedia:7,mockconsole:27,util:57,webrtcsupport:51,wildemitter:52}],39:[function(require,module,exports){var io="undefined"==typeof module?{}:module.exports;!function(){if(function(e,t){var n=e;n.version="0.9.16",n.protocol=1,n.transports=[],n.j=[],n.sockets={},n.connect=function(e,r){var i,o,a=n.util.parseUri(e);t&&t.location&&(a.protocol=a.protocol||t.location.protocol.slice(0,-1),a.host=a.host||(t.document?t.document.domain:t.location.hostname),a.port=a.port||t.location.port),i=n.util.uniqueUri(a);var s={host:a.host,secure:"https"==a.protocol,port:a.port||("https"==a.protocol?443:80),query:a.query||""};return n.util.merge(s,r),!s["force new connection"]&&n.sockets[i]||(o=new n.Socket(s)),!s["force new connection"]&&o&&(n.sockets[i]=o),o=o||n.sockets[i],o.of(a.path.length>1?a.path:"")}}("object"==typeof module?module.exports:this.io={},this),function(e,t){var n=e.util={},r=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,i=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];n.parseUri=function(e){for(var t=r.exec(e||""),n={},o=14;o--;)n[i[o]]=t[o]||"";return n},n.uniqueUri=function(e){var n=e.protocol,r=e.host,i=e.port;return"document"in t?(r=r||document.domain,i=i||("https"==n&&"https:"!==document.location.protocol?443:document.location.port)):(r=r||"localhost",i||"https"!=n||(i=443)),(n||"http")+"://"+r+":"+(i||80)},n.query=function(e,t){var r=n.chunkQuery(e||""),i=[];n.merge(r,n.chunkQuery(t||""));for(var o in r)r.hasOwnProperty(o)&&i.push(o+"="+r[o]);return i.length?"?"+i.join("&"):""},n.chunkQuery=function(e){for(var t,n={},r=e.split("&"),i=0,o=r.length;i<o;++i)t=r[i].split("="),t[0]&&(n[t[0]]=t[1]);return n};var o=!1;n.load=function(e){return"document"in t&&"complete"===document.readyState||o?e():void n.on(t,"load",e,!1)},n.on=function(e,t,n,r){e.attachEvent?e.attachEvent("on"+t,n):e.addEventListener&&e.addEventListener(t,n,r)},n.request=function(e){if(e&&"undefined"!=typeof XDomainRequest&&!n.ua.hasCORS)return new XDomainRequest;if("undefined"!=typeof XMLHttpRequest&&(!e||n.ua.hasCORS))return new XMLHttpRequest;if(!e)try{return new(window[["Active"].concat("Object").join("X")])("Microsoft.XMLHTTP")}catch(e){}return null},"undefined"!=typeof window&&n.load(function(){o=!0}),n.defer=function(e){return n.ua.webkit&&"undefined"==typeof importScripts?void n.load(function(){setTimeout(e,100)}):e()},n.merge=function(e,t,r,i){var o,a=i||[],s="undefined"==typeof r?2:r;for(o in t)t.hasOwnProperty(o)&&n.indexOf(a,o)<0&&("object"==typeof e[o]&&s?n.merge(e[o],t[o],s-1,a):(e[o]=t[o],a.push(t[o])));return e},n.mixin=function(e,t){n.merge(e.prototype,t.prototype)},n.inherit=function(e,t){function n(){}n.prototype=t.prototype,e.prototype=new n},n.isArray=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},n.intersect=function(e,t){for(var r=[],i=e.length>t.length?e:t,o=e.length>t.length?t:e,a=0,s=o.length;a<s;a++)~n.indexOf(i,o[a])&&r.push(o[a]);return r},n.indexOf=function(e,t,n){for(var r=e.length,n=n<0?n+r<0?0:n+r:n||0;n<r&&e[n]!==t;n++);return r<=n?-1:n},n.toArray=function(e){for(var t=[],n=0,r=e.length;n<r;n++)t.push(e[n]);return t},n.ua={},n.ua.hasCORS="undefined"!=typeof XMLHttpRequest&&function(){try{var e=new XMLHttpRequest}catch(e){return!1}return void 0!=e.withCredentials}(),n.ua.webkit="undefined"!=typeof navigator&&/webkit/i.test(navigator.userAgent),n.ua.iDevice="undefined"!=typeof navigator&&/iPad|iPhone|iPod/i.test(navigator.userAgent)}("undefined"!=typeof io?io:module.exports,this),function(e,t){function n(){}e.EventEmitter=n,n.prototype.on=function(e,n){return this.$events||(this.$events={}),this.$events[e]?t.util.isArray(this.$events[e])?this.$events[e].push(n):this.$events[e]=[this.$events[e],n]:this.$events[e]=n,this},n.prototype.addListener=n.prototype.on,n.prototype.once=function(e,t){function n(){r.removeListener(e,n),t.apply(this,arguments)}var r=this;return n.listener=t,this.on(e,n),this},n.prototype.removeListener=function(e,n){if(this.$events&&this.$events[e]){var r=this.$events[e];if(t.util.isArray(r)){for(var i=-1,o=0,a=r.length;o<a;o++)if(r[o]===n||r[o].listener&&r[o].listener===n){i=o;break}if(i<0)return this;r.splice(i,1),r.length||delete this.$events[e]}else(r===n||r.listener&&r.listener===n)&&delete this.$events[e]}return this},n.prototype.removeAllListeners=function(e){return void 0===e?(this.$events={},this):(this.$events&&this.$events[e]&&(this.$events[e]=null),this)},n.prototype.listeners=function(e){return this.$events||(this.$events={}),this.$events[e]||(this.$events[e]=[]),t.util.isArray(this.$events[e])||(this.$events[e]=[this.$events[e]]),this.$events[e]},n.prototype.emit=function(e){if(!this.$events)return!1;var n=this.$events[e];if(!n)return!1;var r=Array.prototype.slice.call(arguments,1);if("function"==typeof n)n.apply(this,r);else{if(!t.util.isArray(n))return!1;for(var i=n.slice(),o=0,a=i.length;o<a;o++)i[o].apply(this,r)}return!0}}("undefined"!=typeof io?io:module.exports,"undefined"!=typeof io?io:module.parent.exports),function(exports,nativeJSON){"use strict";function f(e){return e<10?"0"+e:e}function date(e,t){return isFinite(e.valueOf())?e.getUTCFullYear()+"-"+f(e.getUTCMonth()+1)+"-"+f(e.getUTCDate())+"T"+f(e.getUTCHours())+":"+f(e.getUTCMinutes())+":"+f(e.getUTCSeconds())+"Z":null}function quote(e){return escapable.lastIndex=0,escapable.test(e)?'"'+e.replace(escapable,function(e){var t=meta[e];return"string"==typeof t?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'}function str(e,t){var n,r,i,o,a,s=gap,c=t[e];switch(c instanceof Date&&(c=date(e)),"function"==typeof rep&&(c=rep.call(t,e,c)),typeof c){case"string":return quote(c);case"number":return isFinite(c)?String(c):"null";case"boolean":case"null":return String(c);case"object":if(!c)return"null";if(gap+=indent,a=[],"[object Array]"===Object.prototype.toString.apply(c)){for(o=c.length,n=0;n<o;n+=1)a[n]=str(n,c)||"null";return i=0===a.length?"[]":gap?"[\n"+gap+a.join(",\n"+gap)+"\n"+s+"]":"["+a.join(",")+"]",gap=s,i}if(rep&&"object"==typeof rep)for(o=rep.length,n=0;n<o;n+=1)"string"==typeof rep[n]&&(r=rep[n],(i=str(r,c))&&a.push(quote(r)+(gap?": ":":")+i));else for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(i=str(r,c))&&a.push(quote(r)+(gap?": ":":")+i);return i=0===a.length?"{}":gap?"{\n"+gap+a.join(",\n"+gap)+"\n"+s+"}":"{"+a.join(",")+"}",gap=s,i}}if(nativeJSON&&nativeJSON.parse)return exports.JSON={parse:nativeJSON.parse,stringify:nativeJSON.stringify};var JSON=exports.JSON={},cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;JSON.stringify=function(e,t,n){var r;if(gap="",indent="","number"==typeof n)for(r=0;r<n;r+=1)indent+=" ";else"string"==typeof n&&(indent=n);if(rep=t,t&&"function"!=typeof t&&("object"!=typeof t||"number"!=typeof t.length))throw new Error("JSON.stringify");return str("",{"":e})},JSON.parse=function(text,reviver){function walk(e,t){var n,r,i=e[t];if(i&&"object"==typeof i)for(n in i)Object.prototype.hasOwnProperty.call(i,n)&&(r=walk(i,n),void 0!==r?i[n]=r:delete i[n]);return reviver.call(e,t,i)}var j;if(text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")}}("undefined"!=typeof io?io:module.exports,"undefined"!=typeof JSON?JSON:void 0),function(e,t){var n=e.parser={},r=n.packets=["disconnect","connect","heartbeat","message","json","event","ack","error","noop"],i=n.reasons=["transport not supported","client not handshaken","unauthorized"],o=n.advice=["reconnect"],a=t.JSON,s=t.util.indexOf;n.encodePacket=function(e){var t=s(r,e.type),n=e.id||"",c=e.endpoint||"",u=e.ack,l=null;switch(e.type){case"error":var d=e.reason?s(i,e.reason):"",p=e.advice?s(o,e.advice):"";""===d&&""===p||(l=d+(""!==p?"+"+p:""));break;case"message":""!==e.data&&(l=e.data);break;case"event":var f={name:e.name};e.args&&e.args.length&&(f.args=e.args),l=a.stringify(f);break;case"json":l=a.stringify(e.data);break;case"connect":e.qs&&(l=e.qs);break;case"ack":l=e.ackId+(e.args&&e.args.length?"+"+a.stringify(e.args):"")}var h=[t,n+("data"==u?"+":""),c];return null!==l&&void 0!==l&&h.push(l),h.join(":")},n.encodePayload=function(e){var t="";if(1==e.length)return e[0];for(var n=0,r=e.length;n<r;n++){t+="\ufffd"+e[n].length+"\ufffd"+e[n]}return t};var c=/([^:]+):([0-9]+)?(\+)?:([^:]+)?:?([\s\S]*)?/;n.decodePacket=function(e){var t=e.match(c);if(!t)return{};var n=t[2]||"",e=t[5]||"",s={type:r[t[1]],endpoint:t[4]||""};switch(n&&(s.id=n,t[3]?s.ack="data":s.ack=!0),s.type){case"error":var t=e.split("+");s.reason=i[t[0]]||"",s.advice=o[t[1]]||"";break;case"message":s.data=e||"";break;case"event":try{var u=a.parse(e);s.name=u.name,s.args=u.args}catch(e){}s.args=s.args||[];break;case"json":try{s.data=a.parse(e)}catch(e){}break;case"connect":s.qs=e||"";break;case"ack":var t=e.match(/^([0-9]+)(\+)?(.*)/);if(t&&(s.ackId=t[1],s.args=[],t[3]))try{s.args=t[3]?a.parse(t[3]):[]}catch(e){}}return s},n.decodePayload=function(e){if("\ufffd"==e.charAt(0)){for(var t=[],r=1,i="";r<e.length;r++)"\ufffd"==e.charAt(r)?(t.push(n.decodePacket(e.substr(r+1).substr(0,i))),r+=Number(i)+1,i=""):i+=e.charAt(r);return t}return[n.decodePacket(e)]}}("undefined"!=typeof io?io:module.exports,"undefined"!=typeof io?io:module.parent.exports),function(e,t){function n(e,t){this.socket=e,this.sessid=t}e.Transport=n,t.util.mixin(n,t.EventEmitter),n.prototype.heartbeats=function(){return!0},n.prototype.onData=function(e){if(this.clearCloseTimeout(),(this.socket.connected||this.socket.connecting||this.socket.reconnecting)&&this.setCloseTimeout(),""!==e){var n=t.parser.decodePayload(e);if(n&&n.length)for(var r=0,i=n.length;r<i;r++)this.onPacket(n[r])}return this},n.prototype.onPacket=function(e){return this.socket.setHeartbeatTimeout(),"heartbeat"==e.type?this.onHeartbeat():("connect"==e.type&&""==e.endpoint&&this.onConnect(),"error"==e.type&&"reconnect"==e.advice&&(this.isOpen=!1),this.socket.onPacket(e),this)},n.prototype.setCloseTimeout=function(){if(!this.closeTimeout){var e=this;this.closeTimeout=setTimeout(function(){e.onDisconnect()},this.socket.closeTimeout)}},n.prototype.onDisconnect=function(){return this.isOpen&&this.close(),this.clearTimeouts(),this.socket.onDisconnect(),this},n.prototype.onConnect=function(){return this.socket.onConnect(),this},n.prototype.clearCloseTimeout=function(){this.closeTimeout&&(clearTimeout(this.closeTimeout),this.closeTimeout=null)},n.prototype.clearTimeouts=function(){this.clearCloseTimeout(),this.reopenTimeout&&clearTimeout(this.reopenTimeout)},n.prototype.packet=function(e){this.send(t.parser.encodePacket(e))},n.prototype.onHeartbeat=function(e){this.packet({type:"heartbeat"})},n.prototype.onOpen=function(){this.isOpen=!0,this.clearCloseTimeout(),this.socket.onOpen()},n.prototype.onClose=function(){this.isOpen=!1,this.socket.onClose(),this.onDisconnect()},n.prototype.prepareUrl=function(){var e=this.socket.options;return this.scheme()+"://"+e.host+":"+e.port+"/"+e.resource+"/"+t.protocol+"/"+this.name+"/"+this.sessid},n.prototype.ready=function(e,t){t.call(this)}}("undefined"!=typeof io?io:module.exports,"undefined"!=typeof io?io:module.parent.exports),function(e,t,n){function r(e){if(this.options={port:80,secure:!1,document:"document"in n&&document,resource:"socket.io",transports:t.transports,"connect timeout":1e4,"try multiple transports":!0,reconnect:!0,"reconnection delay":500,"reconnection limit":1/0,"reopen delay":3e3,"max reconnection attempts":10,"sync disconnect on unload":!1,"auto connect":!0,"flash policy port":10843,manualFlush:!1},t.util.merge(this.options,e),this.connected=!1,this.open=!1,this.connecting=!1,this.reconnecting=!1,this.namespaces={},this.buffer=[],this.doBuffer=!1,this.options["sync disconnect on unload"]&&(!this.isXDomain()||t.util.ua.hasCORS)){var r=this;t.util.on(n,"beforeunload",function(){r.disconnectSync()},!1)}this.options["auto connect"]&&this.connect()}function i(){}e.Socket=r,t.util.mixin(r,t.EventEmitter),r.prototype.of=function(e){return this.namespaces[e]||(this.namespaces[e]=new t.SocketNamespace(this,e),""!==e&&this.namespaces[e].packet({type:"connect"})),this.namespaces[e]},r.prototype.publish=function(){this.emit.apply(this,arguments);var e;for(var t in this.namespaces)this.namespaces.hasOwnProperty(t)&&(e=this.of(t),e.$emit.apply(e,arguments))},r.prototype.handshake=function(e){function n(t){t instanceof Error?(r.connecting=!1,r.onError(t.message)):e.apply(null,t.split(":"))}var r=this,o=this.options,a=["http"+(o.secure?"s":"")+":/",o.host+":"+o.port,o.resource,t.protocol,t.util.query(this.options.query,"t="+ +new Date)].join("/");if(this.isXDomain()&&!t.util.ua.hasCORS){var s=document.getElementsByTagName("script")[0],c=document.createElement("script");c.src=a+"&jsonp="+t.j.length,s.parentNode.insertBefore(c,s),t.j.push(function(e){n(e),c.parentNode.removeChild(c)})}else{var u=t.util.request();u.open("GET",a,!0),this.isXDomain()&&(u.withCredentials=!0),u.onreadystatechange=function(){4==u.readyState&&(u.onreadystatechange=i,200==u.status?n(u.responseText):403==u.status?r.onError(u.responseText):(r.connecting=!1,!r.reconnecting&&r.onError(u.responseText)))},u.send(null)}},r.prototype.getTransport=function(e){for(var n,r=e||this.transports,i=0;n=r[i];i++)if(t.Transport[n]&&t.Transport[n].check(this)&&(!this.isXDomain()||t.Transport[n].xdomainCheck(this)))return new t.Transport[n](this,this.sessionid);return null},r.prototype.connect=function(e){if(this.connecting)return this;var n=this;return n.connecting=!0,this.handshake(function(r,i,o,a){function s(e){return n.transport&&n.transport.clearTimeouts(),n.transport=n.getTransport(e),n.transport?void n.transport.ready(n,function(){n.connecting=!0,n.publish("connecting",n.transport.name),n.transport.open(),n.options["connect timeout"]&&(n.connectTimeoutTimer=setTimeout(function(){if(!n.connected&&(n.connecting=!1,n.options["try multiple transports"])){for(var e=n.transports;e.length>0&&e.splice(0,1)[0]!=n.transport.name;);e.length?s(e):n.publish("connect_failed")}},n.options["connect timeout"]))}):n.publish("connect_failed")}n.sessionid=r,n.closeTimeout=1e3*o,n.heartbeatTimeout=1e3*i,n.transports||(n.transports=n.origTransports=a?t.util.intersect(a.split(","),n.options.transports):n.options.transports),n.setHeartbeatTimeout(),s(n.transports),n.once("connect",function(){clearTimeout(n.connectTimeoutTimer),e&&"function"==typeof e&&e()})}),this},r.prototype.setHeartbeatTimeout=function(){if(clearTimeout(this.heartbeatTimeoutTimer),!this.transport||this.transport.heartbeats()){var e=this;this.heartbeatTimeoutTimer=setTimeout(function(){e.transport.onClose()},this.heartbeatTimeout)}},r.prototype.packet=function(e){return this.connected&&!this.doBuffer?this.transport.packet(e):this.buffer.push(e),this},r.prototype.setBuffer=function(e){this.doBuffer=e,!e&&this.connected&&this.buffer.length&&(this.options.manualFlush||this.flushBuffer())},r.prototype.flushBuffer=function(){this.transport.payload(this.buffer),this.buffer=[]},r.prototype.disconnect=function(){return(this.connected||this.connecting)&&(this.open&&this.of("").packet({type:"disconnect"}),this.onDisconnect("booted")),this},r.prototype.disconnectSync=function(){var e=t.util.request(),n=["http"+(this.options.secure?"s":"")+":/",this.options.host+":"+this.options.port,this.options.resource,t.protocol,"",this.sessionid].join("/")+"/?disconnect=1";e.open("GET",n,!1),e.send(null),this.onDisconnect("booted")},r.prototype.isXDomain=function(){var e=n.location.port||("https:"==n.location.protocol?443:80);return this.options.host!==n.location.hostname||this.options.port!=e},r.prototype.onConnect=function(){this.connected||(this.connected=!0,this.connecting=!1,this.doBuffer||this.setBuffer(!1),this.emit("connect"))},r.prototype.onOpen=function(){this.open=!0},r.prototype.onClose=function(){this.open=!1,clearTimeout(this.heartbeatTimeoutTimer)},r.prototype.onPacket=function(e){this.of(e.endpoint).onPacket(e)},r.prototype.onError=function(e){e&&e.advice&&"reconnect"===e.advice&&(this.connected||this.connecting)&&(this.disconnect(),this.options.reconnect&&this.reconnect()),this.publish("error",e&&e.reason?e.reason:e)},r.prototype.onDisconnect=function(e){var t=this.connected,n=this.connecting;this.connected=!1,this.connecting=!1,this.open=!1,(t||n)&&(this.transport.close(),this.transport.clearTimeouts(),t&&(this.publish("disconnect",e),"booted"!=e&&this.options.reconnect&&!this.reconnecting&&this.reconnect()))},r.prototype.reconnect=function(){function e(){if(n.connected){for(var e in n.namespaces)n.namespaces.hasOwnProperty(e)&&""!==e&&n.namespaces[e].packet({type:"connect"});n.publish("reconnect",n.transport.name,n.reconnectionAttempts)}clearTimeout(n.reconnectionTimer),n.removeListener("connect_failed",t),n.removeListener("connect",t),n.reconnecting=!1,delete n.reconnectionAttempts,delete n.reconnectionDelay,delete n.reconnectionTimer,delete n.redoTransports,n.options["try multiple transports"]=i}function t(){if(n.reconnecting)return n.connected?e():n.connecting&&n.reconnecting?n.reconnectionTimer=setTimeout(t,1e3):void(n.reconnectionAttempts++>=r?n.redoTransports?(n.publish("reconnect_failed"),e()):(n.on("connect_failed",t),n.options["try multiple transports"]=!0,n.transports=n.origTransports,n.transport=n.getTransport(),n.redoTransports=!0,n.connect()):(n.reconnectionDelay<o&&(n.reconnectionDelay*=2),n.connect(),n.publish("reconnecting",n.reconnectionDelay,n.reconnectionAttempts),n.reconnectionTimer=setTimeout(t,n.reconnectionDelay)))}this.reconnecting=!0,this.reconnectionAttempts=0,this.reconnectionDelay=this.options["reconnection delay"];var n=this,r=this.options["max reconnection attempts"],i=this.options["try multiple transports"],o=this.options["reconnection limit"];this.options["try multiple transports"]=!1,this.reconnectionTimer=setTimeout(t,this.reconnectionDelay),this.on("connect",t)}}("undefined"!=typeof io?io:module.exports,"undefined"!=typeof io?io:module.parent.exports,this),function(e,t){function n(e,t){this.socket=e,this.name=t||"",this.flags={},this.json=new r(this,"json"),this.ackPackets=0,this.acks={}}function r(e,t){this.namespace=e,this.name=t}e.SocketNamespace=n,t.util.mixin(n,t.EventEmitter),n.prototype.$emit=t.EventEmitter.prototype.emit,n.prototype.of=function(){return this.socket.of.apply(this.socket,arguments)},n.prototype.packet=function(e){return e.endpoint=this.name,this.socket.packet(e),this.flags={},this},n.prototype.send=function(e,t){var n={type:this.flags.json?"json":"message",data:e};return"function"==typeof t&&(n.id=++this.ackPackets,n.ack=!0,this.acks[n.id]=t),this.packet(n)},n.prototype.emit=function(e){var t=Array.prototype.slice.call(arguments,1),n=t[t.length-1],r={type:"event",name:e};return"function"==typeof n&&(r.id=++this.ackPackets,r.ack="data",this.acks[r.id]=n,t=t.slice(0,t.length-1)),r.args=t,this.packet(r)},n.prototype.disconnect=function(){return""===this.name?this.socket.disconnect():(this.packet({type:"disconnect"}),this.$emit("disconnect")),this},n.prototype.onPacket=function(e){function n(){r.packet({type:"ack",args:t.util.toArray(arguments),ackId:e.id})}var r=this;switch(e.type){case"connect":this.$emit("connect");break;case"disconnect":""===this.name?this.socket.onDisconnect(e.reason||"booted"):this.$emit("disconnect",e.reason);break;case"message":case"json":var i=["message",e.data];"data"==e.ack?i.push(n):e.ack&&this.packet({type:"ack",ackId:e.id}),this.$emit.apply(this,i);break;case"event":var i=[e.name].concat(e.args);"data"==e.ack&&i.push(n),this.$emit.apply(this,i);break;case"ack":this.acks[e.ackId]&&(this.acks[e.ackId].apply(this,e.args),delete this.acks[e.ackId]);break;case"error":e.advice?this.socket.onError(e):"unauthorized"==e.reason?this.$emit("connect_failed",e.reason):this.$emit("error",e.reason)}},r.prototype.send=function(){this.namespace.flags[this.name]=!0,this.namespace.send.apply(this.namespace,arguments)},r.prototype.emit=function(){this.namespace.flags[this.name]=!0,this.namespace.emit.apply(this.namespace,arguments)}}("undefined"!=typeof io?io:module.exports,"undefined"!=typeof io?io:module.parent.exports),function(e,t,n){function r(e){t.Transport.apply(this,arguments)}e.websocket=r,t.util.inherit(r,t.Transport),r.prototype.name="websocket",r.prototype.open=function(){var e,r=t.util.query(this.socket.options.query),i=this;return e||(e=n.MozWebSocket||n.WebSocket),this.websocket=new e(this.prepareUrl()+r),this.websocket.onopen=function(){i.onOpen(),i.socket.setBuffer(!1)},this.websocket.onmessage=function(e){i.onData(e.data)},this.websocket.onclose=function(){i.onClose(),i.socket.setBuffer(!0)},this.websocket.onerror=function(e){i.onError(e)},this},t.util.ua.iDevice?r.prototype.send=function(e){var t=this;return setTimeout(function(){t.websocket.send(e)},0),this}:r.prototype.send=function(e){return this.websocket.send(e),this},r.prototype.payload=function(e){for(var t=0,n=e.length;t<n;t++)this.packet(e[t]);return this},r.prototype.close=function(){return this.websocket.close(),this},r.prototype.onError=function(e){this.socket.onError(e)},r.prototype.scheme=function(){return this.socket.options.secure?"wss":"ws"},r.check=function(){return"WebSocket"in n&&!("__addTask"in WebSocket)||"MozWebSocket"in n},r.xdomainCheck=function(){return!0},t.transports.push("websocket")}("undefined"!=typeof io?io.Transport:module.exports,"undefined"!=typeof io?io:module.parent.exports,this),function(e,t){function n(){t.Transport.websocket.apply(this,arguments)}e.flashsocket=n,t.util.inherit(n,t.Transport.websocket),n.prototype.name="flashsocket",n.prototype.open=function(){var e=this,n=arguments;return WebSocket.__addTask(function(){t.Transport.websocket.prototype.open.apply(e,n)}),this},n.prototype.send=function(){var e=this,n=arguments;return WebSocket.__addTask(function(){t.Transport.websocket.prototype.send.apply(e,n)}),this},n.prototype.close=function(){return WebSocket.__tasks.length=0,t.Transport.websocket.prototype.close.call(this),this},n.prototype.ready=function(e,r){function i(){var t=e.options,i=t["flash policy port"],a=["http"+(t.secure?"s":"")+":/",t.host+":"+t.port,t.resource,"static/flashsocket","WebSocketMain"+(e.isXDomain()?"Insecure":"")+".swf"];n.loaded||("undefined"==typeof WEB_SOCKET_SWF_LOCATION&&(WEB_SOCKET_SWF_LOCATION=a.join("/")),843!==i&&WebSocket.loadFlashPolicyFile("xmlsocket://"+t.host+":"+i),WebSocket.__initialize(),n.loaded=!0),r.call(o)}var o=this;return document.body?i():void t.util.load(i)},n.check=function(){return!!("undefined"!=typeof WebSocket&&"__initialize"in WebSocket&&swfobject)&&swfobject.getFlashPlayerVersion().major>=10},n.xdomainCheck=function(){return!0},"undefined"!=typeof window&&(WEB_SOCKET_DISABLE_AUTO_INITIALIZATION=!0),t.transports.push("flashsocket")}("undefined"!=typeof io?io.Transport:module.exports,"undefined"!=typeof io?io:module.parent.exports),"undefined"!=typeof window)var swfobject=function(){function e(){if(!Y){try{var e=M.getElementsByTagName("body")[0].appendChild(m("span"));e.parentNode.removeChild(e)}catch(e){return}Y=!0;for(var t=F.length,n=0;n<t;n++)F[n]()}}function t(e){Y?e():F[F.length]=e}function n(e){if(typeof j.addEventListener!=_)j.addEventListener("load",e,!1);else if(typeof M.addEventListener!=_)M.addEventListener("load",e,!1);else if(typeof j.attachEvent!=_)v(j,"onload",e);else if("function"==typeof j.onload){var t=j.onload;j.onload=function(){t(),e()}}else j.onload=e}function r(){L?i():o()}function i(){var e=M.getElementsByTagName("body")[0],t=m(P);t.setAttribute("type",I);var n=e.appendChild(t);if(n){var r=0;!function(){if(typeof n.GetVariable!=_){var i=n.GetVariable("$version");i&&(i=i.split(" ")[1].split(","),z.pv=[parseInt(i[0],10),parseInt(i[1],10),parseInt(i[2],10)])}else if(r<10)return r++,void setTimeout(arguments.callee,10);e.removeChild(t),n=null,o()}()}else o()}function o(){var e=U.length;if(e>0)for(var t=0;t<e;t++){var n=U[t].id,r=U[t].callbackFn,i={success:!1,id:n};if(z.pv[0]>0){var o=g(n);if(o)if(!y(U[t].swfVersion)||z.wk&&z.wk<312)if(U[t].expressInstall&&s()){var l={};l.data=U[t].expressInstall,l.width=o.getAttribute("width")||"0",l.height=o.getAttribute("height")||"0",o.getAttribute("class")&&(l.styleclass=o.getAttribute("class")),o.getAttribute("align")&&(l.align=o.getAttribute("align"));for(var d={},p=o.getElementsByTagName("param"),f=p.length,h=0;h<f;h++)"movie"!=p[h].getAttribute("name").toLowerCase()&&(d[p[h].getAttribute("name")]=p[h].getAttribute("value"));c(l,d,n,r)}else u(o),r&&r(i);else w(n,!0),r&&(i.success=!0,i.ref=a(n),r(i))}else if(w(n,!0),r){var m=a(n);m&&typeof m.SetVariable!=_&&(i.success=!0,i.ref=m),r(i)}}}function a(e){var t=null,n=g(e);if(n&&"OBJECT"==n.nodeName)if(typeof n.SetVariable!=_)t=n;else{var r=n.getElementsByTagName(P)[0];r&&(t=r)}return t}function s(){return!W&&y("6.0.65")&&(z.win||z.mac)&&!(z.wk&&z.wk<312)}function c(e,t,n,r){W=!0,x=r||null,T={success:!1,id:n};var i=g(n);if(i){"OBJECT"==i.nodeName?(C=l(i),S=null):(C=i,S=n),e.id=D,(typeof e.width==_||!/%$/.test(e.width)&&parseInt(e.width,10)<310)&&(e.width="310"),(typeof e.height==_||!/%$/.test(e.height)&&parseInt(e.height,10)<137)&&(e.height="137"),M.title=M.title.slice(0,47)+" - Flash Player Installation";var o=z.ie&&z.win?["Active"].concat("").join("X"):"PlugIn",a="MMredirectURL="+j.location.toString().replace(/&/g,"%26")+"&MMplayerType="+o+"&MMdoctitle="+M.title;if(typeof t.flashvars!=_?t.flashvars+="&"+a:t.flashvars=a,z.ie&&z.win&&4!=i.readyState){var s=m("div");n+="SWFObjectNew",s.setAttribute("id",n),i.parentNode.insertBefore(s,i),i.style.display="none",function(){4==i.readyState?i.parentNode.removeChild(i):setTimeout(arguments.callee,10)}()}d(e,t,n)}}function u(e){if(z.ie&&z.win&&4!=e.readyState){var t=m("div");e.parentNode.insertBefore(t,e),t.parentNode.replaceChild(l(e),t),e.style.display="none",function(){4==e.readyState?e.parentNode.removeChild(e):setTimeout(arguments.callee,10)}()}else e.parentNode.replaceChild(l(e),e)}function l(e){var t=m("div");if(z.win&&z.ie)t.innerHTML=e.innerHTML;else{var n=e.getElementsByTagName(P)[0];if(n){var r=n.childNodes;if(r)for(var i=r.length,o=0;o<i;o++)1==r[o].nodeType&&"PARAM"==r[o].nodeName||8==r[o].nodeType||t.appendChild(r[o].cloneNode(!0))}}return t}function d(e,t,n){var r,i=g(n);if(z.wk&&z.wk<312)return r;if(i)if(typeof e.id==_&&(e.id=n),z.ie&&z.win){var o="";for(var a in e)e[a]!=Object.prototype[a]&&("data"==a.toLowerCase()?t.movie=e[a]:"styleclass"==a.toLowerCase()?o+=' class="'+e[a]+'"':"classid"!=a.toLowerCase()&&(o+=" "+a+'="'+e[a]+'"'));var s="";for(var c in t)t[c]!=Object.prototype[c]&&(s+='<param name="'+c+'" value="'+t[c]+'" />');i.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+o+">"+s+"</object>",B[B.length]=e.id,r=g(e.id)}else{var u=m(P);u.setAttribute("type",I);for(var l in e)e[l]!=Object.prototype[l]&&("styleclass"==l.toLowerCase()?u.setAttribute("class",e[l]):"classid"!=l.toLowerCase()&&u.setAttribute(l,e[l]));for(var d in t)t[d]!=Object.prototype[d]&&"movie"!=d.toLowerCase()&&p(u,d,t[d]);i.parentNode.replaceChild(u,i),r=u}return r}function p(e,t,n){var r=m("param");r.setAttribute("name",t),r.setAttribute("value",n),e.appendChild(r)}function f(e){var t=g(e);t&&"OBJECT"==t.nodeName&&(z.ie&&z.win?(t.style.display="none",function(){4==t.readyState?h(e):setTimeout(arguments.callee,10)}()):t.parentNode.removeChild(t))}function h(e){var t=g(e);if(t){for(var n in t)"function"==typeof t[n]&&(t[n]=null);t.parentNode.removeChild(t)}}function g(e){var t=null;try{t=M.getElementById(e)}catch(e){}return t}function m(e){return M.createElement(e)}function v(e,t,n){e.attachEvent(t,n),H[H.length]=[e,t,n]}function y(e){var t=z.pv,n=e.split(".");return n[0]=parseInt(n[0],10),n[1]=parseInt(n[1],10)||0,n[2]=parseInt(n[2],10)||0,t[0]>n[0]||t[0]==n[0]&&t[1]>n[1]||t[0]==n[0]&&t[1]==n[1]&&t[2]>=n[2]}function b(e,t,n,r){if(!z.ie||!z.mac){var i=M.getElementsByTagName("head")[0];if(i){var o=n&&"string"==typeof n?n:"screen";if(r&&(E=null,O=null),!E||O!=o){var a=m("style");a.setAttribute("type","text/css"),a.setAttribute("media",o),E=i.appendChild(a),z.ie&&z.win&&typeof M.styleSheets!=_&&M.styleSheets.length>0&&(E=M.styleSheets[M.styleSheets.length-1]),O=o}z.ie&&z.win?E&&typeof E.addRule==P&&E.addRule(e,t):E&&typeof M.createTextNode!=_&&E.appendChild(M.createTextNode(e+" {"+t+"}"))}}}function w(e,t){if(V){var n=t?"visible":"hidden";Y&&g(e)?g(e).style.visibility=n:b("#"+e,"visibility:"+n)}}function k(e){return null!=/[\\\"<>\.;]/.exec(e)&&typeof encodeURIComponent!=_?encodeURIComponent(e):e}var C,S,x,T,E,O,_="undefined",P="object",R="Shockwave Flash",I="application/x-shockwave-flash",D="SWFObjectExprInst",N="onreadystatechange",j=window,M=document,A=navigator,L=!1,F=[r],U=[],B=[],H=[],Y=!1,W=!1,V=!0,z=function(){var e=typeof M.getElementById!=_&&typeof M.getElementsByTagName!=_&&typeof M.createElement!=_,t=A.userAgent.toLowerCase(),n=A.platform.toLowerCase(),r=/win/.test(n?n:t),i=/mac/.test(n?n:t),o=!!/webkit/.test(t)&&parseFloat(t.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")),a=!1,s=[0,0,0],c=null;if(typeof A.plugins!=_&&typeof A.plugins[R]==P)!(c=A.plugins[R].description)||typeof A.mimeTypes!=_&&A.mimeTypes[I]&&!A.mimeTypes[I].enabledPlugin||(L=!0,a=!1,c=c.replace(/^.*\s+(\S+\s+\S+$)/,"$1"),s[0]=parseInt(c.replace(/^(.*)\..*$/,"$1"),10),s[1]=parseInt(c.replace(/^.*\.(.*)\s.*$/,"$1"),10),s[2]=/[a-zA-Z]/.test(c)?parseInt(c.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0);else if(typeof j[["Active"].concat("Object").join("X")]!=_)try{var u=new(window[["Active"].concat("Object").join("X")])("ShockwaveFlash.ShockwaveFlash");u&&(c=u.GetVariable("$version"))&&(a=!0,c=c.split(" ")[1].split(","),s=[parseInt(c[0],10),parseInt(c[1],10),parseInt(c[2],10)])}catch(e){}return{w3:e,pv:s,wk:o,ie:a,win:r,mac:i}}();return function(){z.w3&&((typeof M.readyState!=_&&"complete"==M.readyState||typeof M.readyState==_&&(M.getElementsByTagName("body")[0]||M.body))&&e(),Y||(typeof M.addEventListener!=_&&M.addEventListener("DOMContentLoaded",e,!1),z.ie&&z.win&&(M.attachEvent(N,function(){"complete"==M.readyState&&(M.detachEvent(N,arguments.callee),e())}),j==top&&function(){if(!Y){try{M.documentElement.doScroll("left")}catch(e){return void setTimeout(arguments.callee,0)}e()}}()),z.wk&&function(){if(!Y)/loaded|complete/.test(M.readyState)?e():setTimeout(arguments.callee,0)}(),n(e)))}(),function(){z.ie&&z.win&&window.attachEvent("onunload",function(){for(var e=H.length,t=0;t<e;t++)H[t][0].detachEvent(H[t][1],H[t][2]);for(var n=B.length,r=0;r<n;r++)f(B[r]);for(var i in z)z[i]=null;z=null;for(var o in swfobject)swfobject[o]=null;swfobject=null})}(),{registerObject:function(e,t,n,r){if(z.w3&&e&&t){var i={};i.id=e,i.swfVersion=t,i.expressInstall=n,i.callbackFn=r,U[U.length]=i,w(e,!1)}else r&&r({success:!1,id:e})},getObjectById:function(e){if(z.w3)return a(e)},embedSWF:function(e,n,r,i,o,a,u,l,p,f){var h={success:!1,id:n};z.w3&&!(z.wk&&z.wk<312)&&e&&n&&r&&i&&o?(w(n,!1),t(function(){r+="",i+="";var t={};if(p&&typeof p===P)for(var g in p)t[g]=p[g];t.data=e,t.width=r,t.height=i;var m={};if(l&&typeof l===P)for(var v in l)m[v]=l[v];if(u&&typeof u===P)for(var b in u)typeof m.flashvars!=_?m.flashvars+="&"+b+"="+u[b]:m.flashvars=b+"="+u[b];if(y(o)){var k=d(t,m,n);t.id==n&&w(n,!0),h.success=!0,h.ref=k}else{if(a&&s())return t.data=a,void c(t,m,n,f);w(n,!0)}f&&f(h)})):f&&f(h)},switchOffAutoHideShow:function(){V=!1},ua:z,getFlashPlayerVersion:function(){return{major:z.pv[0],minor:z.pv[1],release:z.pv[2]}},hasFlashPlayerVersion:y,createSWF:function(e,t,n){return z.w3?d(e,t,n):void 0},showExpressInstall:function(e,t,n,r){z.w3&&s()&&c(e,t,n,r)},removeSWF:function(e){z.w3&&f(e)},createCSS:function(e,t,n,r){z.w3&&b(e,t,n,r)},addDomLoadEvent:t,addLoadEvent:n,getQueryParamValue:function(e){var t=M.location.search||M.location.hash;if(t){if(/\?/.test(t)&&(t=t.split("?")[1]),null==e)return k(t);for(var n=t.split("&"),r=0;r<n.length;r++)if(n[r].substring(0,n[r].indexOf("="))==e)return k(n[r].substring(n[r].indexOf("=")+1))}return""},expressInstallCallback:function(){if(W){var e=g(D);e&&C&&(e.parentNode.replaceChild(C,e),S&&(w(S,!0),z.ie&&z.win&&(C.style.display="block")),x&&x(T)),W=!1}}}}();!function(){if("undefined"!=typeof window&&!window.WebSocket){var e=window.console;if(e&&e.log&&e.error||(e={log:function(){},error:function(){}}),!swfobject.hasFlashPlayerVersion("10.0.0"))return void e.error("Flash Player >= 10.0.0 is required.");"file:"==location.protocol&&e.error("WARNING: web-socket-js doesn't work in file:///... URL unless you set Flash Security Settings properly. Open the page via Web server i.e. http://..."),WebSocket=function(e,t,n,r,i){var o=this;o.__id=WebSocket.__nextId++,WebSocket.__instances[o.__id]=o,o.readyState=WebSocket.CONNECTING,o.bufferedAmount=0,o.__events={},t?"string"==typeof t&&(t=[t]):t=[],setTimeout(function(){WebSocket.__addTask(function(){WebSocket.__flash.create(o.__id,e,t,n||null,r||0,i||null)})},0)},WebSocket.prototype.send=function(e){if(this.readyState==WebSocket.CONNECTING)throw"INVALID_STATE_ERR: Web Socket connection has not been established";var t=WebSocket.__flash.send(this.__id,encodeURIComponent(e));return t<0||(this.bufferedAmount+=t,!1)},WebSocket.prototype.close=function(){this.readyState!=WebSocket.CLOSED&&this.readyState!=WebSocket.CLOSING&&(this.readyState=WebSocket.CLOSING,WebSocket.__flash.close(this.__id))},WebSocket.prototype.addEventListener=function(e,t,n){e in this.__events||(this.__events[e]=[]),this.__events[e].push(t)},WebSocket.prototype.removeEventListener=function(e,t,n){if(e in this.__events)for(var r=this.__events[e],i=r.length-1;i>=0;--i)if(r[i]===t){r.splice(i,1);break}},WebSocket.prototype.dispatchEvent=function(e){for(var t=this.__events[e.type]||[],n=0;n<t.length;++n)t[n](e);var r=this["on"+e.type];r&&r(e)},WebSocket.prototype.__handleEvent=function(e){"readyState"in e&&(this.readyState=e.readyState),"protocol"in e&&(this.protocol=e.protocol);var t;if("open"==e.type||"error"==e.type)t=this.__createSimpleEvent(e.type);else if("close"==e.type)t=this.__createSimpleEvent("close");else{if("message"!=e.type)throw"unknown event type: "+e.type;var n=decodeURIComponent(e.message);t=this.__createMessageEvent("message",n)}this.dispatchEvent(t)},WebSocket.prototype.__createSimpleEvent=function(e){if(document.createEvent&&window.Event){var t=document.createEvent("Event");return t.initEvent(e,!1,!1),t}return{type:e,bubbles:!1,cancelable:!1}},WebSocket.prototype.__createMessageEvent=function(e,t){if(document.createEvent&&window.MessageEvent&&!window.opera){var n=document.createEvent("MessageEvent");return n.initMessageEvent("message",!1,!1,t,null,null,window,null),n}return{type:e,data:t,bubbles:!1,cancelable:!1}},WebSocket.CONNECTING=0,WebSocket.OPEN=1,WebSocket.CLOSING=2,WebSocket.CLOSED=3,WebSocket.__flash=null,WebSocket.__instances={},WebSocket.__tasks=[],WebSocket.__nextId=0,WebSocket.loadFlashPolicyFile=function(e){WebSocket.__addTask(function(){WebSocket.__flash.loadManualPolicyFile(e)})},WebSocket.__initialize=function(){if(!WebSocket.__flash){if(WebSocket.__swfLocation&&(window.WEB_SOCKET_SWF_LOCATION=WebSocket.__swfLocation),!window.WEB_SOCKET_SWF_LOCATION)return void e.error("[WebSocket] set WEB_SOCKET_SWF_LOCATION to location of WebSocketMain.swf");var t=document.createElement("div");t.id="webSocketContainer",t.style.position="absolute",WebSocket.__isFlashLite()?(t.style.left="0px",t.style.top="0px"):(t.style.left="-100px",t.style.top="-100px");var n=document.createElement("div");n.id="webSocketFlash",t.appendChild(n),document.body.appendChild(t),swfobject.embedSWF(WEB_SOCKET_SWF_LOCATION,"webSocketFlash","1","1","10.0.0",null,null,{hasPriority:!0,swliveconnect:!0,allowScriptAccess:"always"},null,function(t){t.success||e.error("[WebSocket] swfobject.embedSWF failed")})}},WebSocket.__onFlashInitialized=function(){setTimeout(function(){WebSocket.__flash=document.getElementById("webSocketFlash"),WebSocket.__flash.setCallerUrl(location.href),WebSocket.__flash.setDebug(!!window.WEB_SOCKET_DEBUG);for(var e=0;e<WebSocket.__tasks.length;++e)WebSocket.__tasks[e]();WebSocket.__tasks=[]},0)},WebSocket.__onFlashEvent=function(){return setTimeout(function(){try{for(var t=WebSocket.__flash.receiveEvents(),n=0;n<t.length;++n)WebSocket.__instances[t[n].webSocketId].__handleEvent(t[n])}catch(t){e.error(t)}},0),!0},WebSocket.__log=function(t){e.log(decodeURIComponent(t))},WebSocket.__error=function(t){e.error(decodeURIComponent(t))},WebSocket.__addTask=function(e){WebSocket.__flash?e():WebSocket.__tasks.push(e)},WebSocket.__isFlashLite=function(){if(!window.navigator||!window.navigator.mimeTypes)return!1;var e=window.navigator.mimeTypes["application/x-shockwave-flash"];return!!(e&&e.enabledPlugin&&e.enabledPlugin.filename)&&!!e.enabledPlugin.filename.match(/flashlite/i)},window.WEB_SOCKET_DISABLE_AUTO_INITIALIZATION||(window.addEventListener?window.addEventListener("load",function(){WebSocket.__initialize()},!1):window.attachEvent("onload",function(){WebSocket.__initialize()}))}}(),function(e,t,n){function r(e){e&&(t.Transport.apply(this,arguments),this.sendBuffer=[])}function i(){}e.XHR=r,t.util.inherit(r,t.Transport),r.prototype.open=function(){return this.socket.setBuffer(!1),this.onOpen(),this.get(),this.setCloseTimeout(),this},r.prototype.payload=function(e){for(var n=[],r=0,i=e.length;r<i;r++)n.push(t.parser.encodePacket(e[r]));this.send(t.parser.encodePayload(n))},r.prototype.send=function(e){return this.post(e),this},r.prototype.post=function(e){function t(){4==this.readyState&&(this.onreadystatechange=i,o.posting=!1,200==this.status?o.socket.setBuffer(!1):o.onClose())}function r(){this.onload=i,o.socket.setBuffer(!1)}var o=this;this.socket.setBuffer(!0),this.sendXHR=this.request("POST"),n.XDomainRequest&&this.sendXHR instanceof XDomainRequest?this.sendXHR.onload=this.sendXHR.onerror=r:this.sendXHR.onreadystatechange=t,this.sendXHR.send(e)},r.prototype.close=function(){return this.onClose(),this},r.prototype.request=function(e){var n=t.util.request(this.socket.isXDomain()),r=t.util.query(this.socket.options.query,"t="+ +new Date);if(n.open(e||"GET",this.prepareUrl()+r,!0),"POST"==e)try{n.setRequestHeader?n.setRequestHeader("Content-type","text/plain;charset=UTF-8"):n.contentType="text/plain"}catch(e){}return n},r.prototype.scheme=function(){return this.socket.options.secure?"https":"http"},r.check=function(e,r){try{var i=t.util.request(r),o=n.XDomainRequest&&i instanceof XDomainRequest,a=e&&e.options&&e.options.secure?"https:":"http:",s=n.location&&a!=n.location.protocol;if(i&&(!o||!s))return!0}catch(e){}return!1},r.xdomainCheck=function(e){return r.check(e,!0)}}("undefined"!=typeof io?io.Transport:module.exports,"undefined"!=typeof io?io:module.parent.exports,this),function(e,t){function n(e){t.Transport.XHR.apply(this,arguments)}e.htmlfile=n,t.util.inherit(n,t.Transport.XHR),n.prototype.name="htmlfile",n.prototype.get=function(){this.doc=new(window[["Active"].concat("Object").join("X")])("htmlfile"),this.doc.open(),this.doc.write("<html></html>"),this.doc.close(),this.doc.parentWindow.s=this;var e=this.doc.createElement("div");e.className="socketio",this.doc.body.appendChild(e),this.iframe=this.doc.createElement("iframe"),e.appendChild(this.iframe);var n=this,r=t.util.query(this.socket.options.query,"t="+ +new Date);this.iframe.src=this.prepareUrl()+r,t.util.on(window,"unload",function(){n.destroy()})},n.prototype._=function(e,t){e=e.replace(/\\\//g,"/"),this.onData(e);try{var n=t.getElementsByTagName("script")[0];n.parentNode.removeChild(n)}catch(e){}},n.prototype.destroy=function(){if(this.iframe){try{this.iframe.src="about:blank"}catch(e){}this.doc=null,this.iframe.parentNode.removeChild(this.iframe),this.iframe=null,CollectGarbage()}},n.prototype.close=function(){return this.destroy(),t.Transport.XHR.prototype.close.call(this)},n.check=function(e){if("undefined"!=typeof window&&["Active"].concat("Object").join("X")in window)try{return new(window[["Active"].concat("Object").join("X")])("htmlfile")&&t.Transport.XHR.check(e)}catch(e){}return!1},n.xdomainCheck=function(){return!1},t.transports.push("htmlfile")}("undefined"!=typeof io?io.Transport:module.exports,"undefined"!=typeof io?io:module.parent.exports),function(e,t,n){function r(){t.Transport.XHR.apply(this,arguments)}function i(){}e["xhr-polling"]=r,t.util.inherit(r,t.Transport.XHR),t.util.merge(r,t.Transport.XHR),r.prototype.name="xhr-polling",r.prototype.heartbeats=function(){return!1},r.prototype.open=function(){var e=this;return t.Transport.XHR.prototype.open.call(e),!1},r.prototype.get=function(){function e(){4==this.readyState&&(this.onreadystatechange=i,200==this.status?(o.onData(this.responseText),o.get()):o.onClose())}function t(){this.onload=i,this.onerror=i,o.retryCounter=1,o.onData(this.responseText),o.get()}function r(){o.retryCounter++,!o.retryCounter||o.retryCounter>3?o.onClose():o.get()}if(this.isOpen){var o=this;this.xhr=this.request(),n.XDomainRequest&&this.xhr instanceof XDomainRequest?(this.xhr.onload=t,this.xhr.onerror=r):this.xhr.onreadystatechange=e,this.xhr.send(null)}},r.prototype.onClose=function(){if(t.Transport.XHR.prototype.onClose.call(this),this.xhr){this.xhr.onreadystatechange=this.xhr.onload=this.xhr.onerror=i;try{this.xhr.abort()}catch(e){}this.xhr=null}},r.prototype.ready=function(e,n){var r=this;t.util.defer(function(){n.call(r)})},t.transports.push("xhr-polling")}("undefined"!=typeof io?io.Transport:module.exports,"undefined"!=typeof io?io:module.parent.exports,this),function(e,t,n){function r(e){t.Transport["xhr-polling"].apply(this,arguments),this.index=t.j.length;var n=this;t.j.push(function(e){n._(e)})}var i=n.document&&"MozAppearance"in n.document.documentElement.style;e["jsonp-polling"]=r,t.util.inherit(r,t.Transport["xhr-polling"]),r.prototype.name="jsonp-polling",r.prototype.post=function(e){function n(){r(),i.socket.setBuffer(!1)}function r(){i.iframe&&i.form.removeChild(i.iframe);try{a=document.createElement('<iframe name="'+i.iframeId+'">')}catch(e){a=document.createElement("iframe"),a.name=i.iframeId}a.id=i.iframeId,i.form.appendChild(a),i.iframe=a}var i=this,o=t.util.query(this.socket.options.query,"t="+ +new Date+"&i="+this.index);if(!this.form){var a,s=document.createElement("form"),c=document.createElement("textarea"),u=this.iframeId="socketio_iframe_"+this.index;s.className="socketio",s.style.position="absolute",s.style.top="0px",s.style.left="0px",s.style.display="none",s.target=u,s.method="POST",s.setAttribute("accept-charset","utf-8"),c.name="d",s.appendChild(c),document.body.appendChild(s),this.form=s,this.area=c}this.form.action=this.prepareUrl()+o,r(),this.area.value=t.JSON.stringify(e);try{this.form.submit()}catch(e){}this.iframe.attachEvent?a.onreadystatechange=function(){"complete"==i.iframe.readyState&&n()}:this.iframe.onload=n,this.socket.setBuffer(!0)},r.prototype.get=function(){var e=this,n=document.createElement("script"),r=t.util.query(this.socket.options.query,"t="+ +new Date+"&i="+this.index);this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),n.async=!0,n.src=this.prepareUrl()+r,n.onerror=function(){e.onClose()};var o=document.getElementsByTagName("script")[0];o.parentNode.insertBefore(n,o),this.script=n,i&&setTimeout(function(){var e=document.createElement("iframe");document.body.appendChild(e),document.body.removeChild(e)},100)},r.prototype._=function(e){return this.onData(e),this.isOpen&&this.get(),this},r.prototype.ready=function(e,n){var r=this;return i?void t.util.load(function(){n.call(r)}):n.call(this)},r.check=function(){return"document"in n},r.xdomainCheck=function(){return!0},t.transports.push("jsonp-polling")}("undefined"!=typeof io?io.Transport:module.exports,"undefined"!=typeof io?io:module.parent.exports,this),"function"==typeof define&&define.amd&&define([],function(){return io})}()},{}],40:[function(e,t,n){function r(e){return{type:e.type,sdp:e.sdp}}function i(e){var t={label:e.id};return e.getAudioTracks().length&&(t.audio=e.getAudioTracks().map(function(e){return e.id})),e.getVideoTracks().length&&(t.video=e.getVideoTracks().map(function(e){return e.id})),t}function o(e,t){var n=this;s.call(this),this.peerconnection=new window.RTCPeerConnection(e,t),this.trace=function(e,t){n.emit("PeerConnectionTrace",{time:new Date,type:e,value:t||""})},this.onicecandidate=null,this.peerconnection.onicecandidate=function(e){n.trace("onicecandidate",e.candidate),null!==n.onicecandidate&&n.onicecandidate(e)},this.onaddstream=null,this.peerconnection.onaddstream=function(e){n.trace("onaddstream",i(e.stream)),null!==n.onaddstream&&n.onaddstream(e)},this.onremovestream=null,this.peerconnection.onremovestream=function(e){n.trace("onremovestream",i(e.stream)),null!==n.onremovestream&&n.onremovestream(e)},this.onsignalingstatechange=null,this.peerconnection.onsignalingstatechange=function(e){n.trace("onsignalingstatechange",n.signalingState),null!==n.onsignalingstatechange&&n.onsignalingstatechange(e)},this.oniceconnectionstatechange=null,this.peerconnection.oniceconnectionstatechange=function(e){n.trace("oniceconnectionstatechange",n.iceConnectionState),null!==n.oniceconnectionstatechange&&n.oniceconnectionstatechange(e)},this.onnegotiationneeded=null,this.peerconnection.onnegotiationneeded=function(e){n.trace("onnegotiationneeded"),null!==n.onnegotiationneeded&&n.onnegotiationneeded(e)},n.ondatachannel=null,this.peerconnection.ondatachannel=function(e){n.trace("ondatachannel",e),null!==n.ondatachannel&&n.ondatachannel(e)},this.getLocalStreams=this.peerconnection.getLocalStreams.bind(this.peerconnection),this.getRemoteStreams=this.peerconnection.getRemoteStreams.bind(this.peerconnection)}var a=e("util"),s=(e("webrtc-adapter"),e("wildemitter"));a.inherits(o,s),["signalingState","iceConnectionState","localDescription","remoteDescription"].forEach(function(e){Object.defineProperty(o.prototype,e,{get:function(){return this.peerconnection[e]}})}),o.prototype.addStream=function(e){this.trace("addStream",i(e)),this.peerconnection.addStream(e)},o.prototype.removeStream=function(e){this.trace("removeStream",i(e)),this.peerconnection.removeStream(e)},o.prototype.createDataChannel=function(e,t){return this.trace("createDataChannel",e,t),this.peerconnection.createDataChannel(e,t)},o.prototype.setLocalDescription=function(e,t,n){var i=this;return this.trace("setLocalDescription",r(e)),this.peerconnection.setLocalDescription(e).then(function(){i.trace("setLocalDescriptionOnSuccess"),t&&t()},function(e){i.trace("setLocalDescriptionOnFailure",e),n&&n(e)})},o.prototype.setRemoteDescription=function(e,t,n){var i=this;return this.trace("setRemoteDescription",r(e)),this.peerconnection.setRemoteDescription(e).then(function(){i.trace("setRemoteDescriptionOnSuccess"),t&&t()},function(e){i.trace("setRemoteDescriptionOnFailure",e),n&&n(e)})},o.prototype.close=function(){this.trace("stop"),"closed"!=this.peerconnection.signalingState&&this.peerconnection.close()},o.prototype.createOffer=function(e,t,n){var i=this;return this.trace("createOffer",n),this.peerconnection.createOffer(n).then(function(t){i.trace("createOfferOnSuccess",r(t)),e&&e(t)},function(e){i.trace("createOfferOnFailure",e),t&&t(e)})},o.prototype.createAnswer=function(e,t,n){var i=this;return this.trace("createAnswer",n),this.peerconnection.createAnswer(n).then(function(t){i.trace("createAnswerOnSuccess",r(t)),e&&e(t)},function(e){i.trace("createAnswerOnFailure",e),t&&t(e)})},o.prototype.addIceCandidate=function(e,t,n){var r=this;return this.trace("addIceCandidate",e),this.peerconnection.addIceCandidate(e).then(function(){t&&t()},function(e){r.trace("addIceCandidateOnFailure",e),n&&n(e)})},o.prototype.getStats=function(){this.peerconnection.getStats.apply(this.peerconnection,arguments)},t.exports=o},{util:57,"webrtc-adapter":42,wildemitter:52}],41:[function(e,t,n){"use strict";function r(e){return new Promise(function(t,n){i(e,t,n)})}var i=null,o=null,a=null,s=null,c=null,u=null,l={log:function(){"undefined"!=typeof t||"function"==typeof e&&"function"==typeof define||console.log.apply(console,arguments)},extractVersion:function(e,t,n){var r=e.match(t);return r&&r.length>=n&&parseInt(r[n],10)}};if("object"==typeof window&&(!window.HTMLMediaElement||"srcObject"in window.HTMLMediaElement.prototype||Object.defineProperty(window.HTMLMediaElement.prototype,"srcObject",{get:function(){return"mozSrcObject"in this?this.mozSrcObject:this._srcObject},set:function(e){"mozSrcObject"in this?this.mozSrcObject=e:(this._srcObject=e,this.src=URL.createObjectURL(e))}}),i=window.navigator&&window.navigator.getUserMedia),o=function(e,t){e.srcObject=t},a=function(e,t){e.srcObject=t.srcObject},"undefined"!=typeof window&&window.navigator)if(navigator.mozGetUserMedia){if(l.log("This appears to be Firefox"),s="firefox",c=l.extractVersion(navigator.userAgent,/Firefox\/([0-9]+)\./,1),u=31,window.RTCPeerConnection||(window.RTCPeerConnection=function(e,t){if(c<38&&e&&e.iceServers){for(var n=[],r=0;r<e.iceServers.length;r++){var i=e.iceServers[r];if(i.hasOwnProperty("urls"))for(var o=0;o<i.urls.length;o++){var a={url:i.urls[o]};0===i.urls[o].indexOf("turn")&&(a.username=i.username,a.credential=i.credential),n.push(a)}else n.push(e.iceServers[r])}e.iceServers=n}return new mozRTCPeerConnection(e,t)},window.RTCPeerConnection.prototype=mozRTCPeerConnection.prototype,mozRTCPeerConnection.generateCertificate&&Object.defineProperty(window.RTCPeerConnection,"generateCertificate",{get:function(){return arguments.length?mozRTCPeerConnection.generateCertificate.apply(null,arguments):mozRTCPeerConnection.generateCertificate}}),window.RTCSessionDescription=mozRTCSessionDescription,window.RTCIceCandidate=mozRTCIceCandidate),i=function(e,t,n){var r=function(e){if("object"!=typeof e||e.require)return e;var t=[];return Object.keys(e).forEach(function(n){if("require"!==n&&"advanced"!==n&&"mediaSource"!==n){var r=e[n]="object"==typeof e[n]?e[n]:{ideal:e[n]};if(void 0===r.min&&void 0===r.max&&void 0===r.exact||t.push(n),void 0!==r.exact&&("number"==typeof r.exact?r.min=r.max=r.exact:e[n]=r.exact,delete r.exact),void 0!==r.ideal){e.advanced=e.advanced||[];var i={};"number"==typeof r.ideal?i[n]={min:r.ideal,max:r.ideal}:i[n]=r.ideal,e.advanced.push(i),delete r.ideal,Object.keys(r).length||delete e[n]}}}),t.length&&(e.require=t),e};return c<38&&(l.log("spec: "+JSON.stringify(e)),e.audio&&(e.audio=r(e.audio)),e.video&&(e.video=r(e.video)),l.log("ff37: "+JSON.stringify(e))),navigator.mozGetUserMedia(e,t,n)},navigator.getUserMedia=i,navigator.mediaDevices||(navigator.mediaDevices={getUserMedia:r,addEventListener:function(){},removeEventListener:function(){}}),navigator.mediaDevices.enumerateDevices=navigator.mediaDevices.enumerateDevices||function(){return new Promise(function(e){e([{kind:"audioinput",deviceId:"default",label:"",groupId:""},{kind:"videoinput",deviceId:"default",label:"",groupId:""}])})},c<41){var d=navigator.mediaDevices.enumerateDevices.bind(navigator.mediaDevices);navigator.mediaDevices.enumerateDevices=function(){return d().then(void 0,function(e){if("NotFoundError"===e.name)return[];throw e})}}}else if(navigator.webkitGetUserMedia&&window.webkitRTCPeerConnection){l.log("This appears to be Chrome"),s="chrome",c=l.extractVersion(navigator.userAgent,/Chrom(e|ium)\/([0-9]+)\./,2),u=38,window.RTCPeerConnection=function(e,t){e&&e.iceTransportPolicy&&(e.iceTransports=e.iceTransportPolicy);var n=new webkitRTCPeerConnection(e,t),r=n.getStats.bind(n);return n.getStats=function(e,t,n){var i=this,o=arguments;if(arguments.length>0&&"function"==typeof e)return r(e,t);var a=function(e){var t={};return e.result().forEach(function(e){var n={id:e.id,timestamp:e.timestamp,type:e.type};e.names().forEach(function(t){n[t]=e.stat(t)}),t[n.id]=n}),t};if(arguments.length>=2){var s=function(e){o[1](a(e))};return r.apply(this,[s,arguments[0]])}return new Promise(function(t,n){1===o.length&&null===e?r.apply(i,[function(e){t.apply(null,[a(e)])},n]):r.apply(i,[t,n])})},n},window.RTCPeerConnection.prototype=webkitRTCPeerConnection.prototype,webkitRTCPeerConnection.generateCertificate&&Object.defineProperty(window.RTCPeerConnection,"generateCertificate",{get:function(){return arguments.length?webkitRTCPeerConnection.generateCertificate.apply(null,arguments):webkitRTCPeerConnection.generateCertificate}}),["createOffer","createAnswer"].forEach(function(e){var t=webkitRTCPeerConnection.prototype[e];webkitRTCPeerConnection.prototype[e]=function(){var e=this;if(arguments.length<1||1===arguments.length&&"object"==typeof arguments[0]){var n=1===arguments.length?arguments[0]:void 0;return new Promise(function(r,i){t.apply(e,[r,i,n])})}return t.apply(this,arguments)}}),["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(e){var t=webkitRTCPeerConnection.prototype[e];webkitRTCPeerConnection.prototype[e]=function(){var e=arguments,n=this;return new Promise(function(r,i){t.apply(n,[e[0],function(){r(),e.length>=2&&e[1].apply(null,[])},function(t){i(t),e.length>=3&&e[2].apply(null,[t])}])})}});var p=function(e){if("object"!=typeof e||e.mandatory||e.optional)return e;var t={};return Object.keys(e).forEach(function(n){if("require"!==n&&"advanced"!==n&&"mediaSource"!==n){var r="object"==typeof e[n]?e[n]:{ideal:e[n]};void 0!==r.exact&&"number"==typeof r.exact&&(r.min=r.max=r.exact);var i=function(e,t){return e?e+t.charAt(0).toUpperCase()+t.slice(1):"deviceId"===t?"sourceId":t};if(void 0!==r.ideal){t.optional=t.optional||[];var o={};"number"==typeof r.ideal?(o[i("min",n)]=r.ideal,t.optional.push(o),o={},o[i("max",n)]=r.ideal,t.optional.push(o)):(o[i("",n)]=r.ideal,t.optional.push(o))}void 0!==r.exact&&"number"!=typeof r.exact?(t.mandatory=t.mandatory||{},t.mandatory[i("",n)]=r.exact):["min","max"].forEach(function(e){void 0!==r[e]&&(t.mandatory=t.mandatory||{},t.mandatory[i(e,n)]=r[e])})}}),e.advanced&&(t.optional=(t.optional||[]).concat(e.advanced)),t};if(i=function(e,t,n){return e.audio&&(e.audio=p(e.audio)),e.video&&(e.video=p(e.video)),l.log("chrome: "+JSON.stringify(e)),navigator.webkitGetUserMedia(e,t,n)},navigator.getUserMedia=i,navigator.mediaDevices||(navigator.mediaDevices={getUserMedia:r,enumerateDevices:function(){return new Promise(function(e){var t={audio:"audioinput",video:"videoinput"};return MediaStreamTrack.getSources(function(n){e(n.map(function(e){return{label:e.label,kind:t[e.kind],deviceId:e.id,groupId:""}}))})})}}),navigator.mediaDevices.getUserMedia){var f=navigator.mediaDevices.getUserMedia.bind(navigator.mediaDevices);navigator.mediaDevices.getUserMedia=function(e){return l.log("spec:   "+JSON.stringify(e)),e.audio=p(e.audio),e.video=p(e.video),l.log("chrome: "+JSON.stringify(e)),f(e)}}else navigator.mediaDevices.getUserMedia=function(e){return r(e)};"undefined"==typeof navigator.mediaDevices.addEventListener&&(navigator.mediaDevices.addEventListener=function(){l.log("Dummy mediaDevices.addEventListener called.")}),"undefined"==typeof navigator.mediaDevices.removeEventListener&&(navigator.mediaDevices.removeEventListener=function(){l.log("Dummy mediaDevices.removeEventListener called.")}),o=function(e,t){c>=43?e.srcObject=t:"undefined"!=typeof e.src?e.src=URL.createObjectURL(t):l.log("Error attaching stream to element.")},a=function(e,t){c>=43?e.srcObject=t.srcObject:e.src=t.src}}else if(navigator.mediaDevices&&navigator.userAgent.match(/Edge\/(\d+).(\d+)$/)){if(l.log("This appears to be Edge"),s="edge",c=l.extractVersion(navigator.userAgent,/Edge\/(\d+).(\d+)$/,2),u=10547,window.RTCIceGatherer){var h=function(){return Math.random().toString(36).substr(2,10)},g=h(),m={};m.splitLines=function(e){return e.trim().split("\n").map(function(e){return e.trim()})},m.splitSections=function(e){return e.split("\r\nm=").map(function(e,t){return(t>0?"m="+e:e).trim()+"\r\n"})},m.matchPrefix=function(e,t){return m.splitLines(e).filter(function(e){return 0===e.indexOf(t)})},m.parseCandidate=function(e){var t;t=0===e.indexOf("a=candidate:")?e.substring(12).split(" "):e.substring(10).split(" ");for(var n={foundation:t[0],component:t[1],protocol:t[2].toLowerCase(),priority:parseInt(t[3],10),ip:t[4],port:parseInt(t[5],10),type:t[7]},r=8;r<t.length;r+=2)switch(t[r]){case"raddr":n.relatedAddress=t[r+1];break;case"rport":n.relatedPort=parseInt(t[r+1],10);break;case"tcptype":n.tcpType=t[r+1]}return n},m.writeCandidate=function(e){var t=[];t.push(e.foundation),t.push(e.component),t.push(e.protocol.toUpperCase()),t.push(e.priority),t.push(e.ip),t.push(e.port);var n=e.type;return t.push("typ"),t.push(n),"host"!==n&&e.relatedAddress&&e.relatedPort&&(t.push("raddr"),t.push(e.relatedAddress),t.push("rport"),t.push(e.relatedPort)),e.tcpType&&"tcp"===e.protocol.toLowerCase()&&(t.push("tcptype"),t.push(e.tcpType)),"candidate:"+t.join(" ")},m.parseRtpMap=function(e){var t=e.substr(9).split(" "),n={payloadType:parseInt(t.shift(),10)};return t=t[0].split("/"),n.name=t[0],n.clockRate=parseInt(t[1],10),n.numChannels=3===t.length?parseInt(t[2],10):1,n},m.writeRtpMap=function(e){var t=e.payloadType;return void 0!==e.preferredPayloadType&&(t=e.preferredPayloadType),"a=rtpmap:"+t+" "+e.name+"/"+e.clockRate+(1!==e.numChannels?"/"+e.numChannels:"")+"\r\n"},m.parseFmtp=function(e){for(var t,n={},r=e.substr(e.indexOf(" ")+1).split(";"),i=0;i<r.length;i++)t=r[i].trim().split("="),n[t[0].trim()]=t[1];return n},m.writeFtmp=function(e){var t="",n=e.payloadType;if(void 0!==e.preferredPayloadType&&(n=e.preferredPayloadType),e.parameters&&e.parameters.length){var r=[];Object.keys(e.parameters).forEach(function(t){r.push(t+"="+e.parameters[t])}),t+="a=fmtp:"+n+" "+r.join(";")+"\r\n"}return t},m.parseRtcpFb=function(e){var t=e.substr(e.indexOf(" ")+1).split(" ");return{type:t.shift(),parameter:t.join(" ")}},m.writeRtcpFb=function(e){var t="",n=e.payloadType;return void 0!==e.preferredPayloadType&&(n=e.preferredPayloadType),e.rtcpFeedback&&e.rtcpFeedback.length&&e.rtcpFeedback.forEach(function(e){t+="a=rtcp-fb:"+n+" "+e.type+" "+e.parameter+"\r\n"}),t},m.parseSsrcMedia=function(e){var t=e.indexOf(" "),n={ssrc:e.substr(7,t-7)},r=e.indexOf(":",t);return r>-1?(n.attribute=e.substr(t+1,r-t-1),n.value=e.substr(r+1)):n.attribute=e.substr(t+1),n},m.getDtlsParameters=function(e,t){var n=m.splitLines(e);n=n.concat(m.splitLines(t));var r=n.filter(function(e){return 0===e.indexOf("a=fingerprint:")})[0].substr(14);return{role:"auto",fingerprints:[{algorithm:r.split(" ")[0],value:r.split(" ")[1]}]}},m.writeDtlsParameters=function(e,t){var n="a=setup:"+t+"\r\n";return e.fingerprints.forEach(function(e){n+="a=fingerprint:"+e.algorithm+" "+e.value+"\r\n"}),n},m.getIceParameters=function(e,t){var n=m.splitLines(e);return n=n.concat(m.splitLines(t)),{usernameFragment:n.filter(function(e){return 0===e.indexOf("a=ice-ufrag:")})[0].substr(12),password:n.filter(function(e){return 0===e.indexOf("a=ice-pwd:")})[0].substr(10)}},m.writeIceParameters=function(e){return"a=ice-ufrag:"+e.usernameFragment+"\r\na=ice-pwd:"+e.password+"\r\n"},m.parseRtpParameters=function(e){for(var t={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},n=m.splitLines(e),r=n[0].split(" "),i=3;i<r.length;i++){var o=r[i],a=m.matchPrefix(e,"a=rtpmap:"+o+" ")[0];if(a){var s=m.parseRtpMap(a),c=m.matchPrefix(e,"a=fmtp:"+o+" ");s.parameters=c.length?m.parseFmtp(c[0]):{},s.rtcpFeedback=m.matchPrefix(e,"a=rtcp-fb:"+o+" ").map(m.parseRtcpFb),t.codecs.push(s)}}return t},m.writeRtpDescription=function(e,t){var n="";return n+="m="+e+" ",n+=t.codecs.length>0?"9":"0",n+=" UDP/TLS/RTP/SAVPF ",n+=t.codecs.map(function(e){return void 0!==e.preferredPayloadType?e.preferredPayloadType:e.payloadType}).join(" ")+"\r\n",n+="c=IN IP4 0.0.0.0\r\n",n+="a=rtcp:9 IN IP4 0.0.0.0\r\n",t.codecs.forEach(function(e){n+=m.writeRtpMap(e),n+=m.writeFtmp(e),n+=m.writeRtcpFb(e)}),n+="a=rtcp-mux\r\n"},m.writeSessionBoilerplate=function(){return"v=0\r\no=thisisadapterortc 8169639915646943137 2 IN IP4 127.0.0.1\r\ns=-\r\nt=0 0\r\n"},m.writeMediaSection=function(e,t,n,r){var i=m.writeRtpDescription(e.kind,t);if(i+=m.writeIceParameters(e.iceGatherer.getLocalParameters()),i+=m.writeDtlsParameters(e.dtlsTransport.getLocalParameters(),"offer"===n?"actpass":"active"),i+="a=mid:"+e.mid+"\r\n",i+=e.rtpSender&&e.rtpReceiver?"a=sendrecv\r\n":e.rtpSender?"a=sendonly\r\n":e.rtpReceiver?"a=recvonly\r\n":"a=inactive\r\n",e.rtpSender){var o="msid:"+r.id+" "+e.rtpSender.track.id+"\r\n";i+="a="+o,i+="a=ssrc:"+e.sendSsrc+" "+o}return i+="a=ssrc:"+e.sendSsrc+" cname:"+g+"\r\n"},m.getDirection=function(e,t){for(var n=m.splitLines(e),r=0;r<n.length;r++)switch(n[r]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return n[r].substr(2)}return t?m.getDirection(t):"sendrecv"},window.RTCIceCandidate||(window.RTCIceCandidate=function(e){return e}),window.RTCSessionDescription||(window.RTCSessionDescription=function(e){return e}),window.RTCPeerConnection=function(e){var t=this;if(this.onicecandidate=null,this.onaddstream=null,this.onremovestream=null,this.onsignalingstatechange=null,this.oniceconnectionstatechange=null,this.onnegotiationneeded=null,this.ondatachannel=null,this.localStreams=[],this.remoteStreams=[],this.getLocalStreams=function(){return t.localStreams},this.getRemoteStreams=function(){return t.remoteStreams},this.localDescription=new w({type:"",sdp:""}),this.remoteDescription=new w({type:"",sdp:""}),this.signalingState="stable",this.iceConnectionState="new",this.iceOptions={gatherPolicy:"all",iceServers:[]},e&&e.iceTransportPolicy)switch(e.iceTransportPolicy){case"all":case"relay":this.iceOptions.gatherPolicy=e.iceTransportPolicy;break;case"none":throw new TypeError('iceTransportPolicy "none" not supported')}e&&e.iceServers&&e.iceServers.forEach(function(e){if(e.urls){var n;n="string"==typeof e.urls?e.urls:e.urls[0],-1!==n.indexOf("transport=udp")&&t.iceServers.push({username:e.username,credential:e.credential,urls:n})}}),this.transceivers=[],this._localIceCandidatesBuffer=[]},window.RTCPeerConnection.prototype._emitBufferedCandidates=function(){var e=this;this._localIceCandidatesBuffer.forEach(function(t){null!==e.onicecandidate&&e.onicecandidate(t)}),this._localIceCandidatesBuffer=[]},window.RTCPeerConnection.prototype.addStream=function(e){this.localStreams.push(e.clone()),this._maybeFireNegotiationNeeded()},window.RTCPeerConnection.prototype.removeStream=function(e){var t=this.localStreams.indexOf(e);t>-1&&(this.localStreams.splice(t,1),this._maybeFireNegotiationNeeded())},window.RTCPeerConnection.prototype._getCommonCapabilities=function(e,t){var n={codecs:[],headerExtensions:[],fecMechanisms:[]};return e.codecs.forEach(function(e){for(var r=0;r<t.codecs.length;r++){var i=t.codecs[r];if(e.name.toLowerCase()===i.name.toLowerCase()&&e.clockRate===i.clockRate&&e.numChannels===i.numChannels){n.codecs.push(i);break}}}),e.headerExtensions.forEach(function(e){for(var r=0;r<t.headerExtensions.length;r++){var i=t.headerExtensions[r];if(e.uri===i.uri){n.headerExtensions.push(i);break}}}),n},window.RTCPeerConnection.prototype._createIceAndDtlsTransports=function(e,t){var n=this,r=new RTCIceGatherer(n.iceOptions),i=new RTCIceTransport(r);r.onlocalcandidate=function(o){var a={};a.candidate={sdpMid:e,sdpMLineIndex:t};var s=o.candidate;s&&0!==Object.keys(s).length?(s.component="RTCP"===i.component?2:1,a.candidate.candidate=m.writeCandidate(s)):(void 0===r.state&&(r.state="completed"),a.candidate.candidate="candidate:1 1 udp 1 0.0.0.0 9 typ endOfCandidates");var c=n.transceivers.every(function(e){return e.iceGatherer&&"completed"===e.iceGatherer.state});null!==n.onicecandidate&&(n.localDescription&&""===n.localDescription.type?(n._localIceCandidatesBuffer.push(a),c&&n._localIceCandidatesBuffer.push({})):(n.onicecandidate(a),c&&n.onicecandidate({})))},i.onicestatechange=function(){n._updateConnectionState()};var o=new RTCDtlsTransport(i);return o.ondtlsstatechange=function(){n._updateConnectionState()},o.onerror=function(){o.state="failed",n._updateConnectionState()},{iceGatherer:r,iceTransport:i,dtlsTransport:o}},window.RTCPeerConnection.prototype._transceive=function(e,t,n){var r=this._getCommonCapabilities(e.localCapabilities,e.remoteCapabilities);t&&e.rtpSender&&(r.encodings=[{ssrc:e.sendSsrc}],r.rtcp={cname:g,ssrc:e.recvSsrc},e.rtpSender.send(r)),n&&e.rtpReceiver&&(r.encodings=[{ssrc:e.recvSsrc}],r.rtcp={cname:e.cname,ssrc:e.sendSsrc},e.rtpReceiver.receive(r))},window.RTCPeerConnection.prototype.setLocalDescription=function(e){var t=this;if("offer"===e.type)this._pendingOffer&&(this.transceivers=this._pendingOffer,delete this._pendingOffer);else if("answer"===e.type){var n=m.splitSections(t.remoteDescription.sdp),r=n.shift();n.forEach(function(e,n){var i=t.transceivers[n],o=i.iceGatherer,a=i.iceTransport,s=i.dtlsTransport,c=i.localCapabilities,u=i.remoteCapabilities;if("0"!==e.split("\n",1)[0].split(" ",2)[1]){var l=m.getIceParameters(e,r);a.start(o,l,"controlled");var d=m.getDtlsParameters(e,r);s.start(d);var p=t._getCommonCapabilities(c,u);t._transceive(i,p.codecs.length>0,!1)}})}switch(this.localDescription=e,e.type){case"offer":this._updateSignalingState("have-local-offer");break;case"answer":this._updateSignalingState("stable");break;default:throw new TypeError('unsupported type "'+e.type+'"')}var i=arguments.length>1&&"function"==typeof arguments[1];if(i){var o=arguments[1];window.setTimeout(function(){o(),t._emitBufferedCandidates()},0)}var a=Promise.resolve();return a.then(function(){i||window.setTimeout(t._emitBufferedCandidates.bind(t),0)}),a},window.RTCPeerConnection.prototype.setRemoteDescription=function(e){var t=this,n=new MediaStream,r=m.splitSections(e.sdp),i=r.shift();switch(r.forEach(function(r,o){var a,s,c,u,l,d,p,f,h,g,v,y=m.splitLines(r),b=y[0].substr(2).split(" "),w=b[0],k="0"===b[1],C=m.getDirection(r,i),S=m.parseRtpParameters(r);k||(g=m.getIceParameters(r,i),v=m.getDtlsParameters(r,i));var x,T=m.matchPrefix(r,"a=mid:")[0].substr(6),E=m.matchPrefix(r,"a=ssrc:").map(function(e){return m.parseSsrcMedia(e)}).filter(function(e){return"cname"===e.attribute})[0];if(E&&(f=parseInt(E.ssrc,10),x=E.value),"offer"===e.type){var O=t._createIceAndDtlsTransports(T,o);if(h=RTCRtpReceiver.getCapabilities(w),p=1001*(2*o+2),d=new RTCRtpReceiver(O.dtlsTransport,w),n.addTrack(d.track),t.localStreams.length>0&&t.localStreams[0].getTracks().length>=o){var _=t.localStreams[0].getTracks()[o];l=new RTCRtpSender(_,O.dtlsTransport)}t.transceivers[o]={iceGatherer:O.iceGatherer,iceTransport:O.iceTransport,dtlsTransport:O.dtlsTransport,localCapabilities:h,remoteCapabilities:S,rtpSender:l,rtpReceiver:d,kind:w,mid:T,cname:x,sendSsrc:p,recvSsrc:f},t._transceive(t.transceivers[o],!1,"sendrecv"===C||"sendonly"===C)}else"answer"!==e.type||k||(a=t.transceivers[o],s=a.iceGatherer,c=a.iceTransport,u=a.dtlsTransport,l=a.rtpSender,d=a.rtpReceiver,p=a.sendSsrc,h=a.localCapabilities,t.transceivers[o].recvSsrc=f,t.transceivers[o].remoteCapabilities=S,t.transceivers[o].cname=x,c.start(s,g,"controlling"),u.start(v),t._transceive(a,"sendrecv"===C||"recvonly"===C,"sendrecv"===C||"sendonly"===C),!d||"sendrecv"!==C&&"sendonly"!==C?delete a.rtpReceiver:n.addTrack(d.track))}),this.remoteDescription=e,e.type){case"offer":this._updateSignalingState("have-remote-offer");break;case"answer":this._updateSignalingState("stable");break;default:throw new TypeError('unsupported type "'+e.type+'"')}return window.setTimeout(function(){null!==t.onaddstream&&n.getTracks().length&&(t.remoteStreams.push(n),window.setTimeout(function(){t.onaddstream({stream:n})},0))},0),arguments.length>1&&"function"==typeof arguments[1]&&window.setTimeout(arguments[1],0),Promise.resolve()},window.RTCPeerConnection.prototype.close=function(){this.transceivers.forEach(function(e){e.iceTransport&&e.iceTransport.stop(),e.dtlsTransport&&e.dtlsTransport.stop(),e.rtpSender&&e.rtpSender.stop(),e.rtpReceiver&&e.rtpReceiver.stop()}),this._updateSignalingState("closed")},window.RTCPeerConnection.prototype._updateSignalingState=function(e){this.signalingState=e,null!==this.onsignalingstatechange&&this.onsignalingstatechange()},window.RTCPeerConnection.prototype._maybeFireNegotiationNeeded=function(){null!==this.onnegotiationneeded&&this.onnegotiationneeded()},window.RTCPeerConnection.prototype._updateConnectionState=function(){var e,t=this,n={new:0,closed:0,connecting:0,checking:0,connected:0,completed:0,failed:0};this.transceivers.forEach(function(e){n[e.iceTransport.state]++,n[e.dtlsTransport.state]++}),n.connected+=n.completed,e="new",n.failed>0?e="failed":n.connecting>0||n.checking>0?e="connecting":n.disconnected>0?e="disconnected":n.new>0?e="new":(n.connecting>0||n.completed>0)&&(e="connected"),e!==t.iceConnectionState&&(t.iceConnectionState=e,null!==this.oniceconnectionstatechange&&this.oniceconnectionstatechange())},window.RTCPeerConnection.prototype.createOffer=function(){var e=this;if(this._pendingOffer)throw new Error("createOffer called while there is a pending offer.");var t;1===arguments.length&&"function"!=typeof arguments[0]?t=arguments[0]:3===arguments.length&&(t=arguments[2]);var n=[],r=0,i=0;if(this.localStreams.length&&(r=this.localStreams[0].getAudioTracks().length,i=this.localStreams[0].getVideoTracks().length),t){if(t.mandatory||t.optional)throw new TypeError("Legacy mandatory/optional constraints not supported.");void 0!==t.offerToReceiveAudio&&(r=t.offerToReceiveAudio),void 0!==t.offerToReceiveVideo&&(i=t.offerToReceiveVideo)}for(this.localStreams.length&&this.localStreams[0].getTracks().forEach(function(e){n.push({kind:e.kind,track:e,wantReceive:"audio"===e.kind?r>0:i>0}),"audio"===e.kind?r--:"video"===e.kind&&i--});r>0||i>0;)r>0&&(n.push({kind:"audio",wantReceive:!0}),r--),i>0&&(n.push({kind:"video",wantReceive:!0}),i--);var o=m.writeSessionBoilerplate(),a=[];n.forEach(function(t,n){var r,i,s=t.track,c=t.kind,u=h(),l=e._createIceAndDtlsTransports(u,n),d=RTCRtpSender.getCapabilities(c),p=1001*(2*n+1);s&&(r=new RTCRtpSender(s,l.dtlsTransport)),t.wantReceive&&(i=new RTCRtpReceiver(l.dtlsTransport,c)),a[n]={iceGatherer:l.iceGatherer,iceTransport:l.iceTransport,dtlsTransport:l.dtlsTransport,localCapabilities:d,remoteCapabilities:null,rtpSender:r,rtpReceiver:i,kind:c,mid:u,sendSsrc:p,recvSsrc:null};var f=a[n];o+=m.writeMediaSection(f,f.localCapabilities,"offer",e.localStreams[0])}),this._pendingOffer=a;var s=new w({type:"offer",sdp:o});return arguments.length&&"function"==typeof arguments[0]&&window.setTimeout(arguments[0],0,s),Promise.resolve(s)},window.RTCPeerConnection.prototype.createAnswer=function(){var e=this;1===arguments.length&&"function"!=typeof arguments[0]?arguments[0]:3===arguments.length&&arguments[2];var t=m.writeSessionBoilerplate();this.transceivers.forEach(function(n){var r=e._getCommonCapabilities(n.localCapabilities,n.remoteCapabilities);t+=m.writeMediaSection(n,r,"answer",e.localStreams[0])});var n=new w({type:"answer",sdp:t});return arguments.length&&"function"==typeof arguments[0]&&window.setTimeout(arguments[0],0,n),Promise.resolve(n)},window.RTCPeerConnection.prototype.addIceCandidate=function(e){var t=e.sdpMLineIndex;if(e.sdpMid)for(var n=0;n<this.transceivers.length;n++)if(this.transceivers[n].mid===e.sdpMid){t=n;break}var r=this.transceivers[t];if(r){var i=Object.keys(e.candidate).length>0?m.parseCandidate(e.candidate):{};if("tcp"===i.protocol&&0===i.port)return;if("1"!==i.component)return;"endOfCandidates"===i.type&&(i={}),r.iceTransport.addRemoteCandidate(i)}return arguments.length>1&&"function"==typeof arguments[1]&&window.setTimeout(arguments[1],0),Promise.resolve()},window.RTCPeerConnection.prototype.getStats=function(){var e=[];this.transceivers.forEach(function(t){["rtpSender","rtpReceiver","iceGatherer","iceTransport","dtlsTransport"].forEach(function(n){t[n]&&e.push(t[n].getStats())})});var t=arguments.length>1&&"function"==typeof arguments[1]&&arguments[1];return new Promise(function(n){var r={};Promise.all(e).then(function(e){e.forEach(function(e){Object.keys(e).forEach(function(t){r[t]=e[t]})}),t&&window.setTimeout(t,0,r),n(r)})})}}}else l.log("Browser does not appear to be WebRTC-capable");else l.log("This does not appear to be a browser"),s="not a browser";"object"!=typeof window||!window.RTCPeerConnection||"ontrack"in window.RTCPeerConnection.prototype||Object.defineProperty(window.RTCPeerConnection.prototype,"ontrack",{get:function(){return this._ontrack},set:function(e){var t=this;this._ontrack&&(this.removeEventListener("track",this._ontrack),this.removeEventListener("addstream",this._ontrackpoly)),this.addEventListener("track",this._ontrack=e),this.addEventListener("addstream",this._ontrackpoly=function(e){"chrome"===s&&e.stream.addEventListener("addtrack",function(n){var r=new Event("track");r.track=n.track,r.receiver={track:n.track},r.streams=[e.stream],t.dispatchEvent(r)}),e.stream.getTracks().forEach(function(t){var n=new Event("track");n.track=t,n.receiver={track:t},n.streams=[e.stream],this.dispatchEvent(n)}.bind(this))}.bind(this))}});var v={};try{Object.defineProperty(v,"version",{set:function(e){c=e}})}catch(e){}if("undefined"!=typeof t){var y,b,w;"undefined"!=typeof window&&(y=window.RTCPeerConnection,b=window.RTCIceCandidate,w=window.RTCSessionDescription),t.exports={RTCPeerConnection:y,RTCIceCandidate:b,RTCSessionDescription:w,getUserMedia:i,attachMediaStream:o,reattachMediaStream:a,webrtcDetectedBrowser:s,webrtcDetectedVersion:c,webrtcMinimumVersion:u,webrtcTesting:v,webrtcUtils:l}}else"function"==typeof e&&"function"==typeof define&&define([],function(){return{RTCPeerConnection:window.RTCPeerConnection,RTCIceCandidate:window.RTCIceCandidate,RTCSessionDescription:window.RTCSessionDescription,getUserMedia:i,attachMediaStream:o,reattachMediaStream:a,webrtcDetectedBrowser:s,webrtcDetectedVersion:c,webrtcMinimumVersion:u,webrtcTesting:v,webrtcUtils:l}})},{}],42:[function(e,t,n){"use strict";!function(){var n=e("./utils").log,r=e("./utils").browserDetails;t.exports.browserDetails=r,t.exports.extractVersion=e("./utils").extractVersion,t.exports.disableLog=e("./utils").disableLog;var i=e("./chrome/chrome_shim")||null,o=e("./edge/edge_shim")||null,a=e("./firefox/firefox_shim")||null,s=e("./safari/safari_shim")||null;switch(r.browser){case"opera":case"chrome":if(!i||!i.shimPeerConnection)return void n("Chrome shim is not included in this adapter release.");n("adapter.js shimming chrome."),t.exports.browserShim=i,i.shimGetUserMedia(),i.shimMediaStream(),i.shimSourceObject(),i.shimPeerConnection(),i.shimOnTrack();break;case"firefox":if(!a||!a.shimPeerConnection)return void n("Firefox shim is not included in this adapter release.");n("adapter.js shimming firefox."),t.exports.browserShim=a,a.shimGetUserMedia(),a.shimSourceObject(),a.shimPeerConnection(),a.shimOnTrack();break;case"edge":if(!o||!o.shimPeerConnection)return void n("MS edge shim is not included in this adapter release.");n("adapter.js shimming edge."),t.exports.browserShim=o,o.shimGetUserMedia(),o.shimPeerConnection();break;case"safari":if(!s)return void n("Safari shim is not included in this adapter release.");n("adapter.js shimming safari."),t.exports.browserShim=s,s.shimGetUserMedia();break;default:n("Unsupported browser!")}}()},{"./chrome/chrome_shim":43,"./edge/edge_shim":45,"./firefox/firefox_shim":47,"./safari/safari_shim":49,"./utils":50}],43:[function(e,t,n){"use strict";var r=e("../utils.js").log,i=e("../utils.js").browserDetails,o={shimMediaStream:function(){window.MediaStream=window.MediaStream||window.webkitMediaStream},shimOnTrack:function(){"object"!=typeof window||!window.RTCPeerConnection||"ontrack"in window.RTCPeerConnection.prototype||Object.defineProperty(window.RTCPeerConnection.prototype,"ontrack",{get:function(){return this._ontrack},set:function(e){var t=this;this._ontrack&&(this.removeEventListener("track",this._ontrack),this.removeEventListener("addstream",this._ontrackpoly)),this.addEventListener("track",this._ontrack=e),this.addEventListener("addstream",this._ontrackpoly=function(e){e.stream.addEventListener("addtrack",function(n){var r=new Event("track");r.track=n.track,r.receiver={track:n.track},r.streams=[e.stream],t.dispatchEvent(r)}),e.stream.getTracks().forEach(function(t){var n=new Event("track");n.track=t,n.receiver={track:t},n.streams=[e.stream],this.dispatchEvent(n)}.bind(this))}.bind(this))}})},shimSourceObject:function(){"object"==typeof window&&(!window.HTMLMediaElement||"srcObject"in window.HTMLMediaElement.prototype||Object.defineProperty(window.HTMLMediaElement.prototype,"srcObject",{get:function(){return this._srcObject},set:function(e){var t=this;return this._srcObject=e,this.src&&URL.revokeObjectURL(this.src),e?(this.src=URL.createObjectURL(e),e.addEventListener("addtrack",function(){t.src&&URL.revokeObjectURL(t.src),t.src=URL.createObjectURL(e)}),void e.addEventListener("removetrack",function(){t.src&&URL.revokeObjectURL(t.src),t.src=URL.createObjectURL(e)})):void(this.src="")}}))},shimPeerConnection:function(){window.RTCPeerConnection=function(e,t){r("PeerConnection"),e&&e.iceTransportPolicy&&(e.iceTransports=e.iceTransportPolicy);var n=new webkitRTCPeerConnection(e,t),i=n.getStats.bind(n);return n.getStats=function(e,t,n){var r=this,o=arguments;if(arguments.length>0&&"function"==typeof e)return i(e,t);var a=function(e){var t={};return e.result().forEach(function(e){var n={id:e.id,timestamp:e.timestamp,type:e.type};e.names().forEach(function(t){n[t]=e.stat(t)}),t[n.id]=n}),t},s=function(e,t){var n=new Map(Object.keys(e).map(function(t){return[t,e[t]]}));return t=t||e,Object.keys(t).forEach(function(e){n[e]=t[e]}),n};if(arguments.length>=2){var c=function(e){o[1](s(a(e)))};return i.apply(this,[c,arguments[0]])}return new Promise(function(t,n){1===o.length&&"object"==typeof e?i.apply(r,[function(e){t(s(a(e)))},n]):i.apply(r,[function(e){t(s(a(e),e.result()))},n])}).then(t,n)},n},window.RTCPeerConnection.prototype=webkitRTCPeerConnection.prototype,webkitRTCPeerConnection.generateCertificate&&Object.defineProperty(window.RTCPeerConnection,"generateCertificate",{get:function(){return webkitRTCPeerConnection.generateCertificate}}),["createOffer","createAnswer"].forEach(function(e){var t=webkitRTCPeerConnection.prototype[e];webkitRTCPeerConnection.prototype[e]=function(){var e=this;if(arguments.length<1||1===arguments.length&&"object"==typeof arguments[0]){var n=1===arguments.length?arguments[0]:void 0;return new Promise(function(r,i){t.apply(e,[r,i,n])})}return t.apply(this,arguments)}}),i.version<51&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(e){var t=webkitRTCPeerConnection.prototype[e];webkitRTCPeerConnection.prototype[e]=function(){var e=arguments,n=this,r=new Promise(function(r,i){t.apply(n,[e[0],r,i])});return e.length<2?r:r.then(function(){e[1].apply(null,[])},function(t){e.length>=3&&e[2].apply(null,[t])})}});var e=RTCPeerConnection.prototype.addIceCandidate;RTCPeerConnection.prototype.addIceCandidate=function(){return null===arguments[0]?Promise.resolve():e.apply(this,arguments)},["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(e){var t=webkitRTCPeerConnection.prototype[e];webkitRTCPeerConnection.prototype[e]=function(){return arguments[0]=new("addIceCandidate"===e?RTCIceCandidate:RTCSessionDescription)(arguments[0]),t.apply(this,arguments)}})},attachMediaStream:function(e,t){r("DEPRECATED, attachMediaStream will soon be removed."),i.version>=43?e.srcObject=t:"undefined"!=typeof e.src?e.src=URL.createObjectURL(t):r("Error attaching stream to element.")},reattachMediaStream:function(e,t){r("DEPRECATED, reattachMediaStream will soon be removed."),i.version>=43?e.srcObject=t.srcObject:e.src=t.src}};t.exports={shimMediaStream:o.shimMediaStream,shimOnTrack:o.shimOnTrack,shimSourceObject:o.shimSourceObject,shimPeerConnection:o.shimPeerConnection,shimGetUserMedia:e("./getusermedia"),attachMediaStream:o.attachMediaStream,reattachMediaStream:o.reattachMediaStream}},{"../utils.js":50,"./getusermedia":44}],44:[function(e,t,n){"use strict";var r=e("../utils.js").log;t.exports=function(){var e=function(e){if("object"!=typeof e||e.mandatory||e.optional)return e;var t={};return Object.keys(e).forEach(function(n){if("require"!==n&&"advanced"!==n&&"mediaSource"!==n){var r="object"==typeof e[n]?e[n]:{ideal:e[n]};void 0!==r.exact&&"number"==typeof r.exact&&(r.min=r.max=r.exact);var i=function(e,t){return e?e+t.charAt(0).toUpperCase()+t.slice(1):"deviceId"===t?"sourceId":t};if(void 0!==r.ideal){t.optional=t.optional||[];var o={};"number"==typeof r.ideal?(o[i("min",n)]=r.ideal,t.optional.push(o),o={},o[i("max",n)]=r.ideal,t.optional.push(o)):(o[i("",n)]=r.ideal,t.optional.push(o))}void 0!==r.exact&&"number"!=typeof r.exact?(t.mandatory=t.mandatory||{},t.mandatory[i("",n)]=r.exact):["min","max"].forEach(function(e){void 0!==r[e]&&(t.mandatory=t.mandatory||{},t.mandatory[i(e,n)]=r[e])})}}),e.advanced&&(t.optional=(t.optional||[]).concat(e.advanced)),t},t=function(t,n){if(t=JSON.parse(JSON.stringify(t)),t&&t.audio&&(t.audio=e(t.audio)),t&&"object"==typeof t.video){var i=t.video.facingMode;if((i=i&&("object"==typeof i?i:{ideal:i}))&&("user"===i.exact||"environment"===i.exact||"user"===i.ideal||"environment"===i.ideal)&&(!navigator.mediaDevices.getSupportedConstraints||!navigator.mediaDevices.getSupportedConstraints().facingMode)&&(delete t.video.facingMode,"environment"===i.exact||"environment"===i.ideal))return navigator.mediaDevices.enumerateDevices().then(function(o){o=o.filter(function(e){return"videoinput"===e.kind});var a=o.find(function(e){return-1!==e.label.toLowerCase().indexOf("back")})||o.length&&o[o.length-1];return a&&(t.video.deviceId=i.exact?{exact:a.deviceId}:{ideal:a.deviceId}),t.video=e(t.video),r("chrome: "+JSON.stringify(t)),n(t)});t.video=e(t.video)}return r("chrome: "+JSON.stringify(t)),n(t)},n=function(e){return{name:{PermissionDeniedError:"NotAllowedError",ConstraintNotSatisfiedError:"OverconstrainedError"}[e.name]||e.name,message:e.message,constraint:e.constraintName,toString:function(){return this.name+(this.message&&": ")+this.message}}},i=function(e,r,i){t(e,function(e){navigator.webkitGetUserMedia(e,r,function(e){i(n(e))})})};navigator.getUserMedia=i;var o=function(e){return new Promise(function(t,n){navigator.getUserMedia(e,t,n)})};if(navigator.mediaDevices||(navigator.mediaDevices={getUserMedia:o,enumerateDevices:function(){return new Promise(function(e){var t={audio:"audioinput",video:"videoinput"};return MediaStreamTrack.getSources(function(n){e(n.map(function(e){return{label:e.label,kind:t[e.kind],deviceId:e.id,groupId:""}}))})})}}),navigator.mediaDevices.getUserMedia){var a=navigator.mediaDevices.getUserMedia.bind(navigator.mediaDevices);navigator.mediaDevices.getUserMedia=function(e){return t(e,function(e){return a(e).catch(function(e){return Promise.reject(n(e))})})}}else navigator.mediaDevices.getUserMedia=function(e){return o(e)};"undefined"==typeof navigator.mediaDevices.addEventListener&&(navigator.mediaDevices.addEventListener=function(){r("Dummy mediaDevices.addEventListener called.")}),"undefined"==typeof navigator.mediaDevices.removeEventListener&&(navigator.mediaDevices.removeEventListener=function(){r("Dummy mediaDevices.removeEventListener called.")})}},{"../utils.js":50}],45:[function(e,t,n){"use strict";var r=e("sdp"),i=e("../utils").log,o={shimPeerConnection:function(){window.RTCIceGatherer&&(window.RTCIceCandidate||(window.RTCIceCandidate=function(e){return e}),window.RTCSessionDescription||(window.RTCSessionDescription=function(e){return e})),window.RTCPeerConnection=function(e){var t=this,n=document.createDocumentFragment();if(["addEventListener","removeEventListener","dispatchEvent"].forEach(function(e){t[e]=n[e].bind(n)}),this.onicecandidate=null,this.onaddstream=null,this.ontrack=null,this.onremovestream=null,this.onsignalingstatechange=null,this.oniceconnectionstatechange=null,this.onnegotiationneeded=null,this.ondatachannel=null,this.localStreams=[],this.remoteStreams=[],this.getLocalStreams=function(){return t.localStreams},this.getRemoteStreams=function(){return t.remoteStreams},this.localDescription=new RTCSessionDescription({type:"",sdp:""}),this.remoteDescription=new RTCSessionDescription({type:"",sdp:""}),this.signalingState="stable",this.iceConnectionState="new",this.iceGatheringState="new",this.iceOptions={gatherPolicy:"all",iceServers:[]},e&&e.iceTransportPolicy)switch(e.iceTransportPolicy){case"all":case"relay":this.iceOptions.gatherPolicy=e.iceTransportPolicy;break;case"none":throw new TypeError('iceTransportPolicy "none" not supported')}if(this.usingBundle=e&&"max-bundle"===e.bundlePolicy,e&&e.iceServers){var r=JSON.parse(JSON.stringify(e.iceServers));this.iceOptions.iceServers=r.filter(function(e){if(e&&e.urls){var t=e.urls;return"string"==typeof t&&(t=[t]),!!(t=t.filter(function(e){return 0===e.indexOf("turn:")&&-1!==e.indexOf("transport=udp")})[0])}return!1})}this.transceivers=[],this._localIceCandidatesBuffer=[]},window.RTCPeerConnection.prototype._emitBufferedCandidates=function(){var e=this,t=r.splitSections(e.localDescription.sdp);this._localIceCandidatesBuffer.forEach(function(n){if(n.candidate&&0!==Object.keys(n.candidate).length)-1===n.candidate.candidate.indexOf("typ endOfCandidates")&&(t[n.candidate.sdpMLineIndex+1]+="a="+n.candidate.candidate+"\r\n");else for(var r=1;r<t.length;r++)-1===t[r].indexOf("\r\na=end-of-candidates\r\n")&&(t[r]+="a=end-of-candidates\r\n");if(e.localDescription.sdp=t.join(""),e.dispatchEvent(n),null!==e.onicecandidate&&e.onicecandidate(n),!n.candidate&&"complete"!==e.iceGatheringState){e.transceivers.every(function(e){return e.iceGatherer&&"completed"===e.iceGatherer.state})&&(e.iceGatheringState="complete")}}),this._localIceCandidatesBuffer=[]},window.RTCPeerConnection.prototype.addStream=function(e){this.localStreams.push(e.clone()),this._maybeFireNegotiationNeeded()},window.RTCPeerConnection.prototype.removeStream=function(e){var t=this.localStreams.indexOf(e);t>-1&&(this.localStreams.splice(t,1),this._maybeFireNegotiationNeeded())},window.RTCPeerConnection.prototype.getSenders=function(){return this.transceivers.filter(function(e){return!!e.rtpSender}).map(function(e){return e.rtpSender})},window.RTCPeerConnection.prototype.getReceivers=function(){return this.transceivers.filter(function(e){return!!e.rtpReceiver}).map(function(e){return e.rtpReceiver})},window.RTCPeerConnection.prototype._getCommonCapabilities=function(e,t){var n={codecs:[],headerExtensions:[],fecMechanisms:[]};return e.codecs.forEach(function(e){for(var r=0;r<t.codecs.length;r++){var i=t.codecs[r];if(e.name.toLowerCase()===i.name.toLowerCase()&&e.clockRate===i.clockRate&&e.numChannels===i.numChannels){n.codecs.push(i);break}}}),e.headerExtensions.forEach(function(e){for(var r=0;r<t.headerExtensions.length;r++){var i=t.headerExtensions[r];if(e.uri===i.uri){n.headerExtensions.push(i);break}}}),n},window.RTCPeerConnection.prototype._createIceAndDtlsTransports=function(e,t){var n=this,i=new RTCIceGatherer(n.iceOptions),o=new RTCIceTransport(i);i.onlocalcandidate=function(a){var s=new Event("icecandidate");s.candidate={sdpMid:e,sdpMLineIndex:t};var c=a.candidate,u=!c||0===Object.keys(c).length;u?(void 0===i.state&&(i.state="completed"),s.candidate.candidate="candidate:1 1 udp 1 0.0.0.0 9 typ endOfCandidates"):(c.component="RTCP"===o.component?2:1,s.candidate.candidate=r.writeCandidate(c));var l=r.splitSections(n.localDescription.sdp);-1===s.candidate.candidate.indexOf("typ endOfCandidates")?l[s.candidate.sdpMLineIndex+1]+="a="+s.candidate.candidate+"\r\n":l[s.candidate.sdpMLineIndex+1]+="a=end-of-candidates\r\n",n.localDescription.sdp=l.join("");var d=n.transceivers.every(function(e){return e.iceGatherer&&"completed"===e.iceGatherer.state});switch(n.iceGatheringState){case"new":n._localIceCandidatesBuffer.push(s),u&&d&&n._localIceCandidatesBuffer.push(new Event("icecandidate"));break;case"gathering":n._emitBufferedCandidates(),n.dispatchEvent(s),null!==n.onicecandidate&&n.onicecandidate(s),d&&(n.dispatchEvent(new Event("icecandidate")),null!==n.onicecandidate&&n.onicecandidate(new Event("icecandidate")),n.iceGatheringState="complete")}},o.onicestatechange=function(){n._updateConnectionState()};var a=new RTCDtlsTransport(o);return a.ondtlsstatechange=function(){n._updateConnectionState()},a.onerror=function(){a.state="failed",n._updateConnectionState()},{iceGatherer:i,iceTransport:o,dtlsTransport:a}},window.RTCPeerConnection.prototype._transceive=function(e,t,n){var i=this._getCommonCapabilities(e.localCapabilities,e.remoteCapabilities);t&&e.rtpSender&&(i.encodings=e.sendEncodingParameters,i.rtcp={cname:r.localCName},e.recvEncodingParameters.length&&(i.rtcp.ssrc=e.recvEncodingParameters[0].ssrc),e.rtpSender.send(i)),n&&e.rtpReceiver&&(i.encodings=e.recvEncodingParameters,i.rtcp={cname:e.cname},e.sendEncodingParameters.length&&(i.rtcp.ssrc=e.sendEncodingParameters[0].ssrc),e.rtpReceiver.receive(i))},window.RTCPeerConnection.prototype.setLocalDescription=function(e){var t,n,i=this;if("offer"===e.type)this._pendingOffer&&(t=r.splitSections(e.sdp),n=t.shift(),t.forEach(function(e,t){var n=r.parseRtpParameters(e);i._pendingOffer[t].localCapabilities=n}),this.transceivers=this._pendingOffer,delete this._pendingOffer);else if("answer"===e.type){t=r.splitSections(i.remoteDescription.sdp),n=t.shift();var o=r.matchPrefix(n,"a=ice-lite").length>0;t.forEach(function(e,t){var a=i.transceivers[t],s=a.iceGatherer,c=a.iceTransport,u=a.dtlsTransport,l=a.localCapabilities,d=a.remoteCapabilities;if("0"!==e.split("\n",1)[0].split(" ",2)[1]){var p=r.getIceParameters(e,n);if(o){var f=r.matchPrefix(e,"a=candidate:").map(function(e){return r.parseCandidate(e)}).filter(function(e){return"1"===e.component});f.length&&c.setRemoteCandidates(f)}var h=r.getDtlsParameters(e,n);o&&(h.role="server"),i.usingBundle&&0!==t||(c.start(s,p,o?"controlling":"controlled"),u.start(h));var g=i._getCommonCapabilities(l,d);i._transceive(a,g.codecs.length>0,!1)}})}switch(this.localDescription={type:e.type,sdp:e.sdp},e.type){case"offer":this._updateSignalingState("have-local-offer");break;case"answer":this._updateSignalingState("stable");break;default:throw new TypeError('unsupported type "'+e.type+'"')}var a=arguments.length>1&&"function"==typeof arguments[1];if(a){var s=arguments[1];window.setTimeout(function(){s(),"new"===i.iceGatheringState&&(i.iceGatheringState="gathering"),i._emitBufferedCandidates()},0)}var c=Promise.resolve();return c.then(function(){a||("new"===i.iceGatheringState&&(i.iceGatheringState="gathering"),window.setTimeout(i._emitBufferedCandidates.bind(i),500))}),c},window.RTCPeerConnection.prototype.setRemoteDescription=function(e){var t=this,n=new MediaStream,i=[],o=r.splitSections(e.sdp),a=o.shift(),s=r.matchPrefix(a,"a=ice-lite").length>0;switch(this.usingBundle=r.matchPrefix(a,"a=group:BUNDLE ").length>0,o.forEach(function(o,c){var u,l,d,p,f,h,g,m,v,y,b,w,k=r.splitLines(o),C=k[0].substr(2).split(" "),S=C[0],x="0"===C[1],T=r.getDirection(o,a),E=r.parseRtpParameters(o);x||(b=r.getIceParameters(o,a),w=r.getDtlsParameters(o,a),w.role="client"),m=r.parseRtpEncodingParameters(o);var O=r.matchPrefix(o,"a=mid:");O=O.length?O[0].substr(6):r.generateIdentifier();var _,P=r.matchPrefix(o,"a=ssrc:").map(function(e){return r.parseSsrcMedia(e)}).filter(function(e){return"cname"===e.attribute})[0];P&&(_=P.value);var R=r.matchPrefix(o,"a=end-of-candidates").length>0,I=r.matchPrefix(o,"a=candidate:").map(function(e){return r.parseCandidate(e)}).filter(function(e){return"1"===e.component});if("offer"!==e.type||x)"answer"!==e.type||x||(u=t.transceivers[c],l=u.iceGatherer,d=u.iceTransport,p=u.dtlsTransport,f=u.rtpSender,h=u.rtpReceiver,g=u.sendEncodingParameters,v=u.localCapabilities,t.transceivers[c].recvEncodingParameters=m,t.transceivers[c].remoteCapabilities=E,t.transceivers[c].cname=_,(s||R)&&I.length&&d.setRemoteCandidates(I),t.usingBundle&&0!==c||(d.start(l,b,"controlling"),p.start(w)),t._transceive(u,"sendrecv"===T||"recvonly"===T,"sendrecv"===T||"sendonly"===T),!h||"sendrecv"!==T&&"sendonly"!==T?delete u.rtpReceiver:(y=h.track,i.push([y,h]),n.addTrack(y)));else{var D=t.usingBundle&&c>0?{iceGatherer:t.transceivers[0].iceGatherer,iceTransport:t.transceivers[0].iceTransport,dtlsTransport:t.transceivers[0].dtlsTransport}:t._createIceAndDtlsTransports(O,c);if(R&&D.iceTransport.setRemoteCandidates(I),v=RTCRtpReceiver.getCapabilities(S),g=[{ssrc:1001*(2*c+2)}],h=new RTCRtpReceiver(D.dtlsTransport,S),y=h.track,i.push([y,h]),n.addTrack(y),t.localStreams.length>0&&t.localStreams[0].getTracks().length>=c){var N=t.localStreams[0].getTracks()[c];f=new RTCRtpSender(N,D.dtlsTransport)}t.transceivers[c]={iceGatherer:D.iceGatherer,iceTransport:D.iceTransport,dtlsTransport:D.dtlsTransport,localCapabilities:v,remoteCapabilities:E,rtpSender:f,rtpReceiver:h,kind:S,mid:O,cname:_,sendEncodingParameters:g,recvEncodingParameters:m},t._transceive(t.transceivers[c],!1,"sendrecv"===T||"sendonly"===T)}}),this.remoteDescription={type:e.type,sdp:e.sdp},e.type){case"offer":this._updateSignalingState("have-remote-offer");break;case"answer":this._updateSignalingState("stable");break;default:throw new TypeError('unsupported type "'+e.type+'"')}return n.getTracks().length&&(t.remoteStreams.push(n),window.setTimeout(function(){var e=new Event("addstream");e.stream=n,t.dispatchEvent(e),null!==t.onaddstream&&window.setTimeout(function(){t.onaddstream(e)},0),i.forEach(function(r){var i=r[0],o=r[1],a=new Event("track");a.track=i,a.receiver=o,a.streams=[n],t.dispatchEvent(e),null!==t.ontrack&&window.setTimeout(function(){t.ontrack(a)},0)})},0)),arguments.length>1&&"function"==typeof arguments[1]&&window.setTimeout(arguments[1],0),Promise.resolve()},window.RTCPeerConnection.prototype.close=function(){this.transceivers.forEach(function(e){e.iceTransport&&e.iceTransport.stop(),e.dtlsTransport&&e.dtlsTransport.stop(),e.rtpSender&&e.rtpSender.stop(),e.rtpReceiver&&e.rtpReceiver.stop()}),this._updateSignalingState("closed")},window.RTCPeerConnection.prototype._updateSignalingState=function(e){this.signalingState=e;var t=new Event("signalingstatechange");this.dispatchEvent(t),null!==this.onsignalingstatechange&&this.onsignalingstatechange(t)},window.RTCPeerConnection.prototype._maybeFireNegotiationNeeded=function(){var e=new Event("negotiationneeded");this.dispatchEvent(e),null!==this.onnegotiationneeded&&this.onnegotiationneeded(e)},window.RTCPeerConnection.prototype._updateConnectionState=function(){var e,t=this,n={new:0,closed:0,connecting:0,checking:0,connected:0,completed:0,failed:0};if(this.transceivers.forEach(function(e){n[e.iceTransport.state]++,n[e.dtlsTransport.state]++}),n.connected+=n.completed,e="new",n.failed>0?e="failed":n.connecting>0||n.checking>0?e="connecting":n.disconnected>0?e="disconnected":n.new>0?e="new":(n.connected>0||n.completed>0)&&(e="connected"),e!==t.iceConnectionState){t.iceConnectionState=e;var r=new Event("iceconnectionstatechange");this.dispatchEvent(r),null!==this.oniceconnectionstatechange&&this.oniceconnectionstatechange(r)}},window.RTCPeerConnection.prototype.createOffer=function(){var e=this;if(this._pendingOffer)throw new Error("createOffer called while there is a pending offer.");var t;1===arguments.length&&"function"!=typeof arguments[0]?t=arguments[0]:3===arguments.length&&(t=arguments[2]);var n=[],i=0,o=0;if(this.localStreams.length&&(i=this.localStreams[0].getAudioTracks().length,o=this.localStreams[0].getVideoTracks().length),t){if(t.mandatory||t.optional)throw new TypeError("Legacy mandatory/optional constraints not supported.");void 0!==t.offerToReceiveAudio&&(i=t.offerToReceiveAudio),void 0!==t.offerToReceiveVideo&&(o=t.offerToReceiveVideo)}for(this.localStreams.length&&this.localStreams[0].getTracks().forEach(function(e){n.push({kind:e.kind,track:e,wantReceive:"audio"===e.kind?i>0:o>0}),"audio"===e.kind?i--:"video"===e.kind&&o--});i>0||o>0;)i>0&&(n.push({kind:"audio",wantReceive:!0}),i--),o>0&&(n.push({kind:"video",wantReceive:!0}),o--);var a=r.writeSessionBoilerplate(),s=[];n.forEach(function(t,n){var i,o,a=t.track,c=t.kind,u=r.generateIdentifier(),l=e.usingBundle&&n>0?{iceGatherer:s[0].iceGatherer,iceTransport:s[0].iceTransport,dtlsTransport:s[0].dtlsTransport}:e._createIceAndDtlsTransports(u,n),d=RTCRtpSender.getCapabilities(c),p=[{ssrc:1001*(2*n+1)}];a&&(i=new RTCRtpSender(a,l.dtlsTransport)),t.wantReceive&&(o=new RTCRtpReceiver(l.dtlsTransport,c)),s[n]={iceGatherer:l.iceGatherer,iceTransport:l.iceTransport,dtlsTransport:l.dtlsTransport,localCapabilities:d,remoteCapabilities:null,rtpSender:i,rtpReceiver:o,kind:c,mid:u,sendEncodingParameters:p,recvEncodingParameters:null}}),this.usingBundle&&(a+="a=group:BUNDLE "+s.map(function(e){return e.mid}).join(" ")+"\r\n"),n.forEach(function(t,n){var i=s[n];a+=r.writeMediaSection(i,i.localCapabilities,"offer",e.localStreams[0])}),this._pendingOffer=s;var c=new RTCSessionDescription({type:"offer",sdp:a});return arguments.length&&"function"==typeof arguments[0]&&window.setTimeout(arguments[0],0,c),Promise.resolve(c)},window.RTCPeerConnection.prototype.createAnswer=function(){var e=this,t=r.writeSessionBoilerplate();this.usingBundle&&(t+="a=group:BUNDLE "+this.transceivers.map(function(e){return e.mid}).join(" ")+"\r\n"),this.transceivers.forEach(function(n){var i=e._getCommonCapabilities(n.localCapabilities,n.remoteCapabilities);t+=r.writeMediaSection(n,i,"answer",e.localStreams[0])});var n=new RTCSessionDescription({type:"answer",sdp:t});return arguments.length&&"function"==typeof arguments[0]&&window.setTimeout(arguments[0],0,n),Promise.resolve(n)},window.RTCPeerConnection.prototype.addIceCandidate=function(e){if(null===e)this.transceivers.forEach(function(e){e.iceTransport.addRemoteCandidate({})});else{var t=e.sdpMLineIndex;if(e.sdpMid)for(var n=0;n<this.transceivers.length;n++)if(this.transceivers[n].mid===e.sdpMid){t=n;break}var i=this.transceivers[t];if(i){var o=Object.keys(e.candidate).length>0?r.parseCandidate(e.candidate):{};if("tcp"===o.protocol&&0===o.port)return;if("1"!==o.component)return;"endOfCandidates"===o.type&&(o={}),i.iceTransport.addRemoteCandidate(o);var a=r.splitSections(this.remoteDescription.sdp);a[t+1]+=(o.type?e.candidate.trim():"a=end-of-candidates")+"\r\n",this.remoteDescription.sdp=a.join("")}}return arguments.length>1&&"function"==typeof arguments[1]&&window.setTimeout(arguments[1],0),Promise.resolve()},window.RTCPeerConnection.prototype.getStats=function(){var e=[];this.transceivers.forEach(function(t){["rtpSender","rtpReceiver","iceGatherer","iceTransport","dtlsTransport"].forEach(function(n){t[n]&&e.push(t[n].getStats())})});var t=arguments.length>1&&"function"==typeof arguments[1]&&arguments[1];return new Promise(function(n){var r=new Map;Promise.all(e).then(function(e){e.forEach(function(e){Object.keys(e).forEach(function(t){r.set(t,e[t]),r[t]=e[t]})}),t&&window.setTimeout(t,0,r),n(r)})})}},attachMediaStream:function(e,t){i("DEPRECATED, attachMediaStream will soon be removed."),e.srcObject=t},reattachMediaStream:function(e,t){i("DEPRECATED, reattachMediaStream will soon be removed."),e.srcObject=t.srcObject}};t.exports={shimPeerConnection:o.shimPeerConnection,shimGetUserMedia:e("./getusermedia"),attachMediaStream:o.attachMediaStream,reattachMediaStream:o.reattachMediaStream}},{"../utils":50,"./getusermedia":46,sdp:34}],46:[function(e,t,n){"use strict";t.exports=function(){var e=function(e){return{name:{PermissionDeniedError:"NotAllowedError"}[e.name]||e.name,message:e.message,constraint:e.constraint,toString:function(){return this.name}}},t=navigator.mediaDevices.getUserMedia.bind(navigator.mediaDevices);navigator.mediaDevices.getUserMedia=function(n){return t(n).catch(function(t){return Promise.reject(e(t))})}}},{}],47:[function(e,t,n){"use strict";var r=e("../utils").log,i=e("../utils").browserDetails,o={shimOnTrack:function(){"object"!=typeof window||!window.RTCPeerConnection||"ontrack"in window.RTCPeerConnection.prototype||Object.defineProperty(window.RTCPeerConnection.prototype,"ontrack",{get:function(){return this._ontrack},set:function(e){this._ontrack&&(this.removeEventListener("track",this._ontrack),this.removeEventListener("addstream",this._ontrackpoly)),this.addEventListener("track",this._ontrack=e),this.addEventListener("addstream",this._ontrackpoly=function(e){e.stream.getTracks().forEach(function(t){var n=new Event("track");n.track=t,n.receiver={track:t},n.streams=[e.stream],this.dispatchEvent(n)}.bind(this))}.bind(this))}})},shimSourceObject:function(){"object"==typeof window&&(!window.HTMLMediaElement||"srcObject"in window.HTMLMediaElement.prototype||Object.defineProperty(window.HTMLMediaElement.prototype,"srcObject",{get:function(){return this.mozSrcObject},set:function(e){this.mozSrcObject=e}}))},shimPeerConnection:function(){if("object"==typeof window&&(window.RTCPeerConnection||window.mozRTCPeerConnection)){window.RTCPeerConnection||(window.RTCPeerConnection=function(e,t){if(i.version<38&&e&&e.iceServers){for(var n=[],r=0;r<e.iceServers.length;r++){var o=e.iceServers[r];if(o.hasOwnProperty("urls"))for(var a=0;a<o.urls.length;a++){var s={url:o.urls[a]};0===o.urls[a].indexOf("turn")&&(s.username=o.username,s.credential=o.credential),n.push(s)}else n.push(e.iceServers[r])}e.iceServers=n}return new mozRTCPeerConnection(e,t)},window.RTCPeerConnection.prototype=mozRTCPeerConnection.prototype,mozRTCPeerConnection.generateCertificate&&Object.defineProperty(window.RTCPeerConnection,"generateCertificate",{get:function(){return mozRTCPeerConnection.generateCertificate}}),window.RTCSessionDescription=mozRTCSessionDescription,window.RTCIceCandidate=mozRTCIceCandidate),["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(e){var t=RTCPeerConnection.prototype[e];RTCPeerConnection.prototype[e]=function(){return arguments[0]=new("addIceCandidate"===e?RTCIceCandidate:RTCSessionDescription)(arguments[0]),t.apply(this,arguments)}});var e=RTCPeerConnection.prototype.addIceCandidate;RTCPeerConnection.prototype.addIceCandidate=function(){return null===arguments[0]?Promise.resolve():e.apply(this,arguments)};var t=function(e){var t=new Map;return Object.keys(e).forEach(function(n){t.set(n,e[n]),t[n]=e[n]}),t},n=RTCPeerConnection.prototype.getStats;RTCPeerConnection.prototype.getStats=function(e,r,i){return n.apply(this,[e||null]).then(function(e){return t(e)}).then(r,i)}}},attachMediaStream:function(e,t){r("DEPRECATED, attachMediaStream will soon be removed."),e.srcObject=t},reattachMediaStream:function(e,t){r("DEPRECATED, reattachMediaStream will soon be removed."),e.srcObject=t.srcObject}};t.exports={shimOnTrack:o.shimOnTrack,shimSourceObject:o.shimSourceObject,shimPeerConnection:o.shimPeerConnection,shimGetUserMedia:e("./getusermedia"),attachMediaStream:o.attachMediaStream,reattachMediaStream:o.reattachMediaStream}},{"../utils":50,"./getusermedia":48}],48:[function(e,t,n){"use strict";var r=e("../utils").log,i=e("../utils").browserDetails;t.exports=function(){var e=function(e){return{name:{SecurityError:"NotAllowedError",PermissionDeniedError:"NotAllowedError"}[e.name]||e.name,message:{"The operation is insecure.":"The request is not allowed by the user agent or the platform in the current context."}[e.message]||e.message,constraint:e.constraint,toString:function(){return this.name+(this.message&&": ")+this.message}}},t=function(t,n,o){var a=function(e){if("object"!=typeof e||e.require)return e;var t=[];return Object.keys(e).forEach(function(n){if("require"!==n&&"advanced"!==n&&"mediaSource"!==n){var r=e[n]="object"==typeof e[n]?e[n]:{ideal:e[n]};if(void 0===r.min&&void 0===r.max&&void 0===r.exact||t.push(n),void 0!==r.exact&&("number"==typeof r.exact?r.min=r.max=r.exact:e[n]=r.exact,delete r.exact),void 0!==r.ideal){e.advanced=e.advanced||[];var i={};"number"==typeof r.ideal?i[n]={min:r.ideal,max:r.ideal}:i[n]=r.ideal,e.advanced.push(i),delete r.ideal,Object.keys(r).length||delete e[n]}}}),t.length&&(e.require=t),e};return t=JSON.parse(JSON.stringify(t)),i.version<38&&(r("spec: "+JSON.stringify(t)),t.audio&&(t.audio=a(t.audio)),t.video&&(t.video=a(t.video)),r("ff37: "+JSON.stringify(t))),navigator.mozGetUserMedia(t,n,function(t){o(e(t))})},n=function(e){return new Promise(function(n,r){t(e,n,r)})};if(navigator.mediaDevices||(navigator.mediaDevices={getUserMedia:n,addEventListener:function(){},removeEventListener:function(){}}),navigator.mediaDevices.enumerateDevices=navigator.mediaDevices.enumerateDevices||function(){return new Promise(function(e){e([{kind:"audioinput",deviceId:"default",label:"",groupId:""},{kind:"videoinput",deviceId:"default",label:"",groupId:""}])})},i.version<41){var o=navigator.mediaDevices.enumerateDevices.bind(navigator.mediaDevices);navigator.mediaDevices.enumerateDevices=function(){return o().then(void 0,function(e){if("NotFoundError"===e.name)return[];throw e})}}if(i.version<49){var a=navigator.mediaDevices.getUserMedia.bind(navigator.mediaDevices);navigator.mediaDevices.getUserMedia=function(t){return a(t).catch(function(t){return Promise.reject(e(t))})}}navigator.getUserMedia=function(e,n,r){return i.version<44?t(e,n,r):(console.warn("navigator.getUserMedia has been replaced by navigator.mediaDevices.getUserMedia"),void navigator.mediaDevices.getUserMedia(e).then(n,r))}}},{"../utils":50}],49:[function(e,t,n){"use strict";var r={shimGetUserMedia:function(){navigator.getUserMedia=navigator.webkitGetUserMedia}};t.exports={shimGetUserMedia:r.shimGetUserMedia}},{}],50:[function(e,t,n){"use strict";var r=!0,i={disableLog:function(e){return"boolean"!=typeof e?new Error("Argument type: "+typeof e+". Please use a boolean."):(r=e,e?"adapter.js logging disabled":"adapter.js logging enabled")},log:function(){if("object"==typeof window){if(r)return;"undefined"!=typeof console&&"function"==typeof console.log&&console.log.apply(console,arguments)}},extractVersion:function(e,t,n){var r=e.match(t);return r&&r.length>=n&&parseInt(r[n],10)},detectBrowser:function(){var e={};if(e.browser=null,e.version=null,e.minVersion=null,"undefined"==typeof window||!window.navigator)return e.browser="Not a browser.",e;if(navigator.mozGetUserMedia)e.browser="firefox",e.version=this.extractVersion(navigator.userAgent,/Firefox\/([0-9]+)\./,1),e.minVersion=31;else if(navigator.webkitGetUserMedia)if(window.webkitRTCPeerConnection)e.browser="chrome",e.version=this.extractVersion(navigator.userAgent,/Chrom(e|ium)\/([0-9]+)\./,2),e.minVersion=38;else{if(!navigator.userAgent.match(/Version\/(\d+).(\d+)/))return e.browser="Unsupported webkit-based browser with GUM support but no WebRTC support.",e;e.browser="safari",e.version=this.extractVersion(navigator.userAgent,/AppleWebKit\/([0-9]+)\./,1),e.minVersion=602}else{if(!navigator.mediaDevices||!navigator.userAgent.match(/Edge\/(\d+).(\d+)$/))return e.browser="Not a supported browser.",e;e.browser="edge",e.version=this.extractVersion(navigator.userAgent,/Edge\/(\d+).(\d+)$/,2),e.minVersion=10547}return e.version<e.minVersion&&i.log("Browser: "+e.browser+" Version: "+e.version+" < minimum supported version: "+e.minVersion+"\n some things might not work!"),e}};t.exports={log:i.log,disableLog:i.disableLog,browserDetails:i.detectBrowser(),extractVersion:i.extractVersion}},{}],51:[function(e,t,n){var r,i;window.mozRTCPeerConnection||navigator.mozGetUserMedia?(r="moz",i=parseInt(navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1],10)):(window.webkitRTCPeerConnection||navigator.webkitGetUserMedia)&&(r="webkit",i=navigator.userAgent.match(/Chrom(e|ium)/)&&parseInt(navigator.userAgent.match(/Chrom(e|ium)\/([0-9]+)\./)[2],10));var o=window.mozRTCPeerConnection||window.webkitRTCPeerConnection,a=window.mozRTCIceCandidate||window.RTCIceCandidate,s=window.mozRTCSessionDescription||window.RTCSessionDescription,c=window.webkitMediaStream||window.MediaStream,u="https:"===window.location.protocol&&("webkit"===r&&i>=26||"moz"===r&&i>=33),l=window.AudioContext||window.webkitAudioContext,d=document.createElement("video"),p=d&&d.canPlayType&&"probably"===d.canPlayType('video/webm; codecs="vp8", vorbis'),f=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.msGetUserMedia||navigator.mozGetUserMedia;t.exports={prefix:r,browserVersion:i,support:!!o&&p&&!!f,supportRTCPeerConnection:!!o,supportVp8:p,supportGetUserMedia:!!f,supportDataChannel:!!(o&&o.prototype&&o.prototype.createDataChannel),supportWebAudio:!(!l||!l.prototype.createMediaStreamSource),supportMediaStream:!(!c||!c.prototype.removeTrack),supportScreenSharing:!!u,dataChannel:!!(o&&o.prototype&&o.prototype.createDataChannel),webAudio:!(!l||!l.prototype.createMediaStreamSource),mediaStream:!(!c||!c.prototype.removeTrack),screenSharing:!!u,AudioContext:l,PeerConnection:o,SessionDescription:s,IceCandidate:a,MediaStream:c,getUserMedia:f}},{}],52:[function(e,t,n){function r(){}t.exports=r,r.mixin=function(e){var t=e.prototype||e;t.isWildEmitter=!0,t.on=function(e,t,n){this.callbacks=this.callbacks||{};var r=3===arguments.length,i=r?arguments[1]:void 0,o=r?arguments[2]:arguments[1];return o._groupName=i,(this.callbacks[e]=this.callbacks[e]||[]).push(o),this},t.once=function(e,t,n){function r(){i.off(e,r),s.apply(this,arguments)}var i=this,o=3===arguments.length,a=o?arguments[1]:void 0,s=o?arguments[2]:arguments[1];return this.on(e,a,r),this},t.releaseGroup=function(e){this.callbacks=this.callbacks||{};var t,n,r,i;for(t in this.callbacks)for(i=this.callbacks[t],n=0,r=i.length;n<r;n++)i[n]._groupName===e&&(i.splice(n,1),n--,r--);return this},t.off=function(e,t){this.callbacks=this.callbacks||{};var n,r=this.callbacks[e];return r?1===arguments.length?(delete this.callbacks[e],this):(n=r.indexOf(t),r.splice(n,1),0===r.length&&delete this.callbacks[e],this):this},t.emit=function(e){this.callbacks=this.callbacks||{};var t,n,r,i=[].slice.call(arguments,1),o=this.callbacks[e],a=this.getWildcardCallbacks(e);if(o)for(r=o.slice(),t=0,n=r.length;t<n&&r[t];++t)r[t].apply(this,i);if(a)for(n=a.length,r=a.slice(),t=0,n=r.length;t<n&&r[t];++t)r[t].apply(this,[e].concat(i));return this},t.getWildcardCallbacks=function(e){this.callbacks=this.callbacks||{};var t,n,r=[];for(t in this.callbacks)n=t.split("*"),("*"===t||2===n.length&&e.slice(0,n[0].length)===n[0])&&(r=r.concat(this.callbacks[t]));return r}},r.mixin(r)},{}],53:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e){var t=function(e){function t(e,n){if(r(this,t),void 0===n)throw new Error("Options must not be undefined!");if(null==n.room)throw new Error("You must define a room name!");n.role="slave";var o=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));o.webrtcOptions={url:n.url||"https://yjs.dbis.rwth-aachen.de:5078",room:n.room};var a=new u(o.webrtcOptions);o.swr=a;var s=o;return a.once("connectionReady",function(e){a.joinRoom(s.webrtcOptions.room),a.once("joinedRoom",function(){s.setUserId(e),a.on("channelMessage",function(e,t,n){null!=n.type&&s.receiveMessage(e.id,n.payload)})}),a.on("createdPeer",function(e){s.userJoined(e.id,"master")}),a.on("peerStreamRemoved",function(e){s.userLeft(e.id)})}),o}return o(t,e),s(t,[{key:"disconnect",value:function(){this.swr.leaveRoom(),c(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"disconnect",this).call(this)}},{key:"reconnect",value:function(){this.swr.joinRoom(this.webrtcOptions.room),c(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"reconnect",this).call(this)}},{key:"send",value:function(e,t){var n=this;!function r(){var i,o=n.swr.webrtc.getPeers(e)[0];o&&(i=o.sendDirectly("simplewebrtc","yjs",t)),i||setTimeout(r,500)}()}},{key:"broadcast",value:function(e){this.swr.sendDirectlyToAll("simplewebrtc","yjs",e)}},{key:"isDisconnected",value:function(){return!1}}]),t}(e.AbstractConnector);e.extend("webrtc",t)}var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;return void 0!==a?a.call(r):void 0},u=e("simplewebrtc");t.exports=a,"undefined"!=typeof Y&&a(Y)},{simplewebrtc:36}],54:[function(e,t,n){"function"==typeof Object.create?t.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},{}],55:[function(e,t,n){function r(e){return u===setTimeout?setTimeout(e,0):u.call(null,e,0)}function i(e){l===clearTimeout?clearTimeout(e):l.call(null,e)}function o(){h&&p&&(h=!1,p.length?f=p.concat(f):g=-1,f.length&&a())}function a(){if(!h){var e=r(o);h=!0;for(var t=f.length;t;){for(p=f,f=[];++g<t;)p&&p[g].run();g=-1,t=f.length}p=null,h=!1,i(e)}}function s(e,t){this.fun=e,this.array=t}function c(){}var u,l,d=t.exports={};!function(){try{u=setTimeout}catch(e){u=function(){throw new Error("setTimeout is not defined")}}try{l=clearTimeout}catch(e){l=function(){throw new Error("clearTimeout is not defined")}}}();var p,f=[],h=!1,g=-1;d.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];f.push(new s(e,t)),1!==f.length||h||r(a)},s.prototype.run=function(){this.fun.apply(null,this.array)},d.title="browser",d.browser=!0,d.env={},d.argv=[],d.version="",d.versions={},d.on=c,d.addListener=c,d.once=c,d.off=c,d.removeListener=c,d.removeAllListeners=c,d.emit=c,d.binding=function(e){throw new Error("process.binding is not supported")},d.cwd=function(){return"/"},d.chdir=function(e){throw new Error("process.chdir is not supported")},d.umask=function(){return 0}},{}],56:[function(e,t,n){t.exports=function(e){return e&&"object"==typeof e&&"function"==typeof e.copy&&"function"==typeof e.fill&&"function"==typeof e.readUInt8}},{}],57:[function(e,t,n){(function(t,r){function i(e,t){var r={seen:[],stylize:a};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),g(t)?r.showHidden=t:t&&n._extend(r,t),k(r.showHidden)&&(r.showHidden=!1),k(r.depth)&&(r.depth=2),k(r.colors)&&(r.colors=!1),k(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=o),c(r,e,r.depth)}function o(e,t){var n=i.styles[t];return n?"\x1b["+i.colors[n][0]+"m"+e+"\x1b["+i.colors[n][1]+"m":e}function a(e,t){return e}function s(e){var t={};return e.forEach(function(e,n){t[e]=!0}),t}function c(e,t,r){if(e.customInspect&&t&&E(t.inspect)&&t.inspect!==n.inspect&&(!t.constructor||t.constructor.prototype!==t)){var i=t.inspect(r,e);return b(i)||(i=c(e,i,r)),i}var o=u(e,t);if(o)return o;var a=Object.keys(t),g=s(a);if(e.showHidden&&(a=Object.getOwnPropertyNames(t)),T(t)&&(a.indexOf("message")>=0||a.indexOf("description")>=0))return l(t);if(0===a.length){if(E(t)){var m=t.name?": "+t.name:"";return e.stylize("[Function"+m+"]","special")}if(C(t))return e.stylize(RegExp.prototype.toString.call(t),"regexp");if(x(t))return e.stylize(Date.prototype.toString.call(t),"date");if(T(t))return l(t)}var v="",y=!1,w=["{","}"];if(h(t)&&(y=!0,w=["[","]"]),E(t)){v=" [Function"+(t.name?": "+t.name:"")+"]"}if(C(t)&&(v=" "+RegExp.prototype.toString.call(t)),x(t)&&(v=" "+Date.prototype.toUTCString.call(t)),T(t)&&(v=" "+l(t)),0===a.length&&(!y||0==t.length))return w[0]+v+w[1];if(r<0)return C(t)?e.stylize(RegExp.prototype.toString.call(t),"regexp"):e.stylize("[Object]","special");e.seen.push(t);var k;return k=y?d(e,t,r,g,a):a.map(function(n){return p(e,t,r,g,n,y)}),e.seen.pop(),f(k,v,w)}function u(e,t){if(k(t))return e.stylize("undefined","undefined");if(b(t)){var n="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(n,"string")}return y(t)?e.stylize(""+t,"number"):g(t)?e.stylize(""+t,"boolean"):m(t)?e.stylize("null","null"):void 0}function l(e){return"["+Error.prototype.toString.call(e)+"]"}function d(e,t,n,r,i){for(var o=[],a=0,s=t.length;a<s;++a)I(t,String(a))?o.push(p(e,t,n,r,String(a),!0)):o.push("");return i.forEach(function(i){i.match(/^\d+$/)||o.push(p(e,t,n,r,i,!0))}),o}function p(e,t,n,r,i,o){var a,s,u;if(u=Object.getOwnPropertyDescriptor(t,i)||{value:t[i]},u.get?s=u.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):u.set&&(s=e.stylize("[Setter]","special")),I(r,i)||(a="["+i+"]"),s||(e.seen.indexOf(u.value)<0?(s=m(n)?c(e,u.value,null):c(e,u.value,n-1),s.indexOf("\n")>-1&&(s=o?s.split("\n").map(function(e){return"  "+e}).join("\n").substr(2):"\n"+s.split("\n").map(function(e){return"   "+e}).join("\n"))):s=e.stylize("[Circular]","special")),k(a)){if(o&&i.match(/^\d+$/))return s;a=JSON.stringify(""+i),a.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(a=a.substr(1,a.length-2),a=e.stylize(a,"name")):(a=a.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),a=e.stylize(a,"string"))}return a+": "+s}function f(e,t,n){var r=0;return e.reduce(function(e,t){return r++,t.indexOf("\n")>=0&&r++,e+t.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60?n[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+n[1]:n[0]+t+" "+e.join(", ")+" "+n[1]}function h(e){return Array.isArray(e)}function g(e){return"boolean"==typeof e}function m(e){return null===e}function v(e){return null==e}function y(e){return"number"==typeof e}function b(e){return"string"==typeof e}function w(e){return"symbol"==typeof e}function k(e){return void 0===e}function C(e){return S(e)&&"[object RegExp]"===_(e)}function S(e){return"object"==typeof e&&null!==e}function x(e){return S(e)&&"[object Date]"===_(e)}function T(e){return S(e)&&("[object Error]"===_(e)||e instanceof Error)}function E(e){return"function"==typeof e}function O(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||"undefined"==typeof e}function _(e){return Object.prototype.toString.call(e)}function P(e){return e<10?"0"+e.toString(10):e.toString(10)}function R(){var e=new Date,t=[P(e.getHours()),P(e.getMinutes()),P(e.getSeconds())].join(":");return[e.getDate(),M[e.getMonth()],t].join(" ")}function I(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var D=/%[sdj%]/g;n.format=function(e){if(!b(e)){for(var t=[],n=0;n<arguments.length;n++)t.push(i(arguments[n]));return t.join(" ")}for(var n=1,r=arguments,o=r.length,a=String(e).replace(D,function(e){if("%%"===e)return"%";if(n>=o)return e;switch(e){case"%s":return String(r[n++]);case"%d":return Number(r[n++]);case"%j":try{return JSON.stringify(r[n++])}catch(e){return"[Circular]"}default:return e}}),s=r[n];n<o;s=r[++n])a+=m(s)||!S(s)?" "+s:" "+i(s);return a},n.deprecate=function(e,i){function o(){if(!a){if(t.throwDeprecation)throw new Error(i);t.traceDeprecation?console.trace(i):console.error(i),a=!0}return e.apply(this,arguments)}if(k(r.process))return function(){return n.deprecate(e,i).apply(this,arguments)};if(!0===t.noDeprecation)return e;var a=!1;return o};var N,j={};n.debuglog=function(e){if(k(N)&&(N=t.env.NODE_DEBUG||""),e=e.toUpperCase(),!j[e])if(new RegExp("\\b"+e+"\\b","i").test(N)){var r=t.pid;j[e]=function(){var t=n.format.apply(n,arguments);console.error("%s %d: %s",e,r,t)}}else j[e]=function(){};return j[e]},n.inspect=i,i.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},i.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},n.isArray=h,n.isBoolean=g,n.isNull=m,n.isNullOrUndefined=v,n.isNumber=y,n.isString=b,n.isSymbol=w,n.isUndefined=k,n.isRegExp=C,n.isObject=S,n.isDate=x,n.isError=T,n.isFunction=E,n.isPrimitive=O,n.isBuffer=e("./support/isBuffer");var M=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];n.log=function(){console.log("%s - %s",R(),n.format.apply(n,arguments))},n.inherits=e("inherits"),n._extend=function(e,t){if(!t||!S(t))return e;for(var n=Object.keys(t),r=n.length;r--;)e[n[r]]=t[n[r]];return e}}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./support/isBuffer":56,_process:55,inherits:54}]},{},[53])(53)})}).call(exports,__webpack_require__(1))},function(e,t,n){var r,r;!function(t){e.exports=t()}(function(){return function e(t,n,i){function o(s,c){if(!n[s]){if(!t[s]){var u="function"==typeof r&&r;if(!c&&u)return r(s,!0);if(a)return a(s,!0);var l=new Error("Cannot find module '"+s+"'");throw l.code="MODULE_NOT_FOUND",l}var d=n[s]={exports:{}};t[s][0].call(d.exports,function(e){return o(t[s][1][e]||e)},d,d.exports,e,t,n,i)}return n[s].exports}for(var a="function"==typeof r&&r,s=0;s<i.length;s++)o(i[s]);return o}({1:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e){var t=function(t){function n(t,o,a){r(this,n);var s=i(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));return s.os=t,s._model=o,s._content=a,s._parent=null,s._deepEventHandler=new e.utils.EventListenerHandler,s.eventHandler=new e.utils.EventHandler(function(t){if("Insert"===t.struct){if(s._content.some(function(n){return e.utils.compareIds(n.id,t.id)}))return;var n=void 0;if(null===t.left)n=0;else if((n=1+s._content.findIndex(function(n){return e.utils.compareIds(n.id,t.left)}))<=0)throw new Error("Unexpected operation!");var r,i;if(t.hasOwnProperty("opContent")){s._content.splice(n,0,{id:t.id,type:t.opContent}),i=1;var o=s.os.getType(t.opContent);o._parent=s._model,r=[o]}else{var a=t.content.map(function(e,n){return{id:[t.id[0],t.id[1]+n],val:e}});a.length<3e4?s._content.splice.apply(s._content,[n,0].concat(a)):s._content=s._content.slice(0,n).concat(a).concat(s._content.slice(n)),r=t.content,i=t.content.length}e.utils.bubbleEvent(s,{type:"insert",object:s,index:n,values:r,length:i})}else{if("Delete"!==t.struct)throw new Error("Unexpected struct!");for(var c=0;c<s._content.length&&t.length>0;c++){var u=s._content[c];if(e.utils.inDeletionRange(t,u.id)){var l;for(l=1;l<t.length&&c+l<s._content.length&&e.utils.inDeletionRange(t,s._content[c+l].id);l++);u=s._content[c+l-1],t.length-=u.id[1]-t.target[1]+1,t.target=[u.id[0],u.id[1]+1];var d=s._content.splice(c,l),p=d.map(function(e){return null!=e.val?e.val:s.os.getType(e.type)});e.utils.bubbleEvent(s,{type:"delete",object:s,index:c,values:p,_content:d,length:l})}}}}),s}return o(n,t),s(n,[{key:"_getPathToChild",value:function(t){return this._content.findIndex(function(n){return null!=n.type&&e.utils.compareIds(n.type,t)})}},{key:"_destroy",value:function(){this.eventHandler.destroy(),this.eventHandler=null,this._content=null,this._model=null,this._parent=null,this.os=null}},{key:"get",value:function(e){if(null==e||"number"!=typeof e)throw new Error("pos must be a number!");if(!(e>=this._content.length))return null==this._content[e].type?this._content[e].val:this.os.getType(this._content[e].type)}},{key:"toArray",value:function(){var e=this;return this._content.map(function(t,n){return null!=t.type?e.os.getType(t.type):t.val})}},{key:"push",value:function(e){return this.insert(this._content.length,e)}},{key:"insert",value:function(t,n){if("number"!=typeof t)throw new Error("pos must be a number!");if(!Array.isArray(n))throw new Error("contents must be an Array of objects!");if(0!==n.length){if(t>this._content.length||t<0)throw new Error("This position exceeds the range of the array!");for(var r=0===t?null:this._content[t-1].id,i=[],o=r,a=0;a<n.length;){for(var s,c={left:o,origin:o,parent:this._model,struct:"Insert"},u=[];a<n.length;){var l=n[a++];if(s=e.utils.isTypeDefinition(l)){if(u.length>0){a--;break}break}u.push(l)}if(u.length>0)c.content=u,c.id=this.os.getNextOpId(u.length);else{var d=this.os.getNextOpId(1);this.os.createType(s,d),c.opContent=d,c.id=this.os.getNextOpId(1)}i.push(c),o=c.id}var p=this.eventHandler;this.os.requestTransaction(regeneratorRuntime.mark(function e(){var t,n,o,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null==r){e.next=6;break}return e.delegateYield(this.getInsertionCleanEnd(r),"t0",2);case 2:n=e.t0,t=n.right,e.next=8;break;case 6:return e.delegateYield(this.getOperation(i[0].parent),"t1",7);case 7:t=e.t1.start;case 8:for(o=0;o<i.length;o++)a=i[o],a.right=t;return e.delegateYield(p.awaitOps(this,this.applyCreatedOperations,[i]),"t2",10);case 10:case"end":return e.stop()}},e,this)})),p.awaitAndPrematurelyCall(i)}}},{key:"delete",value:function(t,n){if(null==n&&(n=1),"number"!=typeof n)throw new Error("length must be a number!");if("number"!=typeof t)throw new Error("pos must be a number!");if(t+n>this._content.length||t<0||n<0)throw new Error("The deletion range exceeds the range of the array!");if(0!==n){for(var r=this.eventHandler,i=[],o=0;o<n;o+=a){var a,s=this._content[t+o].id;for(a=1;o+a<n&&e.utils.compareIds(this._content[t+o+a].id,[s[0],s[1]+a]);a++);i.push({target:s,struct:"Delete",length:a})}this.os.requestTransaction(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.delegateYield(r.awaitOps(this,this.applyCreatedOperations,[i]),"t0",1);case 1:case"end":return e.stop()}},e,this)})),r.awaitAndPrematurelyCall(i)}}},{key:"observe",value:function(e){this.eventHandler.addEventListener(e)}},{key:"observeDeep",value:function(e){this._deepEventHandler.addEventListener(e)}},{key:"unobserve",value:function(e){this.eventHandler.removeEventListener(e)}},{key:"unobserveDeep",value:function(e){this._deepEventHandler.removeEventListener(e)}},{key:"_changed",value:regeneratorRuntime.mark(function e(t,n){var r,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n.deleted){e.next=15;break}if("Insert"!==n.struct){e.next=14;break}r=n.left;case 3:if(null==r){e.next=11;break}return e.delegateYield(t.getInsertion(r),"t0",5);case 5:if(i=e.t0,i.deleted){e.next=8;break}return e.abrupt("break",11);case 8:r=i.left,e.next=3;break;case 11:if(n.left=r,null==n.opContent){e.next=14;break}return e.delegateYield(t.store.initType.call(t,n.opContent),"t1",14);case 14:this.eventHandler.receivedOp(n);case 15:case"end":return e.stop()}},e,this)})},{key:"length",get:function(){return this._content.length}}]),n}(e.utils.CustomType);e.extend("Array",new e.utils.CustomTypeDefinition({name:"Array",class:t,struct:"List",initType:regeneratorRuntime.mark(function n(r,i){var o,a,s,c;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return o=[],a=[],n.delegateYield(e.Struct.List.map.call(this,i,function(e){e.hasOwnProperty("opContent")?(o.push({id:e.id,type:e.opContent}),a.push(e.opContent)):e.content.forEach(function(t,n){o.push({id:[e.id[0],e.id[1]+n],val:e.content[n]})})}),"t0",3);case 3:s=0;case 4:if(!(s<a.length)){n.next=11;break}return n.delegateYield(this.store.initType.call(this,a[s]),"t1",6);case 6:c=n.t1,c._parent=i.id;case 8:s++,n.next=4;break;case 11:return n.abrupt("return",new t(r,i.id,o));case 12:case"end":return n.stop()}},n,this)}),createType:function(e,n){return new t(e,n.id,[])}}))}var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();t.exports=a,"undefined"!=typeof Y&&a(Y)},{}]},{},[1])(1)})},function(e,t,n){var r,r;!function(t){e.exports=t()}(function(){return function e(t,n,i){function o(s,c){if(!n[s]){if(!t[s]){var u="function"==typeof r&&r;if(!c&&u)return r(s,!0);if(a)return a(s,!0);var l=new Error("Cannot find module '"+s+"'");throw l.code="MODULE_NOT_FOUND",l}var d=n[s]={exports:{}};t[s][0].call(d.exports,function(e){return o(t[s][1][e]||e)},d,d.exports,e,t,n,i)}return n[s].exports}for(var a="function"==typeof r&&r,s=0;s<i.length;s++)o(i[s]);return o}({1:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e){var t=function(t){function n(t,o,a,s){r(this,n);var c=i(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));return c._model=o.id,c._parent=null,c._deepEventHandler=new e.utils.EventListenerHandler,c.os=t,c.map=e.utils.copyObject(o.map),c.contents=a,c.opContents=s,c.eventHandler=new e.utils.EventHandler(function(t){var n,r="Delete"===t.struct?t.key:t.parentSub;if(n=null!=c.opContents[r]?c.os.getType(c.opContents[r]):c.contents[r],"Insert"===t.struct){if(null===t.left&&!e.utils.compareIds(t.id,c.map[r])){var i;null!=t.opContent?(i=c.os.getType(t.opContent),i._parent=c._model,delete c.contents[r],t.deleted?delete c.opContents[r]:c.opContents[r]=t.opContent):(i=t.content[0],delete c.opContents[r],t.deleted?delete c.contents[r]:c.contents[r]=t.content[0]),c.map[r]=t.id,void 0===n?e.utils.bubbleEvent(c,{name:r,object:c,type:"add",value:i}):e.utils.bubbleEvent(c,{name:r,object:c,oldValue:n,type:"update",value:i})}}else{if("Delete"!==t.struct)throw new Error("Unexpected Operation!");e.utils.compareIds(c.map[r],t.target)&&(delete c.opContents[r],delete c.contents[r],e.utils.bubbleEvent(c,{name:r,object:c,oldValue:n,type:"delete"}))}}),c}return o(n,t),s(n,[{key:"_getPathToChild",value:function(t){var n=this;return Object.keys(this.opContents).find(function(r){return e.utils.compareIds(n.opContents[r],t)})}},{key:"_destroy",value:function(){this.eventHandler.destroy(),this.eventHandler=null,this.contents=null,this.opContents=null,this._model=null,this._parent=null,this.os=null,this.map=null}},{key:"get",value:function(e){if(null==e||"string"!=typeof e)throw new Error("You must specify a key (as string)!");return null==this.opContents[e]?this.contents[e]:this.os.getType(this.opContents[e])}},{key:"keys",value:function(){return Object.keys(this.contents).concat(Object.keys(this.opContents))}},{key:"keysPrimitives",value:function(){return Object.keys(this.contents)}},{key:"keysTypes",value:function(){return Object.keys(this.opContents)}},{key:"getPrimitive",value:function(t){if(null==t)return e.utils.copyObject(this.contents);if("string"!=typeof t)throw new Error("Key is expected to be a string!");return this.contents[t]}},{key:"getType",value:function(e){if(null==e||"string"!=typeof e)throw new Error("You must specify a key (as string)!");return null!=this.opContents[e]?this.os.getType(this.opContents[e]):null}},{key:"delete",value:function(t){var n=this.map[t];if(null!=n){var r={target:n,struct:"Delete"},i=this.eventHandler,o=e.utils.copyObject(r);o.key=t,this.os.requestTransaction(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.delegateYield(i.awaitOps(this,this.applyCreatedOperations,[[r]]),"t0",1);case 1:case"end":return e.stop()}},e,this)})),i.awaitAndPrematurelyCall([o])}}},{key:"set",value:function(t,n){var r=this.map[t]||null,i={id:this.os.getNextOpId(1),left:null,right:r,origin:null,parent:this._model,parentSub:t,struct:"Insert"},o=this.eventHandler,a=e.utils.isTypeDefinition(n);if(!1!==a){var s=this.os.createType(a);return i.opContent=s._model,this.os.requestTransaction(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.delegateYield(o.awaitOps(this,this.applyCreatedOperations,[[i]]),"t0",1);case 1:case"end":return e.stop()}},e,this)})),o.awaitAndPrematurelyCall([i]),s}return i.content=[n],this.os.requestTransaction(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.delegateYield(o.awaitOps(this,this.applyCreatedOperations,[[i]]),"t0",1);case 1:case"end":return e.stop()}},e,this)})),o.awaitAndPrematurelyCall([i]),n}},{key:"observe",value:function(e){this.eventHandler.addEventListener(e)}},{key:"observeDeep",value:function(e){this._deepEventHandler.addEventListener(e)}},{key:"unobserve",value:function(e){this.eventHandler.removeEventListener(e)}},{key:"unobserveDeep",value:function(e){this._deepEventHandler.removeEventListener(e)}},{key:"observePath",value:function(t,r){function i(e){e.name===o&&r(a.get(o))}var o,a=this;if(t.length<1)return r(this),function(){};if(1===t.length)return o=t[0],r(a.get(o)),this.observe(i),function(){a.unobserve(r)};var s,c=function(){var i=a.get(t[0]);i instanceof n||(i=a.set(t[0],e.Map)),s=i.observePath(t.slice(1),r)},u=function(e){e.name===t[0]&&(null!=s&&s(),"add"!==e.type&&"update"!==e.type||c())};return a.observe(u),c(),function(){null!=s&&s(),a.unobserve(u)}}},{key:"_changed",value:regeneratorRuntime.mark(function e(t,n){var r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("Delete"!==n.struct){e.next=7;break}if(null!=n.key){e.next=5;break}return e.delegateYield(t.getOperation(n.target),"t0",3);case 3:r=e.t0,n.key=r.parentSub;case 5:e.next=9;break;case 7:if(null==n.opContent){e.next=9;break}return e.delegateYield(t.store.initType.call(t,n.opContent),"t1",9);case 9:this.eventHandler.receivedOp(n);case 10:case"end":return e.stop()}},e,this)})}]),n}(e.utils.CustomType);e.extend("Map",new e.utils.CustomTypeDefinition({name:"Map",class:t,struct:"Map",initType:regeneratorRuntime.mark(function e(n,r){var i,o,a,s,c,u;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:i={},o={},a=r.map,e.t0=regeneratorRuntime.keys(a);case 4:if((e.t1=e.t0()).done){e.next=20;break}return s=e.t1.value,e.delegateYield(this.getOperation(a[s]),"t2",7);case 7:if(c=e.t2,!c.deleted){e.next=10;break}return e.abrupt("continue",4);case 10:if(null==c.opContent){e.next=17;break}return o[s]=c.opContent,e.delegateYield(this.store.initType.call(this,c.opContent),"t3",13);case 13:u=e.t3,u._parent=r.id,e.next=18;break;case 17:i[s]=c.content[0];case 18:e.next=4;break;case 20:return e.abrupt("return",new t(n,r,i,o));case 21:case"end":return e.stop()}},e,this)}),createType:function(e,n){return new t(e,n,{},{})}}))}var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();t.exports=a,"undefined"!=typeof Y&&a(Y)},{}]},{},[1])(1)})}]);
//# sourceMappingURL=main.0b9aa27b.js.map